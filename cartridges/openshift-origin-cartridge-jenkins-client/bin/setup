#!/bin/bash -e

PATH=/bin:/usr/bin:$PATH

cartridge_type="jenkins-client"

version=1.4
OPENSHIFT_JENKINS_CLIENT_DIR="${OPENSHIFT_HOMEDIR}redhat-$cartridge_type"
echo "export OPENSHIFT_JENKINS_CLIENT_VERSION='$version'" > "$OPENSHIFT_JENKINS_CLIENT_DIR/env/OPENSHIFT_JENKINS_CLIENT_VERSION"
echo "export OPENSHIFT_JENKINS_CLIENT_DIR='$OPENSHIFT_JENKINS_CLIENT_DIR'" > "$OPENSHIFT_JENKINS_CLIENT_DIR/env/OPENSHIFT_JENKINS_CLIENT_DIR"

# Create additional directories required by JENKINS
mkdir -p ${OPENSHIFT_JENKINS_CLIENT_DIR}/{bin,logs,data}

# Copy the version specific files up to jbosseap directory
cp -r ${OPENSHIFT_JENKINS_CLIENT_DIR}/versions/${version}/configuration/* ${OPENSHIFT_JENKINS_CLIENT_DIR}/configuration
cp -r ${OPENSHIFT_JENKINS_CLIENT_DIR}/versions/${version}/metadata/* ${OPENSHIFT_JENKINS_CLIENT_DIR}/metadata
cp -r ${OPENSHIFT_JENKINS_CLIENT_DIR}/versions/${version}/template/* ${OPENSHIFT_JENKINS_CLIENT_DIR}/template
cp -r ${OPENSHIFT_JENKINS_CLIENT_DIR}/versions/${version}/template/.openshift ${OPENSHIFT_JENKINS_CLIENT_DIR}/template







