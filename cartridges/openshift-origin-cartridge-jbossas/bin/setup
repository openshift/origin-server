#!/bin/bash -eu

cartridge_type="jbossas"

version=7.1
echo "$version" > "$OPENSHIFT_JBOSSAS_DIR/env/OPENSHIFT_JBOSSAS_VERSION"

# Create additional directories required by JBOSSAS
mkdir -p ${OPENSHIFT_HOMEDIR}/.m2
mkdir -p ${OPENSHIFT_JBOSSAS_DIR}/{bin,template,standalone/tmp,standalone/deployments,standalone/configuration,standalone/log,standalone/data}

# Copy the version specific files up to jbossas directory
cp -r ${OPENSHIFT_JBOSSAS_DIR}/versions/${version}/standalone/configuration/* ${OPENSHIFT_JBOSSAS_DIR}/standalone/configuration
cp -r ${OPENSHIFT_JBOSSAS_DIR}/versions/${version}/metadata/* ${OPENSHIFT_JBOSSAS_DIR}/metadata
cp ${OPENSHIFT_JBOSSAS_DIR}/versions/${version}/bin/* ${OPENSHIFT_JBOSSAS_DIR}/bin