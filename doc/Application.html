<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: Application</title>

  <link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="./controller/app/models/application_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="controller/app/models/application.rb">controller/app/models/application.rb</a></li>
          
            <li><a href="./console/app/models/application_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="console/app/models/application.rb">console/app/models/application.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link"><a href="RestApi/Base.html">RestApi::Base</a></p>
        
      </div>
      

      

      
      <!-- Namespace Contents -->
      <div id="namespace-list-section" class="section">
        <h3 class="section-header">Namespace</h3>
        <ul class="link-list">
          
          <li><span class="type">CLASS</span> <a href="Application/Member.html">Application::Member</a></li>
          
        </ul>
      </div>
      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-c-check_name-21">::check_name!</a></li>
          
          <li><a href="#method-c-create_app">::create_app</a></li>
          
          <li><a href="#method-c-element_path">::element_path</a></li>
          
          <li><a href="#method-c-find">::find</a></li>
          
          <li><a href="#method-c-find_by_gear_uuid">::find_by_gear_uuid</a></li>
          
          <li><a href="#method-c-find_by_user">::find_by_user</a></li>
          
          <li><a href="#method-c-id_from_param">::id_from_param</a></li>
          
          <li><a href="#method-c-new">::new</a></li>
          
          <li><a href="#method-c-rescue_parent_missing">::rescue_parent_missing</a></li>
          
          <li><a href="#method-c-run_in_application_lock">::run_in_application_lock</a></li>
          
          <li><a href="#method-c-safe_name">::safe_name</a></li>
          
          <li><a href="#method-c-sanitize_user_env_variables">::sanitize_user_env_variables</a></li>
          
          <li><a href="#method-c-suggest_name_from">::suggest_name_from</a></li>
          
          <li><a href="#method-c-validate_user_env_variables">::validate_user_env_variables</a></li>
          
          <li><a href="#method-c-validation_map">::validation_map</a></li>
          
          <li><a href="#method-c-with_gear_counts">::with_gear_counts</a></li>
          
          <li><a href="#method-i-activate">#activate</a></li>
          
          <li><a href="#method-i-add_alias">#add_alias</a></li>
          
          <li><a href="#method-i-add_env_variables">#add_env_variables</a></li>
          
          <li><a href="#method-i-add_features">#add_features</a></li>
          
          <li><a href="#method-i-add_sparse_cart-3F">#add_sparse_cart?</a></li>
          
          <li><a href="#method-i-add_ssh_keys">#add_ssh_keys</a></li>
          
          <li><a href="#method-i-aliases">#aliases</a></li>
          
          <li><a href="#method-i-builds-3F">#builds?</a></li>
          
          <li><a href="#method-i-calculate_add_component_ops">#calculate_add_component_ops</a></li>
          
          <li><a href="#method-i-calculate_component_orders">#calculate_component_orders</a></li>
          
          <li><a href="#method-i-calculate_configure_order">#calculate_configure_order</a></li>
          
          <li><a href="#method-i-calculate_gear_create_ops">#calculate_gear_create_ops</a></li>
          
          <li><a href="#method-i-calculate_gear_destroy_ops">#calculate_gear_destroy_ops</a></li>
          
          <li><a href="#method-i-calculate_ops">#calculate_ops</a></li>
          
          <li><a href="#method-i-calculate_remove_component_ops">#calculate_remove_component_ops</a></li>
          
          <li><a href="#method-i-calculate_remove_group_instance_ops">#calculate_remove_group_instance_ops</a></li>
          
          <li><a href="#method-i-calculate_scale_by">#calculate_scale_by</a></li>
          
          <li><a href="#method-i-capabilities">#capabilities</a></li>
          
          <li><a href="#method-i-cartridge_gear_groups">#cartridge_gear_groups</a></li>
          
          <li><a href="#method-i-cartridge_names">#cartridge_names</a></li>
          
          <li><a href="#method-i-cartridge_names-3D">#cartridge_names=</a></li>
          
          <li><a href="#method-i-cartridges">#cartridges</a></li>
          
          <li><a href="#method-i-child_options">#child_options</a></li>
          
          <li><a href="#method-i-child_prefix_options">#child_prefix_options</a></li>
          
          <li><a href="#method-i-component_status">#component_status</a></li>
          
          <li><a href="#method-i-compute_diffs">#compute_diffs</a></li>
          
          <li><a href="#method-i-deploy">#deploy</a></li>
          
          <li><a href="#method-i-deregister_routing_dns">#deregister_routing_dns</a></li>
          
          <li><a href="#method-i-destroy_app">#destroy_app</a></li>
          
          <li><a href="#method-i-destroy_build_cartridge">#destroy_build_cartridge</a></li>
          
          <li><a href="#method-i-domain_namespace">#domain_namespace</a></li>
          
          <li><a href="#method-i-elaborate">#elaborate</a></li>
          
          <li><a href="#method-i-element_path">#element_path</a></li>
          
          <li><a href="#method-i-embedded">#embedded</a></li>
          
          <li><a href="#method-i-enforce_system_order">#enforce_system_order</a></li>
          
          <li><a href="#method-i-execute_connections">#execute_connections</a></li>
          
          <li><a href="#method-i-extended_validator">#extended_validator</a></li>
          
          <li><a href="#method-i-find_alias">#find_alias</a></li>
          
          <li><a href="#method-i-find_cartridge">#find_cartridge</a></li>
          
          <li><a href="#method-i-fix_gear_ssh_keys">#fix_gear_ssh_keys</a></li>
          
          <li><a href="#method-i-fqdn">#fqdn</a></li>
          
          <li><a href="#method-i-framework_name">#framework_name</a></li>
          
          <li><a href="#method-i-gear_groups">#gear_groups</a></li>
          
          <li><a href="#method-i-gear_ranges">#gear_ranges</a></li>
          
          <li><a href="#method-i-gears">#gears</a></li>
          
          <li><a href="#method-i-gen_non_scalable_app_overrides">#gen_non_scalable_app_overrides</a></li>
          
          <li><a href="#method-i-get_all_updated_ssh_keys">#get_all_updated_ssh_keys</a></li>
          
          <li><a href="#method-i-get_app_dns_gear">#get_app_dns_gear</a></li>
          
          <li><a href="#method-i-get_app_scaling_limits">#get_app_scaling_limits</a></li>
          
          <li><a href="#method-i-get_components_for_feature">#get_components_for_feature</a></li>
          
          <li><a href="#method-i-get_feature">#get_feature</a></li>
          
          <li><a href="#method-i-get_framework_cartridge">#get_framework_cartridge</a></li>
          
          <li><a href="#method-i-get_gear_states">#get_gear_states</a></li>
          
          <li><a href="#method-i-get_sparse_scaledown_gears">#get_sparse_scaledown_gears</a></li>
          
          <li><a href="#method-i-get_unsubscribe_info">#get_unsubscribe_info</a></li>
          
          <li><a href="#method-i-get_updated_ssh_keys">#get_updated_ssh_keys</a></li>
          
          <li><a href="#method-i-get_web_framework_gears">#get_web_framework_gears</a></li>
          
          <li><a href="#method-i-get_web_proxy_gears">#get_web_proxy_gears</a></li>
          
          <li><a href="#method-i-group_instances_with_scale">#group_instances_with_scale</a></li>
          
          <li><a href="#method-i-health_check_path">#health_check_path</a></li>
          
          <li><a href="#method-i-list_user_env_variables">#list_user_env_variables</a></li>
          
          <li><a href="#method-i-make_ha">#make_ha</a></li>
          
          <li><a href="#method-i-members_changed">#members_changed</a></li>
          
          <li><a href="#method-i-merge_comp_specs">#merge_comp_specs</a></li>
          
          <li><a href="#method-i-merge_group_overrides">#merge_group_overrides</a></li>
          
          <li><a href="#method-i-name-3D">#name=</a></li>
          
          <li><a href="#method-i-patch_user_env_variables">#patch_user_env_variables</a></li>
          
          <li><a href="#method-i-process_commands">#process_commands</a></li>
          
          <li><a href="#method-i-process_group_overrides">#process_group_overrides</a></li>
          
          <li><a href="#method-i-quarantined">#quarantined</a></li>
          
          <li><a href="#method-i-refresh_deployments">#refresh_deployments</a></li>
          
          <li><a href="#method-i-register_routing_dns">#register_routing_dns</a></li>
          
          <li><a href="#method-i-reload">#reload</a></li>
          
          <li><a href="#method-i-reload_component_config">#reload_component_config</a></li>
          
          <li><a href="#method-i-reload_config">#reload_config</a></li>
          
          <li><a href="#method-i-remove_alias">#remove_alias</a></li>
          
          <li><a href="#method-i-remove_env_variables">#remove_env_variables</a></li>
          
          <li><a href="#method-i-remove_features">#remove_features</a></li>
          
          <li><a href="#method-i-remove_gear">#remove_gear</a></li>
          
          <li><a href="#method-i-remove_ssh_keys">#remove_ssh_keys</a></li>
          
          <li><a href="#method-i-requires">#requires</a></li>
          
          <li><a href="#method-i-restart">#restart</a></li>
          
          <li><a href="#method-i-restart-21">#restart!</a></li>
          
          <li><a href="#method-i-restart_component">#restart_component</a></li>
          
          <li><a href="#method-i-run_connection_hooks">#run_connection_hooks</a></li>
          
          <li><a href="#method-i-run_jobs">#run_jobs</a></li>
          
          <li><a href="#method-i-scale_by">#scale_by</a></li>
          
          <li><a href="#method-i-scale_status_url">#scale_status_url</a></li>
          
          <li><a href="#method-i-scales-3F">#scales?</a></li>
          
          <li><a href="#method-i-set_connections">#set_connections</a></li>
          
          <li><a href="#method-i-set_group_overrides">#set_group_overrides</a></li>
          
          <li><a href="#method-i-show_port">#show_port</a></li>
          
          <li><a href="#method-i-ssh_string">#ssh_string</a></li>
          
          <li><a href="#method-i-ssh_uri">#ssh_uri</a></li>
          
          <li><a href="#method-i-ssh_url">#ssh_url</a></li>
          
          <li><a href="#method-i-start">#start</a></li>
          
          <li><a href="#method-i-start_component">#start_component</a></li>
          
          <li><a href="#method-i-status">#status</a></li>
          
          <li><a href="#method-i-stop">#stop</a></li>
          
          <li><a href="#method-i-stop_component">#stop_component</a></li>
          
          <li><a href="#method-i-subscription_filter">#subscription_filter</a></li>
          
          <li><a href="#method-i-threaddump">#threaddump</a></li>
          
          <li><a href="#method-i-tidy">#tidy</a></li>
          
          <li><a href="#method-i-to_descriptor">#to_descriptor</a></li>
          
          <li><a href="#method-i-to_param">#to_param</a></li>
          
          <li><a href="#method-i-update_alias">#update_alias</a></li>
          
          <li><a href="#method-i-update_cluster">#update_cluster</a></li>
          
          <li><a href="#method-i-update_component_limits">#update_component_limits</a></li>
          
          <li><a href="#method-i-update_configuration">#update_configuration</a></li>
          
          <li><a href="#method-i-update_deployments">#update_deployments</a></li>
          
          <li><a href="#method-i-update_deployments_from_result">#update_deployments_from_result</a></li>
          
          <li><a href="#method-i-update_proxy_status">#update_proxy_status</a></li>
          
          <li><a href="#method-i-update_requirements">#update_requirements</a></li>
          
          <li><a href="#method-i-uuid">#uuid</a></li>
          
          <li><a href="#method-i-valid-3F">#valid?</a></li>
          
          <li><a href="#method-i-validate_certificate">#validate_certificate</a></li>
          
          <li><a href="#method-i-web_uri">#web_uri</a></li>
          
          <li><a href="#method-i-web_url">#web_url</a></li>
          
          <li><a href="#method-i-with_lock">#with_lock</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><span class="include">Mongoid::Document</span></li>
        
        
        
          <li><span class="include">Mongoid::Timestamps</span></li>
        
        
        
          <li><a class="include" href="Membership.html">Membership</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./admin-console/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./admin-console/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./admin-console/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./admin-console/script/load-fake-data.html">load-fake-data</a></li>
        
          <li class="file"><a href="./admin-console/test/dummy/README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="./admin-console/test/dummy/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./broker-util/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-accept-broker_txt2man.html">oo-accept-broker.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-accept-systems_txt2man.html">oo-accept-systems.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-broker-cache_txt2man.html">oo-admin-broker-cache.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-chk_txt2man.html">oo-admin-chk.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-clear-pending-ops_txt2man.html">oo-admin-clear-pending-ops.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-ctl-app_txt2man.html">oo-admin-ctl-app.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-ctl-authorization_txt2man.html">oo-admin-ctl-authorization.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-ctl-district_txt2man.html">oo-admin-ctl-district.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-ctl-domain_txt2man.html">oo-admin-ctl-domain.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-ctl-usage_txt2man.html">oo-admin-ctl-usage.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-ctl-user_txt2man.html">oo-admin-ctl-user.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-move_txt2man.html">oo-admin-move.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-repair_txt2man.html">oo-admin-repair.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-admin-usage_txt2man.html">oo-admin-usage.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-analytics-export_txt2man.html">oo-analytics-export.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-analytics-import_txt2man.html">oo-analytics-import.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-app-info_txt2man.html">oo-app-info.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-quarantine_txt2man.html">oo-quarantine.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-register-dns_txt2man.html">oo-register-dns.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/man/oo-stats_txt2man.html">oo-stats.txt2man</a></li>
        
          <li class="file"><a href="./broker-util/oo-accept-broker.html">oo-accept-broker</a></li>
        
          <li class="file"><a href="./broker-util/oo-accept-systems.html">oo-accept-systems</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-broker-auth.html">oo-admin-broker-auth</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-broker-cache.html">oo-admin-broker-cache</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-chk.html">oo-admin-chk</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-clear-pending-ops.html">oo-admin-clear-pending-ops</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-ctl-app.html">oo-admin-ctl-app</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-ctl-authorization.html">oo-admin-ctl-authorization</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-ctl-district.html">oo-admin-ctl-district</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-ctl-domain.html">oo-admin-ctl-domain</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-ctl-usage.html">oo-admin-ctl-usage</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-ctl-user.html">oo-admin-ctl-user</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-move.html">oo-admin-move</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-repair.html">oo-admin-repair</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-upgrade.html">oo-admin-upgrade</a></li>
        
          <li class="file"><a href="./broker-util/oo-admin-usage.html">oo-admin-usage</a></li>
        
          <li class="file"><a href="./broker-util/oo-analytics-export.html">oo-analytics-export</a></li>
        
          <li class="file"><a href="./broker-util/oo-analytics-import.html">oo-analytics-import</a></li>
        
          <li class="file"><a href="./broker-util/oo-app-info.html">oo-app-info</a></li>
        
          <li class="file"><a href="./broker-util/oo-quarantine.html">oo-quarantine</a></li>
        
          <li class="file"><a href="./broker-util/oo-register-dns.html">oo-register-dns</a></li>
        
          <li class="file"><a href="./broker-util/oo-stats.html">oo-stats</a></li>
        
          <li class="file"><a href="./broker/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./broker/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./broker/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./broker/README.html">README</a></li>
        
          <li class="file"><a href="./broker/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./broker/conf/plugins_d/README.html">README</a></li>
        
          <li class="file"><a href="./broker/doc/assets/certificate_txt.html">certificate.txt</a></li>
        
          <li class="file"><a href="./broker/doc/assets/header_txt.html">header.txt</a></li>
        
          <li class="file"><a href="./broker/doc/assets/private-key_txt.html">private-key.txt</a></li>
        
          <li class="file"><a href="./broker/doc/assets/ssh-key_txt.html">ssh-key.txt</a></li>
        
          <li class="file"><a href="./broker/init_d/openshift-broker.html">openshift-broker</a></li>
        
          <li class="file"><a href="./broker/public/robots_txt.html">robots.txt</a></li>
        
          <li class="file"><a href="./broker/script/broker_ruby.html">broker_ruby</a></li>
        
          <li class="file"><a href="./broker/script/rails.html">rails</a></li>
        
          <li class="file"><a href="./broker/test/helpers/rest/README_txt.html">README.txt</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-10gen-mms-agent/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-10gen-mms-agent/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-10gen-mms-agent/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-10gen-mms-agent/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-10gen-mms-agent/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-10gen-mms-agent/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-cron/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-cron/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-cron/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-cron/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-cron/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-cron/configuration/frequencies.html">frequencies</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-cron/configuration/limits.html">limits</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-diy/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-diy/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-diy/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-diy/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/hooks/publish-haproxy-status-url.html">publish-haproxy-status-url</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/hooks/set-haproxy-status-url.html">set-haproxy-status-url</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/usr/bin/add-gear.html">add-gear</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/usr/bin/disable-colocated-gears.html">disable-colocated-gears</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/usr/bin/gear-scale-ctl.html">gear-scale-ctl</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/usr/bin/haproxy_ctld.html">haproxy_ctld</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/usr/bin/haproxy_ctld_daemon.html">haproxy_ctld_daemon</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/usr/bin/remove-gear.html">remove-gear</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/usr/bin/ssh.html">ssh</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-haproxy/usr/bin/update-cluster.html">update-cluster</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/bin/post_install.html">post_install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/bin/util.html">util</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/env/M2_HOME.html">M2_HOME</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/env/OPENSHIFT_JBOSSAS_JDK6.html">OPENSHIFT_JBOSSAS_JDK6</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/env/OPENSHIFT_JBOSSAS_JDK7.html">OPENSHIFT_JBOSSAS_JDK7</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/hooks/publish-jboss-cluster.html">publish-jboss-cluster</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/hooks/publish-jboss-remoting.html">publish-jboss-remoting</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/hooks/set-jboss-cluster.html">set-jboss-cluster</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossas/hooks/set-jboss-remoting.html">set-jboss-remoting</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/bin/post_install.html">post_install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/bin/util.html">util</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/env/M2_HOME.html">M2_HOME</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/env/OPENSHIFT_JBOSSEAP_JDK6.html">OPENSHIFT_JBOSSEAP_JDK6</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/env/OPENSHIFT_JBOSSEAP_JDK7.html">OPENSHIFT_JBOSSEAP_JDK7</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/hooks/publish-jboss-cluster.html">publish-jboss-cluster</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/hooks/publish-jboss-remoting.html">publish-jboss-remoting</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/hooks/set-jboss-cluster.html">set-jboss-cluster</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbosseap/hooks/set-jboss-remoting.html">set-jboss-remoting</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/build.html">build</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/deploy.html">deploy</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/post_install.html">post_install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/tomcat.html">tomcat</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/bin/util.html">util</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/env/M2_HOME.html">M2_HOME</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/env/OPENSHIFT_JBOSSEWS_JDK6.html">OPENSHIFT_JBOSSEWS_JDK6</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jbossews/env/OPENSHIFT_JBOSSEWS_JDK7.html">OPENSHIFT_JBOSSEWS_JDK7</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/bin/jenkins_build.html">jenkins_build</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/bin/jenkins_create_job.html">jenkins_create_job</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/bin/jenkins_job_action.html">jenkins_job_action</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/metadata/jenkins_artifacts_glob.html">jenkins_artifacts_glob</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins-client/metadata/jenkins_shell_command.html">jenkins_shell_command</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins/bin/util.html">util</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-jenkins/configuration/userContent/readme_txt.html">readme.txt</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/bin/build.html">build</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/bin/post_install.html">post_install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mariadb/hooks/publish-db-connection-info.html">publish-db-connection-info</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/bin/post_install.html">post_install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/hooks/publish-db-connection-info.html">publish-db-connection-info</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/usr/shared-script.html">shared-script</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock-plugin/usr/sni-port.html">sni-port</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock/bin/post_install.html">post_install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mock/usr/bin/shared-script.html">shared-script</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mongodb/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mongodb/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mongodb/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mongodb/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mongodb/bin/mkjournal.html">mkjournal</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mongodb/bin/post_install.html">post_install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mongodb/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mongodb/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mongodb/hooks/publish-nosql-db-connection-info.html">publish-nosql-db-connection-info</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mysql/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mysql/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mysql/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mysql/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mysql/bin/post_install.html">post_install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mysql/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mysql/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-mysql/hooks/publish-db-connection-info.html">publish-db-connection-info</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/lib/util.html">util</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/usr/template/deplist_txt.html">deplist.txt</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/versions/0_10/configuration/npm_global_module_list.html">npm_global_module_list</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/versions/0_6/configuration/npm_global_module_list.html">npm_global_module_list</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-nodejs/versions/shared/configuration/npm_global_module_list.html">npm_global_module_list</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-perl/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-perl/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-perl/bin/build.html">build</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-perl/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-perl/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-perl/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-perl/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-perl/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-perl/usr/template/deplist_txt.html">deplist.txt</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-php/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-php/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-php/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-php/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-php/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-php/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-php/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-php/usr/template/deplist_txt.html">deplist.txt</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-phpmyadmin/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-phpmyadmin/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-phpmyadmin/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-phpmyadmin/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-phpmyadmin/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-postgresql/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-postgresql/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-postgresql/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-postgresql/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-postgresql/bin/post_install.html">post_install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-postgresql/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-postgresql/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-postgresql/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-postgresql/hooks/publish-db-connection-info.html">publish-db-connection-info</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/2_7-scl/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/2_7-scl/lib/python-context.html">python-context</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/2_7-scl/lib/update-configuration.html">update-configuration</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/3_3-scl/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/3_3-scl/lib/create-virtenv.html">create-virtenv</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/3_3-scl/lib/python-context.html">python-context</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/3_3-scl/lib/update-configuration.html">update-configuration</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/3_3-scl/template/wsgi/application.html">application</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/3_3-scl/template/wsgi/static/README.html">README</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/shared/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/shared/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/shared/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/shared/lib/create-virtenv.html">create-virtenv</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/shared/lib/python-context.html">python-context</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/shared/lib/update-configuration.html">update-configuration</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/shared/template/wsgi/application.html">application</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-python/usr/versions/shared/template/wsgi/static/README.html">README</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-ruby/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-ruby/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-ruby/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-ruby/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-ruby/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-ruby/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-ruby/bin/upgrade.html">upgrade</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-ruby/lib/util.html">util</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-switchyard/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-switchyard/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-switchyard/bin/control.html">control</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-switchyard/bin/install.html">install</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-switchyard/bin/setup.html">setup</a></li>
        
          <li class="file"><a href="./cartridges/openshift-origin-cartridge-switchyard/bin/teardown.html">teardown</a></li>
        
          <li class="file"><a href="./common/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./common/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./common/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./common/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./common/bin/man/oo-diagnostics_txt2man.html">oo-diagnostics.txt2man</a></li>
        
          <li class="file"><a href="./common/bin/oo-diagnostics.html">oo-diagnostics</a></li>
        
          <li class="file"><a href="./console/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./console/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./console/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./console/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./console/script/rails.html">rails</a></li>
        
          <li class="file"><a href="./console/test/fixtures/cert_key_rsa.html">cert_key_rsa</a></li>
        
          <li class="file"><a href="./console/test/fixtures/empty_cert_key_rsa.html">empty_cert_key_rsa</a></li>
        
          <li class="file"><a href="./console/test/rails_app/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./console/test/rails_app/script/rails.html">rails</a></li>
        
          <li class="file"><a href="./console/vendor/assets/javascripts/MIT-LICENSE_txt.html">MIT-LICENSE.txt</a></li>
        
          <li class="file"><a href="./controller/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./controller/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./controller/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./controller/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./controller/test/ddns/HOWTO_txt.html">HOWTO.txt</a></li>
        
          <li class="file"><a href="./documentation/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./documentation/Guardfile.html">Guardfile</a></li>
        
          <li class="file"><a href="./documentation/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./extras/avahi-cname-manager/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./extras/avahi-cname-manager/README.html">README</a></li>
        
          <li class="file"><a href="./extras/nsjoin/Makefile.html">Makefile</a></li>
        
          <li class="file"><a href="./node-proxy/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./node-proxy/README.html">README</a></li>
        
          <li class="file"><a href="./node-proxy/TODOs.html">TODOs</a></li>
        
          <li class="file"><a href="./node-proxy/scripts/bin/node-find-proxy-route-files.html">node-find-proxy-route-files</a></li>
        
          <li class="file"><a href="./node-proxy/scripts/init_d/openshift-node-web-proxy.html">openshift-node-web-proxy</a></li>
        
          <li class="file"><a href="./node-util/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-accept-node.html">oo-accept-node</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-admin-cartridge.html">oo-admin-cartridge</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-admin-ctl-gears.html">oo-admin-ctl-gears</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-admin-repair-node.html">oo-admin-repair-node</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-auto-idler.html">oo-auto-idler</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-binary-deploy.html">oo-binary-deploy</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-cartridge.html">oo-cartridge</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-config-eval.html">oo-config-eval</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-gear-registry.html">oo-gear-registry</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-idler-stats.html">oo-idler-stats</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-init-quota.html">oo-init-quota</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-last-access.html">oo-last-access</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-list-access.html">oo-list-access</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-restore.html">oo-restore</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-restorecon.html">oo-restorecon</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-restorer.html">oo-restorer</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-snapshot.html">oo-snapshot</a></li>
        
          <li class="file"><a href="./node-util/bin/oo-su.html">oo-su</a></li>
        
          <li class="file"><a href="./node-util/bin/rhc-list-ports.html">rhc-list-ports</a></li>
        
          <li class="file"><a href="./node-util/init_d/openshift-gears.html">openshift-gears</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-accept-node_txt2man.html">oo-accept-node.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-admin-cartridge_txt2man.html">oo-admin-cartridge.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-auto-idler_txt2man.html">oo-auto-idler.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-cartridge_txt2man.html">oo-cartridge.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-httpd-singular_txt2man.html">oo-httpd-singular.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-idler-stats_txt2man.html">oo-idler-stats.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-init-quota_txt2man.html">oo-init-quota.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-last-access_txt2man.html">oo-last-access.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-restorecon_txt2man.html">oo-restorecon.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-restorer-wrapper_sh_txt2man.html">oo-restorer-wrapper.sh.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-restorer_txt2man.html">oo-restorer.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/oo-su_txt2man.html">oo-su.txt2man</a></li>
        
          <li class="file"><a href="./node-util/man8/rhc-list-ports_txt2man.html">rhc-list-ports.txt2man</a></li>
        
          <li class="file"><a href="./node-util/www/html/health_txt.html">health.txt</a></li>
        
          <li class="file"><a href="./node/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./node/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./node/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./node/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./node/conf/env/OPENSHIFT_BROKER_HOST.html">OPENSHIFT_BROKER_HOST</a></li>
        
          <li class="file"><a href="./node/conf/env/OPENSHIFT_CLOUD_DOMAIN.html">OPENSHIFT_CLOUD_DOMAIN</a></li>
        
          <li class="file"><a href="./node/conf/env/OPENSHIFT_UMASK.html">OPENSHIFT_UMASK</a></li>
        
          <li class="file"><a href="./node/conf/env/PATH.html">PATH</a></li>
        
          <li class="file"><a href="./node/jobs/1minutely.html">1minutely</a></li>
        
          <li class="file"><a href="./node/jobs/openshift-origin-cron-daily.html">openshift-origin-cron-daily</a></li>
        
          <li class="file"><a href="./node/jobs/openshift-origin-cron-hourly.html">openshift-origin-cron-hourly</a></li>
        
          <li class="file"><a href="./node/jobs/openshift-origin-cron-minutely.html">openshift-origin-cron-minutely</a></li>
        
          <li class="file"><a href="./node/jobs/openshift-origin-cron-monthly.html">openshift-origin-cron-monthly</a></li>
        
          <li class="file"><a href="./node/jobs/openshift-origin-cron-weekly.html">openshift-origin-cron-weekly</a></li>
        
          <li class="file"><a href="./node/jobs/openshift-origin-stale-lockfiles.html">openshift-origin-stale-lockfiles</a></li>
        
          <li class="file"><a href="./node/misc/bin/gear.html">gear</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-cgroup-disable.html">oo-cgroup-disable</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-cgroup-enable.html">oo-cgroup-enable</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-cgroup-reclassify.html">oo-cgroup-reclassify</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-cgroup-template.html">oo-cgroup-template</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-devel-node.html">oo-devel-node</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-frontend-plugin-modify.html">oo-frontend-plugin-modify</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-get-mcs-level.html">oo-get-mcs-level</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-iptables-port-proxy.html">oo-iptables-port-proxy</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-pam-disable.html">oo-pam-disable</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-pam-enable.html">oo-pam-enable</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-scheduled-jobs.html">oo-scheduled-jobs</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-ssh.html">oo-ssh</a></li>
        
          <li class="file"><a href="./node/misc/bin/oo-trap-user.html">oo-trap-user</a></li>
        
          <li class="file"><a href="./node/misc/bin/rhcsh.html">rhcsh</a></li>
        
          <li class="file"><a href="./node/misc/init/openshift-iptables-port-proxy.html">openshift-iptables-port-proxy</a></li>
        
          <li class="file"><a href="./node/misc/init/openshift-tc.html">openshift-tc</a></li>
        
          <li class="file"><a href="./node/misc/sbin/oo-admin-ctl-iptables-port-proxy.html">oo-admin-ctl-iptables-port-proxy</a></li>
        
          <li class="file"><a href="./node/misc/sbin/oo-admin-ctl-tc.html">oo-admin-ctl-tc</a></li>
        
          <li class="file"><a href="./node/misc/usr/lib/cartridge_sdk/bash/sdk.html">sdk</a></li>
        
          <li class="file"><a href="./node/test/unit/data/k5login_test_modify_read.html">k5login_test_modify_read</a></li>
        
          <li class="file"><a href="./node/test/unit/data/ssh_authorized_keys_init.html">ssh_authorized_keys_init</a></li>
        
          <li class="file"><a href="./openshift-console/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./openshift-console/README_rdoc.html">README.rdoc</a></li>
        
          <li class="file"><a href="./openshift-console/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./openshift-console/httpd/conf_d/README-KERB.html">README-KERB</a></li>
        
          <li class="file"><a href="./openshift-console/httpd/conf_d/README-LDAP.html">README-LDAP</a></li>
        
          <li class="file"><a href="./openshift-console/init_d/openshift-console.html">openshift-console</a></li>
        
          <li class="file"><a href="./openshift-console/public/robots_txt.html">robots.txt</a></li>
        
          <li class="file"><a href="./openshift-console/script/console_ruby.html">console_ruby</a></li>
        
          <li class="file"><a href="./openshift-console/script/rails.html">rails</a></li>
        
          <li class="file"><a href="./pam_openshift/AUTHORS.html">AUTHORS</a></li>
        
          <li class="file"><a href="./pam_openshift/COPYING.html">COPYING</a></li>
        
          <li class="file"><a href="./pam_openshift/ChangeLog.html">ChangeLog</a></li>
        
          <li class="file"><a href="./pam_openshift/Makefile.html">Makefile</a></li>
        
          <li class="file"><a href="./pam_openshift/README.html">README</a></li>
        
          <li class="file"><a href="./pam_openshift/oo-namespace-init.html">oo-namespace-init</a></li>
        
          <li class="file"><a href="./pam_openshift/oo-namespace-init_txt2man.html">oo-namespace-init.txt2man</a></li>
        
          <li class="file"><a href="./plugins/auth/kerberos/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/auth/kerberos/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/auth/kerberos/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/auth/kerberos/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/auth/kerberos/doc/README.html">README</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/bin/oo-register-user.html">oo-register-user</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/doc/README.html">README</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/test/dummy/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/test/dummy/README.html">README</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/test/dummy/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/test/dummy/doc/README_FOR_APP.html">README_FOR_APP</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/test/dummy/public/robots_txt.html">robots.txt</a></li>
        
          <li class="file"><a href="./plugins/auth/mongo/test/dummy/script/rails.html">rails</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/README-KERB.html">README-KERB</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/README-LDAP.html">README-LDAP</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/doc/README.html">README</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/test/dummy/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/test/dummy/README.html">README</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/test/dummy/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/test/dummy/doc/README_FOR_APP.html">README_FOR_APP</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/test/dummy/public/robots_txt.html">robots.txt</a></li>
        
          <li class="file"><a href="./plugins/auth/remote-user/test/dummy/script/rails.html">rails</a></li>
        
          <li class="file"><a href="./plugins/container/libvirt/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/container/libvirt/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/container/libvirt/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/container/libvirt/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/container/libvirt/misc/gear-init/Makefile.html">Makefile</a></li>
        
          <li class="file"><a href="./plugins/container/selinux/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/container/selinux/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/container/selinux/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/container/selinux/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/dns/avahi/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/dns/avahi/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/dns/avahi/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/dns/avahi/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/dns/bind/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/dns/bind/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/dns/bind/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/dns/bind/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/dns/bind/doc/examples/dhclient-up-hooks.html">dhclient-up-hooks</a></li>
        
          <li class="file"><a href="./plugins/dns/nsupdate/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/dns/nsupdate/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/dns/nsupdate/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/dns/nsupdate/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/dns/route53/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/dns/route53/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/dns/route53/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/dns/route53/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/frontend/apache-mod-rewrite/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/frontend/apache-mod-rewrite/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/frontend/apache-mod-rewrite/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/frontend/apache-mod-rewrite/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/frontend/apache-vhost/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/frontend/apache-vhost/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/frontend/apache-vhost/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/frontend/apache-vhost/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/frontend/apachedb/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/frontend/apachedb/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/frontend/apachedb/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/frontend/apachedb/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/frontend/haproxy-sni-proxy/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/frontend/haproxy-sni-proxy/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/frontend/haproxy-sni-proxy/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/frontend/haproxy-sni-proxy/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/frontend/haproxy-sni-proxy/scripts/oo-rebuild-haproxy-sni-proxy.html">oo-rebuild-haproxy-sni-proxy</a></li>
        
          <li class="file"><a href="./plugins/frontend/haproxy-sni-proxy/scripts/openshift-sni-proxy.html">openshift-sni-proxy</a></li>
        
          <li class="file"><a href="./plugins/frontend/nodejs-websocket/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/frontend/nodejs-websocket/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/frontend/nodejs-websocket/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/frontend/nodejs-websocket/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/msg-broker/mcollective/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/msg-broker/mcollective/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/msg-broker/mcollective/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/msg-broker/mcollective/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./plugins/msg-node/mcollective/facts/openshift-facts.html">openshift-facts</a></li>
        
          <li class="file"><a href="./plugins/routing/activemq/COPYRIGHT.html">COPYRIGHT</a></li>
        
          <li class="file"><a href="./plugins/routing/activemq/Gemfile.html">Gemfile</a></li>
        
          <li class="file"><a href="./plugins/routing/activemq/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./plugins/routing/activemq/README.html">README</a></li>
        
          <li class="file"><a href="./plugins/routing/activemq/Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./port-proxy/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./port-proxy/bin/openshift-port-proxy-cfg.html">openshift-port-proxy-cfg</a></li>
        
          <li class="file"><a href="./port-proxy/init-scripts/openshift-port-proxy.html">openshift-port-proxy</a></li>
        
          <li class="file"><a href="./port-proxy/systemd/openshift-port-proxy.html">openshift-port-proxy</a></li>
        
          <li class="file"><a href="./rel-eng/packages/avahi-cname-manager.html">avahi-cname-manager</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-broker.html">openshift-origin-broker</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-broker-util.html">openshift-origin-broker-util</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-10gen-mms-agent.html">openshift-origin-cartridge-10gen-mms-agent</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-abstract.html">openshift-origin-cartridge-abstract</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-cron.html">openshift-origin-cartridge-cron</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-diy.html">openshift-origin-cartridge-diy</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-haproxy.html">openshift-origin-cartridge-haproxy</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-jbossas.html">openshift-origin-cartridge-jbossas</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-jbosseap.html">openshift-origin-cartridge-jbosseap</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-jbossews.html">openshift-origin-cartridge-jbossews</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-jenkins.html">openshift-origin-cartridge-jenkins</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-jenkins-client.html">openshift-origin-cartridge-jenkins-client</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-mariadb.html">openshift-origin-cartridge-mariadb</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-mock.html">openshift-origin-cartridge-mock</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-mock-plugin.html">openshift-origin-cartridge-mock-plugin</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-mongodb.html">openshift-origin-cartridge-mongodb</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-mysql.html">openshift-origin-cartridge-mysql</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-nodejs.html">openshift-origin-cartridge-nodejs</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-perl.html">openshift-origin-cartridge-perl</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-php.html">openshift-origin-cartridge-php</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-phpmyadmin.html">openshift-origin-cartridge-phpmyadmin</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-postgresql.html">openshift-origin-cartridge-postgresql</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-python.html">openshift-origin-cartridge-python</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-ruby.html">openshift-origin-cartridge-ruby</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-cartridge-switchyard.html">openshift-origin-cartridge-switchyard</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-console.html">openshift-origin-console</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-msg-common.html">openshift-origin-msg-common</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-msg-node-mcollective.html">openshift-origin-msg-node-mcollective</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-node-proxy.html">openshift-origin-node-proxy</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-node-util.html">openshift-origin-node-util</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-port-proxy.html">openshift-origin-port-proxy</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-util.html">openshift-origin-util</a></li>
        
          <li class="file"><a href="./rel-eng/packages/openshift-origin-util-scl.html">openshift-origin-util-scl</a></li>
        
          <li class="file"><a href="./rel-eng/packages/pam_openshift.html">pam_openshift</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-admin-console.html">rubygem-openshift-origin-admin-console</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-auth-kerberos.html">rubygem-openshift-origin-auth-kerberos</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-auth-mongo.html">rubygem-openshift-origin-auth-mongo</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-auth-remote-user.html">rubygem-openshift-origin-auth-remote-user</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-common.html">rubygem-openshift-origin-common</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-console.html">rubygem-openshift-origin-console</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-container-selinux.html">rubygem-openshift-origin-container-selinux</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-controller.html">rubygem-openshift-origin-controller</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-dns-avahi.html">rubygem-openshift-origin-dns-avahi</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-dns-bind.html">rubygem-openshift-origin-dns-bind</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-dns-nsupdate.html">rubygem-openshift-origin-dns-nsupdate</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-dns-route53.html">rubygem-openshift-origin-dns-route53</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-frontend-apache-mod-rewrite.html">rubygem-openshift-origin-frontend-apache-mod-rewrite</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-frontend-apache-vhost.html">rubygem-openshift-origin-frontend-apache-vhost</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-frontend-apachedb.html">rubygem-openshift-origin-frontend-apachedb</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-frontend-haproxy-sni-proxy.html">rubygem-openshift-origin-frontend-haproxy-sni-proxy</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-frontend-nodejs-websocket.html">rubygem-openshift-origin-frontend-nodejs-websocket</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-msg-broker-mcollective.html">rubygem-openshift-origin-msg-broker-mcollective</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-node.html">rubygem-openshift-origin-node</a></li>
        
          <li class="file"><a href="./rel-eng/packages/rubygem-openshift-origin-routing-activemq.html">rubygem-openshift-origin-routing-activemq</a></li>
        
          <li class="file"><a href="./util-scl/oo-erb.html">oo-erb</a></li>
        
          <li class="file"><a href="./util-scl/oo-exec-ruby.html">oo-exec-ruby</a></li>
        
          <li class="file"><a href="./util-scl/oo-mco.html">oo-mco</a></li>
        
          <li class="file"><a href="./util-scl/oo-ruby.html">oo-ruby</a></li>
        
          <li class="file"><a href="./util/oo-erb.html">oo-erb</a></li>
        
          <li class="file"><a href="./util/oo-exec-ruby.html">oo-exec-ruby</a></li>
        
          <li class="file"><a href="./util/oo-mco.html">oo-mco</a></li>
        
          <li class="file"><a href="./util/oo-ruby.html">oo-ruby</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./OpenShift.html">OpenShift</a></li>
        
          <li><a href="./OpenShift/AccessDeniedException.html">OpenShift::AccessDeniedException</a></li>
        
          <li><a href="./OpenShift/ActiveMQPlugin.html">OpenShift::ActiveMQPlugin</a></li>
        
          <li><a href="./OpenShift/ActiveMQRoutingEngine.html">OpenShift::ActiveMQRoutingEngine</a></li>
        
          <li><a href="./OpenShift/ActiveMQRoutingModule.html">OpenShift::ActiveMQRoutingModule</a></li>
        
          <li><a href="./OpenShift/ApacheDBTestCase.html">OpenShift::ApacheDBTestCase</a></li>
        
          <li><a href="./OpenShift/ApacheModRewritePluginTestCase.html">OpenShift::ApacheModRewritePluginTestCase</a></li>
        
          <li><a href="./OpenShift/ApacheVirtualHostsPluginTestCase.html">OpenShift::ApacheVirtualHostsPluginTestCase</a></li>
        
          <li><a href="./OpenShift/ApplicationContainerProxy.html">OpenShift::ApplicationContainerProxy</a></li>
        
          <li><a href="./OpenShift/ApplicationOperationFailed.html">OpenShift::ApplicationOperationFailed</a></li>
        
          <li><a href="./OpenShift/ApplicationStateFunctionalTest.html">OpenShift::ApplicationStateFunctionalTest</a></li>
        
          <li><a href="./OpenShift/ApplicationValidationException.html">OpenShift::ApplicationValidationException</a></li>
        
          <li><a href="./OpenShift/Auth.html">OpenShift::Auth</a></li>
        
          <li><a href="./OpenShift/Auth/BrokerKey.html">OpenShift::Auth::BrokerKey</a></li>
        
          <li><a href="./OpenShift/AuthService.html">OpenShift::AuthService</a></li>
        
          <li><a href="./OpenShift/AuthServiceException.html">OpenShift::AuthServiceException</a></li>
        
          <li><a href="./OpenShift/AvahiDnsEngine.html">OpenShift::AvahiDnsEngine</a></li>
        
          <li><a href="./OpenShift/AvahiDnsModule.html">OpenShift::AvahiDnsModule</a></li>
        
          <li><a href="./OpenShift/AvahiPlugin.html">OpenShift::AvahiPlugin</a></li>
        
          <li><a href="./OpenShift/BashSdkTest.html">OpenShift::BashSdkTest</a></li>
        
          <li><a href="./OpenShift/BillingService.html">OpenShift::BillingService</a></li>
        
          <li><a href="./OpenShift/BindDnsEngine.html">OpenShift::BindDnsEngine</a></li>
        
          <li><a href="./OpenShift/BindDnsModule.html">OpenShift::BindDnsModule</a></li>
        
          <li><a href="./OpenShift/BindPlugin.html">OpenShift::BindPlugin</a></li>
        
          <li><a href="./OpenShift/Cartridge.html">OpenShift::Cartridge</a></li>
        
          <li><a href="./OpenShift/CartridgeRepositoryFunctionalTest.html">OpenShift::CartridgeRepositoryFunctionalTest</a></li>
        
          <li><a href="./OpenShift/CartridgeSdk.html">OpenShift::CartridgeSdk</a></li>
        
          <li><a href="./OpenShift/CloudEngine.html">OpenShift::CloudEngine</a></li>
        
          <li><a href="./OpenShift/Component.html">OpenShift::Component</a></li>
        
          <li><a href="./OpenShift/Config.html">OpenShift::Config</a></li>
        
          <li><a href="./OpenShift/Connection.html">OpenShift::Connection</a></li>
        
          <li><a href="./OpenShift/Connector.html">OpenShift::Connector</a></li>
        
          <li><a href="./OpenShift/Controller.html">OpenShift::Controller</a></li>
        
          <li><a href="./OpenShift/Controller/ActionLog.html">OpenShift::Controller::ActionLog</a></li>
        
          <li><a href="./OpenShift/Controller/ActionLog/ClassMethods.html">OpenShift::Controller::ActionLog::ClassMethods</a></li>
        
          <li><a href="./OpenShift/Controller/ApiBehavior.html">OpenShift::Controller::ApiBehavior</a></li>
        
          <li><a href="./OpenShift/Controller/ApiResponses.html">OpenShift::Controller::ApiResponses</a></li>
        
          <li><a href="./OpenShift/Controller/Authentication.html">OpenShift::Controller::Authentication</a></li>
        
          <li><a href="./OpenShift/Controller/Configuration.html">OpenShift::Controller::Configuration</a></li>
        
          <li><a href="./OpenShift/Controller/OAuth.html">OpenShift::Controller::OAuth</a></li>
        
          <li><a href="./OpenShift/Controller/OAuth/ControllerMethods.html">OpenShift::Controller::OAuth::ControllerMethods</a></li>
        
          <li><a href="./OpenShift/Controller/Routing.html">OpenShift::Controller::Routing</a></li>
        
          <li><a href="./OpenShift/Controller/ScopeAuthorization.html">OpenShift::Controller::ScopeAuthorization</a></li>
        
          <li><a href="./OpenShift/Controller/ScopeAuthorization/ClassMethods.html">OpenShift::Controller::ScopeAuthorization::ClassMethods</a></li>
        
          <li><a href="./OpenShift/DNSAlreadyExistsException.html">OpenShift::DNSAlreadyExistsException</a></li>
        
          <li><a href="./OpenShift/DNSException.html">OpenShift::DNSException</a></li>
        
          <li><a href="./OpenShift/DNSLoginException.html">OpenShift::DNSLoginException</a></li>
        
          <li><a href="./OpenShift/DNSNotFoundException.html">OpenShift::DNSNotFoundException</a></li>
        
          <li><a href="./OpenShift/DataStore.html">OpenShift::DataStore</a></li>
        
          <li><a href="./OpenShift/DistributedLock.html">OpenShift::DistributedLock</a></li>
        
          <li><a href="./OpenShift/DnsService.html">OpenShift::DnsService</a></li>
        
          <li><a href="./OpenShift/ElementError.html">OpenShift::ElementError</a></li>
        
          <li><a href="./OpenShift/Endpoint.html">OpenShift::Endpoint</a></li>
        
          <li><a href="./OpenShift/Endpoint/Mapping.html">OpenShift::Endpoint::Mapping</a></li>
        
          <li><a href="./OpenShift/Formatter.html">OpenShift::Formatter</a></li>
        
          <li><a href="./OpenShift/FrontendHttpPluginTestCase.html">OpenShift::FrontendHttpPluginTestCase</a></li>
        
          <li><a href="./OpenShift/GearDBPluginTestCase.html">OpenShift::GearDBPluginTestCase</a></li>
        
          <li><a href="./OpenShift/GearLimitReachedException.html">OpenShift::GearLimitReachedException</a></li>
        
          <li><a href="./OpenShift/GearsException.html">OpenShift::GearsException</a></li>
        
          <li><a href="./OpenShift/Git.html">OpenShift::Git</a></li>
        
          <li><a href="./OpenShift/HaproxySNIProxyPluginTestCase.html">OpenShift::HaproxySNIProxyPluginTestCase</a></li>
        
          <li><a href="./OpenShift/InvalidElementError.html">OpenShift::InvalidElementError</a></li>
        
          <li><a href="./OpenShift/InvalidNodeException.html">OpenShift::InvalidNodeException</a></li>
        
          <li><a href="./OpenShift/KerberosAuthService.html">OpenShift::KerberosAuthService</a></li>
        
          <li><a href="./OpenShift/KerberosAuthServiceEngine.html">OpenShift::KerberosAuthServiceEngine</a></li>
        
          <li><a href="./OpenShift/KerberosAuthServiceModule.html">OpenShift::KerberosAuthServiceModule</a></li>
        
          <li><a href="./OpenShift/LockUnavailableException.html">OpenShift::LockUnavailableException</a></li>
        
          <li><a href="./OpenShift/MCollectiveApplicationContainerProxy.html">OpenShift::MCollectiveApplicationContainerProxy</a></li>
        
          <li><a href="./OpenShift/ManagedFilesTest.html">OpenShift::ManagedFilesTest</a></li>
        
          <li><a href="./OpenShift/McollectiveMsgBrokerEngine.html">OpenShift::McollectiveMsgBrokerEngine</a></li>
        
          <li><a href="./OpenShift/McollectiveMsgBrokerModule.html">OpenShift::McollectiveMsgBrokerModule</a></li>
        
          <li><a href="./OpenShift/MissingElementError.html">OpenShift::MissingElementError</a></li>
        
          <li><a href="./OpenShift/Model.html">OpenShift::Model</a></li>
        
          <li><a href="./OpenShift/MongoAuthService.html">OpenShift::MongoAuthService</a></li>
        
          <li><a href="./OpenShift/MongoAuthServiceEngine.html">OpenShift::MongoAuthServiceEngine</a></li>
        
          <li><a href="./OpenShift/MongoAuthServiceModule.html">OpenShift::MongoAuthServiceModule</a></li>
        
          <li><a href="./OpenShift/NodeBareTestCase.html">OpenShift::NodeBareTestCase</a></li>
        
          <li><a href="./OpenShift/NodeException.html">OpenShift::NodeException</a></li>
        
          <li><a href="./OpenShift/NodeJsWebsocketPluginTestCase.html">OpenShift::NodeJsWebsocketPluginTestCase</a></li>
        
          <li><a href="./OpenShift/NodeTestCase.html">OpenShift::NodeTestCase</a></li>
        
          <li><a href="./OpenShift/NodeUnavailableException.html">OpenShift::NodeUnavailableException</a></li>
        
          <li><a href="./OpenShift/NsupdateDnsEngine.html">OpenShift::NsupdateDnsEngine</a></li>
        
          <li><a href="./OpenShift/NsupdateDnsModule.html">OpenShift::NsupdateDnsModule</a></li>
        
          <li><a href="./OpenShift/NsupdatePlugin.html">OpenShift::NsupdatePlugin</a></li>
        
          <li><a href="./OpenShift/OOException.html">OpenShift::OOException</a></li>
        
          <li><a href="./OpenShift/OperationForbidden.html">OpenShift::OperationForbidden</a></li>
        
          <li><a href="./OpenShift/Profile.html">OpenShift::Profile</a></li>
        
          <li><a href="./OpenShift/RemoteUserAuthService.html">OpenShift::RemoteUserAuthService</a></li>
        
          <li><a href="./OpenShift/RemoteUserAuthServiceEngine.html">OpenShift::RemoteUserAuthServiceEngine</a></li>
        
          <li><a href="./OpenShift/RemoteUserAuthServiceModule.html">OpenShift::RemoteUserAuthServiceModule</a></li>
        
          <li><a href="./OpenShift/Responder.html">OpenShift::Responder</a></li>
        
          <li><a href="./OpenShift/Route53DnsEngine.html">OpenShift::Route53DnsEngine</a></li>
        
          <li><a href="./OpenShift/Route53DnsModule.html">OpenShift::Route53DnsModule</a></li>
        
          <li><a href="./OpenShift/Route53Plugin.html">OpenShift::Route53Plugin</a></li>
        
          <li><a href="./OpenShift/RoutingService.html">OpenShift::RoutingService</a></li>
        
          <li><a href="./OpenShift/Runtime.html">OpenShift::Runtime</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainer.html">OpenShift::Runtime::ApplicationContainer</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt.html">OpenShift::Runtime::ApplicationContainerExt</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt/CartridgeActions.html">OpenShift::Runtime::ApplicationContainerExt::CartridgeActions</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt/Deployments.html">OpenShift::Runtime::ApplicationContainerExt::Deployments</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt/Environment.html">OpenShift::Runtime::ApplicationContainerExt::Environment</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt/Kerberos.html">OpenShift::Runtime::ApplicationContainerExt::Kerberos</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt/Kerberos/K5login.html">OpenShift::Runtime::ApplicationContainerExt::Kerberos::K5login</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt/SecureShell.html">OpenShift::Runtime::ApplicationContainerExt::SecureShell</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt/SecureShell/AuthorizedKeysFile.html">OpenShift::Runtime::ApplicationContainerExt::SecureShell::AuthorizedKeysFile</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt/Setup.html">OpenShift::Runtime::ApplicationContainerExt::Setup</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationContainerExt/Snapshots.html">OpenShift::Runtime::ApplicationContainerExt::Snapshots</a></li>
        
          <li><a href="./OpenShift/Runtime/ApplicationRepository.html">OpenShift::Runtime::ApplicationRepository</a></li>
        
          <li><a href="./OpenShift/Runtime/CartridgeRepository.html">OpenShift::Runtime::CartridgeRepository</a></li>
        
          <li><a href="./OpenShift/Runtime/Containerization.html">OpenShift::Runtime::Containerization</a></li>
        
          <li><a href="./OpenShift/Runtime/Containerization/Plugin.html">OpenShift::Runtime::Containerization::Plugin</a></li>
        
          <li><a href="./OpenShift/Runtime/DeploymentMetadata.html">OpenShift::Runtime::DeploymentMetadata</a></li>
        
          <li><a href="./OpenShift/Runtime/DeploymentTester.html">OpenShift::Runtime::DeploymentTester</a></li>
        
          <li><a href="./OpenShift/Runtime/FileLockError.html">OpenShift::Runtime::FileLockError</a></li>
        
          <li><a href="./OpenShift/Runtime/FileUnlockError.html">OpenShift::Runtime::FileUnlockError</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend.html">OpenShift::Runtime::Frontend</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http.html">OpenShift::Runtime::Frontend::Http</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins.html">OpenShift::Runtime::Frontend::Http::Plugins</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/ApacheDB.html">OpenShift::Runtime::Frontend::Http::Plugins::ApacheDB</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/ApacheDBAliases.html">OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBAliases</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/ApacheDBIdler.html">OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBIdler</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/ApacheDBJSON.html">OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBJSON</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/ApacheDBNodes.html">OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBNodes</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/ApacheDBSTS.html">OpenShift::Runtime::Frontend::Http::Plugins::ApacheDBSTS</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/ApacheModRewrite.html">OpenShift::Runtime::Frontend::Http::Plugins::ApacheModRewrite</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/ApacheVirtualHosts.html">OpenShift::Runtime::Frontend::Http::Plugins::ApacheVirtualHosts</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/GearDB.html">OpenShift::Runtime::Frontend::Http::Plugins::GearDB</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/GearDBPlugin.html">OpenShift::Runtime::Frontend::Http::Plugins::GearDBPlugin</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/HaproxySNIProxy.html">OpenShift::Runtime::Frontend::Http::Plugins::HaproxySNIProxy</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/HaproxySNIProxyDB.html">OpenShift::Runtime::Frontend::Http::Plugins::HaproxySNIProxyDB</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/NodeJSDB.html">OpenShift::Runtime::Frontend::Http::Plugins::NodeJSDB</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/NodeJSDBRoutes.html">OpenShift::Runtime::Frontend::Http::Plugins::NodeJSDBRoutes</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/NodeJSWebsocket.html">OpenShift::Runtime::Frontend::Http::Plugins::NodeJSWebsocket</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/PluginBaseClass.html">OpenShift::Runtime::Frontend::Http::Plugins::PluginBaseClass</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/PluginException.html">OpenShift::Runtime::Frontend::Http::Plugins::PluginException</a></li>
        
          <li><a href="./OpenShift/Runtime/Frontend/Http/Plugins/PluginExecException.html">OpenShift::Runtime::Frontend::Http::Plugins::PluginExecException</a></li>
        
          <li><a href="./OpenShift/Runtime/FrontendHttpServer.html">OpenShift::Runtime::FrontendHttpServer</a></li>
        
          <li><a href="./OpenShift/Runtime/FrontendHttpServerAliasException.html">OpenShift::Runtime::FrontendHttpServerAliasException</a></li>
        
          <li><a href="./OpenShift/Runtime/FrontendHttpServerException.html">OpenShift::Runtime::FrontendHttpServerException</a></li>
        
          <li><a href="./OpenShift/Runtime/FrontendHttpServerExecException.html">OpenShift::Runtime::FrontendHttpServerExecException</a></li>
        
          <li><a href="./OpenShift/Runtime/FrontendHttpServerNameException.html">OpenShift::Runtime::FrontendHttpServerNameException</a></li>
        
          <li><a href="./OpenShift/Runtime/FrontendProxyServer.html">OpenShift::Runtime::FrontendProxyServer</a></li>
        
          <li><a href="./OpenShift/Runtime/FrontendProxyServerException.html">OpenShift::Runtime::FrontendProxyServerException</a></li>
        
          <li><a href="./OpenShift/Runtime/GearCreationException.html">OpenShift::Runtime::GearCreationException</a></li>
        
          <li><a href="./OpenShift/Runtime/GearRegistry.html">OpenShift::Runtime::GearRegistry</a></li>
        
          <li><a href="./OpenShift/Runtime/GearRegistry/Entry.html">OpenShift::Runtime::GearRegistry::Entry</a></li>
        
          <li><a href="./OpenShift/Runtime/MalformedCartridgeError.html">OpenShift::Runtime::MalformedCartridgeError</a></li>
        
          <li><a href="./OpenShift/Runtime/ManagedFiles.html">OpenShift::Runtime::ManagedFiles</a></li>
        
          <li><a href="./OpenShift/Runtime/Manifest.html">OpenShift::Runtime::Manifest</a></li>
        
          <li><a href="./OpenShift/Runtime/Manifest/Endpoint.html">OpenShift::Runtime::Manifest::Endpoint</a></li>
        
          <li><a href="./OpenShift/Runtime/Manifest/Endpoint/Mapping.html">OpenShift::Runtime::Manifest::Endpoint::Mapping</a></li>
        
          <li><a href="./OpenShift/Runtime/Node.html">OpenShift::Runtime::Node</a></li>
        
          <li><a href="./OpenShift/Runtime/NodeCommandException.html">OpenShift::Runtime::NodeCommandException</a></li>
        
          <li><a href="./OpenShift/Runtime/NodeLogger.html">OpenShift::Runtime::NodeLogger</a></li>
        
          <li><a href="./OpenShift/Runtime/NodeLogger/NullLogger.html">OpenShift::Runtime::NodeLogger::NullLogger</a></li>
        
          <li><a href="./OpenShift/Runtime/NodeLogger/SplitTraceLogger.html">OpenShift::Runtime::NodeLogger::SplitTraceLogger</a></li>
        
          <li><a href="./OpenShift/Runtime/NodeLogger/StderrLogger.html">OpenShift::Runtime::NodeLogger::StderrLogger</a></li>
        
          <li><a href="./OpenShift/Runtime/NodeLogger/StdoutLogger.html">OpenShift::Runtime::NodeLogger::StdoutLogger</a></li>
        
          <li><a href="./OpenShift/Runtime/NodeTestSetQuota.html">OpenShift::Runtime::NodeTestSetQuota</a></li>
        
          <li><a href="./OpenShift/Runtime/PubSubConnector.html">OpenShift::Runtime::PubSubConnector</a></li>
        
          <li><a href="./OpenShift/Runtime/State.html">OpenShift::Runtime::State</a></li>
        
          <li><a href="./OpenShift/Runtime/TrapUser.html">OpenShift::Runtime::TrapUser</a></li>
        
          <li><a href="./OpenShift/Runtime/UpgradeItinerary.html">OpenShift::Runtime::UpgradeItinerary</a></li>
        
          <li><a href="./OpenShift/Runtime/UpgradeTest.html">OpenShift::Runtime::UpgradeTest</a></li>
        
          <li><a href="./OpenShift/Runtime/UpgradeType.html">OpenShift::Runtime::UpgradeType</a></li>
        
          <li><a href="./OpenShift/Runtime/Upgrader.html">OpenShift::Runtime::Upgrader</a></li>
        
          <li><a href="./OpenShift/Runtime/UserCreationException.html">OpenShift::Runtime::UserCreationException</a></li>
        
          <li><a href="./OpenShift/Runtime/UserDeletionException.html">OpenShift::Runtime::UserDeletionException</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils.html">OpenShift::Runtime::Utils</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/ApplicationState.html">OpenShift::Runtime::Utils::ApplicationState</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/Cgroups.html">OpenShift::Runtime::Utils::Cgroups</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/Cgroups/Config.html">OpenShift::Runtime::Utils::Cgroups::Config</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/Cgroups/Libcgroup.html">OpenShift::Runtime::Utils::Cgroups::Libcgroup</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/Cgroups/MonitoredGear.html">OpenShift::Runtime::Utils::Cgroups::MonitoredGear</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/Cgroups/Throttler.html">OpenShift::Runtime::Utils::Cgroups::Throttler</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/Environ.html">OpenShift::Runtime::Utils::Environ</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/Hourglass.html">OpenShift::Runtime::Utils::Hourglass</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/SELinux.html">OpenShift::Runtime::Utils::SELinux</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/Sdk.html">OpenShift::Runtime::Utils::Sdk</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/ShellExecutionException.html">OpenShift::Runtime::Utils::ShellExecutionException</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/TC.html">OpenShift::Runtime::Utils::TC</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/TimeoutExceeded.html">OpenShift::Runtime::Utils::TimeoutExceeded</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/UpgradeApplicationState.html">OpenShift::Runtime::Utils::UpgradeApplicationState</a></li>
        
          <li><a href="./OpenShift/Runtime/Utils/UpgradeProgress.html">OpenShift::Runtime::Utils::UpgradeProgress</a></li>
        
          <li><a href="./OpenShift/Runtime/V2CartridgeModel.html">OpenShift::Runtime::V2CartridgeModel</a></li>
        
          <li><a href="./OpenShift/Runtime/V2UpgradeCartridgeModel.html">OpenShift::Runtime::V2UpgradeCartridgeModel</a></li>
        
          <li><a href="./OpenShift/ScaleConflictException.html">OpenShift::ScaleConflictException</a></li>
        
          <li><a href="./OpenShift/Scaling.html">OpenShift::Scaling</a></li>
        
          <li><a href="./OpenShift/SdkTest.html">OpenShift::SdkTest</a></li>
        
          <li><a href="./OpenShift/TestAccount.html">OpenShift::TestAccount</a></li>
        
          <li><a href="./OpenShift/TestApplication.html">OpenShift::TestApplication</a></li>
        
          <li><a href="./OpenShift/TestCartridge.html">OpenShift::TestCartridge</a></li>
        
          <li><a href="./OpenShift/TestCartridgeListeners.html">OpenShift::TestCartridgeListeners</a></li>
        
          <li><a href="./OpenShift/TestCartridgeListeners/ConfigureCartListener.html">OpenShift::TestCartridgeListeners::ConfigureCartListener</a></li>
        
          <li><a href="./OpenShift/TestCartridgeListeners/DatabaseCartListener.html">OpenShift::TestCartridgeListeners::DatabaseCartListener</a></li>
        
          <li><a href="./OpenShift/TestCartridgeListeners/DatabaseCartListener/DbConnection.html">OpenShift::TestCartridgeListeners::DatabaseCartListener::DbConnection</a></li>
        
          <li><a href="./OpenShift/TestGear.html">OpenShift::TestGear</a></li>
        
          <li><a href="./OpenShift/TrapUserFunctionalTest.html">OpenShift::TrapUserFunctionalTest</a></li>
        
          <li><a href="./OpenShift/UnfulfilledRequirementException.html">OpenShift::UnfulfilledRequirementException</a></li>
        
          <li><a href="./OpenShift/UsageAuditLog.html">OpenShift::UsageAuditLog</a></li>
        
          <li><a href="./OpenShift/UserActionLog.html">OpenShift::UserActionLog</a></li>
        
          <li><a href="./OpenShift/UserException.html">OpenShift::UserException</a></li>
        
          <li><a href="./OpenShift/UserValidationException.html">OpenShift::UserValidationException</a></li>
        
          <li><a href="./OpenShift/UtilsSpawnFunctionalTest.html">OpenShift::UtilsSpawnFunctionalTest</a></li>
        
          <li><a href="./OpenShift/V2CartModelTest.html">OpenShift::V2CartModelTest</a></li>
        
          <li><a href="./OpenShift/V2CartridgeModelFunctionalTest.html">OpenShift::V2CartridgeModelFunctionalTest</a></li>
        
          <li><a href="./Admin.html">Admin</a></li>
        
          <li><a href="./Admin/Stats.html">Admin::Stats</a></li>
        
          <li><a href="./Admin/Stats/DbSummary.html">Admin::Stats::DbSummary</a></li>
        
          <li><a href="./Admin/Stats/DistrictEntry.html">Admin::Stats::DistrictEntry</a></li>
        
          <li><a href="./Admin/Stats/DistrictSummary.html">Admin::Stats::DistrictSummary</a></li>
        
          <li><a href="./Admin/Stats/HashWithReaders.html">Admin::Stats::HashWithReaders</a></li>
        
          <li><a href="./Admin/Stats/HashWithReaders/CleanResults.html">Admin::Stats::HashWithReaders::CleanResults</a></li>
        
          <li><a href="./Admin/Stats/HashWithReaders/NoSuchKey.html">Admin::Stats::HashWithReaders::NoSuchKey</a></li>
        
          <li><a href="./Admin/Stats/Maker.html">Admin::Stats::Maker</a></li>
        
          <li><a href="./Admin/Stats/NodeEntry.html">Admin::Stats::NodeEntry</a></li>
        
          <li><a href="./Admin/Stats/ProfileSummary.html">Admin::Stats::ProfileSummary</a></li>
        
          <li><a href="./Admin/Stats/Results.html">Admin::Stats::Results</a></li>
        
          <li><a href="./Admin/Suggestion.html">Admin::Suggestion</a></li>
        
          <li><a href="./Admin/Suggestion/Advisor.html">Admin::Suggestion::Advisor</a></li>
        
          <li><a href="./Admin/Suggestion/Advisor/Capacity.html">Admin::Suggestion::Advisor::Capacity</a></li>
        
          <li><a href="./Admin/Suggestion/Advisor/Capacity/Add.html">Admin::Suggestion::Advisor::Capacity::Add</a></li>
        
          <li><a href="./Admin/Suggestion/Advisor/Capacity/Remove.html">Admin::Suggestion::Advisor::Capacity::Remove</a></li>
        
          <li><a href="./Admin/Suggestion/Advisor/Capacity/Util.html">Admin::Suggestion::Advisor::Capacity::Util</a></li>
        
          <li><a href="./Admin/Suggestion/Advisor/MissingNodes.html">Admin::Suggestion::Advisor::MissingNodes</a></li>
        
          <li><a href="./Admin/Suggestion/Base.html">Admin::Suggestion::Base</a></li>
        
          <li><a href="./Admin/Suggestion/Capacity.html">Admin::Suggestion::Capacity</a></li>
        
          <li><a href="./Admin/Suggestion/Capacity/Add.html">Admin::Suggestion::Capacity::Add</a></li>
        
          <li><a href="./Admin/Suggestion/Capacity/Add/District.html">Admin::Suggestion::Capacity::Add::District</a></li>
        
          <li><a href="./Admin/Suggestion/Capacity/Add/Node.html">Admin::Suggestion::Capacity::Add::Node</a></li>
        
          <li><a href="./Admin/Suggestion/Capacity/Remove.html">Admin::Suggestion::Capacity::Remove</a></li>
        
          <li><a href="./Admin/Suggestion/Capacity/Remove/CompactDistrict.html">Admin::Suggestion::Capacity::Remove::CompactDistrict</a></li>
        
          <li><a href="./Admin/Suggestion/Capacity/Remove/Node.html">Admin::Suggestion::Capacity::Remove::Node</a></li>
        
          <li><a href="./Admin/Suggestion/Config.html">Admin::Suggestion::Config</a></li>
        
          <li><a href="./Admin/Suggestion/Config/FixGearDown.html">Admin::Suggestion::Config::FixGearDown</a></li>
        
          <li><a href="./Admin/Suggestion/Config/FixVal.html">Admin::Suggestion::Config::FixVal</a></li>
        
          <li><a href="./Admin/Suggestion/Config/SupplyValue.html">Admin::Suggestion::Config::SupplyValue</a></li>
        
          <li><a href="./Admin/Suggestion/Container.html">Admin::Suggestion::Container</a></li>
        
          <li><a href="./Admin/Suggestion/Error.html">Admin::Suggestion::Error</a></li>
        
          <li><a href="./Admin/Suggestion/Logger.html">Admin::Suggestion::Logger</a></li>
        
          <li><a href="./Admin/Suggestion/MissingNodes.html">Admin::Suggestion::MissingNodes</a></li>
        
          <li><a href="./Admin/Suggestion/Params.html">Admin::Suggestion::Params</a></li>
        
          <li><a href="./Admin/Suggestion/Types.html">Admin::Suggestion::Types</a></li>
        
          <li><a href="./AdminConsole.html">AdminConsole</a></li>
        
          <li><a href="./AdminConsole/ApplicationController.html">AdminConsole::ApplicationController</a></li>
        
          <li><a href="./AdminConsole/ApplicationHelper.html">AdminConsole::ApplicationHelper</a></li>
        
          <li><a href="./AdminConsole/ApplicationStats.html">AdminConsole::ApplicationStats</a></li>
        
          <li><a href="./AdminConsole/ApplicationsController.html">AdminConsole::ApplicationsController</a></li>
        
          <li><a href="./AdminConsole/ApplicationsControllerTest.html">AdminConsole::ApplicationsControllerTest</a></li>
        
          <li><a href="./AdminConsole/CapacityPlanningHelper.html">AdminConsole::CapacityPlanningHelper</a></li>
        
          <li><a href="./AdminConsole/CloudUserStats.html">AdminConsole::CloudUserStats</a></li>
        
          <li><a href="./AdminConsole/DomainStats.html">AdminConsole::DomainStats</a></li>
        
          <li><a href="./AdminConsole/Engine.html">AdminConsole::Engine</a></li>
        
          <li><a href="./AdminConsole/GearsController.html">AdminConsole::GearsController</a></li>
        
          <li><a href="./AdminConsole/GearsControllerTest.html">AdminConsole::GearsControllerTest</a></li>
        
          <li><a href="./AdminConsole/HomeHelperTest.html">AdminConsole::HomeHelperTest</a></li>
        
          <li><a href="./AdminConsole/Html5BoilerplateHelper.html">AdminConsole::Html5BoilerplateHelper</a></li>
        
          <li><a href="./AdminConsole/IndexController.html">AdminConsole::IndexController</a></li>
        
          <li><a href="./AdminConsole/IndexControllerTest.html">AdminConsole::IndexControllerTest</a></li>
        
          <li><a href="./AdminConsole/LayoutHelper.html">AdminConsole::LayoutHelper</a></li>
        
          <li><a href="./AdminConsole/NodesController.html">AdminConsole::NodesController</a></li>
        
          <li><a href="./AdminConsole/ProfilesController.html">AdminConsole::ProfilesController</a></li>
        
          <li><a href="./AdminConsole/ProfilesControllerTest.html">AdminConsole::ProfilesControllerTest</a></li>
        
          <li><a href="./AdminConsole/Rescue.html">AdminConsole::Rescue</a></li>
        
          <li><a href="./AdminConsole/SearchController.html">AdminConsole::SearchController</a></li>
        
          <li><a href="./AdminConsole/StatisticGenerator.html">AdminConsole::StatisticGenerator</a></li>
        
          <li><a href="./AdminConsole/StatisticGenerator/ClassMethods.html">AdminConsole::StatisticGenerator::ClassMethods</a></li>
        
          <li><a href="./AdminConsole/Stats.html">AdminConsole::Stats</a></li>
        
          <li><a href="./AdminConsole/StatsController.html">AdminConsole::StatsController</a></li>
        
          <li><a href="./AdminConsole/SuggestionHelper.html">AdminConsole::SuggestionHelper</a></li>
        
          <li><a href="./AdminConsole/SuggestionsController.html">AdminConsole::SuggestionsController</a></li>
        
          <li><a href="./AdminConsole/SuggestionsControllerTest.html">AdminConsole::SuggestionsControllerTest</a></li>
        
          <li><a href="./AdminConsole/UsersController.html">AdminConsole::UsersController</a></li>
        
          <li><a href="./AdminConsole/UsersControllerTest.html">AdminConsole::UsersControllerTest</a></li>
        
          <li><a href="./AdminConsole/VERSION.html">AdminConsole::VERSION</a></li>
        
          <li><a href="./AdminConsole/WebFlowsTest.html">AdminConsole::WebFlowsTest</a></li>
        
          <li><a href="./Console.html">Console</a></li>
        
          <li><a href="./Console/AccessDenied.html">Console::AccessDenied</a></li>
        
          <li><a href="./Console/ApiNotAvailable.html">Console::ApiNotAvailable</a></li>
        
          <li><a href="./Console/Auth.html">Console::Auth</a></li>
        
          <li><a href="./Console/Auth/Basic.html">Console::Auth::Basic</a></li>
        
          <li><a href="./Console/Auth/Basic/BasicUser.html">Console::Auth::Basic::BasicUser</a></li>
        
          <li><a href="./Console/Auth/None.html">Console::Auth::None</a></li>
        
          <li><a href="./Console/Auth/RemoteUser.html">Console::Auth::RemoteUser</a></li>
        
          <li><a href="./Console/Auth/RemoteUser/RemoteUser.html">Console::Auth::RemoteUser::RemoteUser</a></li>
        
          <li><a href="./Console/BrokerHelper.html">Console::BrokerHelper</a></li>
        
          <li><a href="./Console/CommunityAware.html">Console::CommunityAware</a></li>
        
          <li><a href="./Console/CommunityHelper.html">Console::CommunityHelper</a></li>
        
          <li><a href="./Console/ConfigFile.html">Console::ConfigFile</a></li>
        
          <li><a href="./Console/ConsoleHelper.html">Console::ConsoleHelper</a></li>
        
          <li><a href="./Console/CostHelper.html">Console::CostHelper</a></li>
        
          <li><a href="./Console/DateHelper.html">Console::DateHelper</a></li>
        
          <li><a href="./Console/Engine.html">Console::Engine</a></li>
        
          <li><a href="./Console/Formtastic.html">Console::Formtastic</a></li>
        
          <li><a href="./Console/Formtastic/BootstrapFormBuilder.html">Console::Formtastic::BootstrapFormBuilder</a></li>
        
          <li><a href="./Console/HelpHelper.html">Console::HelpHelper</a></li>
        
          <li><a href="./Console/Html5BoilerplateHelper.html">Console::Html5BoilerplateHelper</a></li>
        
          <li><a href="./Console/InvalidConfiguration.html">Console::InvalidConfiguration</a></li>
        
          <li><a href="./Console/LayoutHelper.html">Console::LayoutHelper</a></li>
        
          <li><a href="./Console/LogHelper.html">Console::LogHelper</a></li>
        
          <li><a href="./Console/ModelHelper.html">Console::ModelHelper</a></li>
        
          <li><a href="./Console/ModelHelperTest.html">Console::ModelHelperTest</a></li>
        
          <li><a href="./Console/Rescue.html">Console::Rescue</a></li>
        
          <li><a href="./Console/SecuredHelper.html">Console::SecuredHelper</a></li>
        
          <li><a href="./Console/VERSION.html">Console::VERSION</a></li>
        
          <li><a href="./RestApi.html">RestApi</a></li>
        
          <li><a href="./RestApi/ApiNotAvailable.html">RestApi::ApiNotAvailable</a></li>
        
          <li><a href="./RestApi/BadServerResponseError.html">RestApi::BadServerResponseError</a></li>
        
          <li><a href="./RestApi/Base.html">RestApi::Base</a></li>
        
          <li><a href="./RestApi/Base/AttributeHash.html">RestApi::Base::AttributeHash</a></li>
        
          <li><a href="./RestApi/Base/HashWithSimpleIndifferentAccess.html">RestApi::Base::HashWithSimpleIndifferentAccess</a></li>
        
          <li><a href="./RestApi/Base/IndifferentAccess.html">RestApi::Base::IndifferentAccess</a></li>
        
          <li><a href="./RestApi/Base/Message.html">RestApi::Base::Message</a></li>
        
          <li><a href="./RestApi/Cacheable.html">RestApi::Cacheable</a></li>
        
          <li><a href="./RestApi/Cacheable/ClassMethods.html">RestApi::Cacheable::ClassMethods</a></li>
        
          <li><a href="./RestApi/Credentials.html">RestApi::Credentials</a></li>
        
          <li><a href="./RestApi/Environment.html">RestApi::Environment</a></li>
        
          <li><a href="./RestApi/Info.html">RestApi::Info</a></li>
        
          <li><a href="./RestApi/LogSubscriber.html">RestApi::LogSubscriber</a></li>
        
          <li><a href="./RestApi/MissingAuthorizationError.html">RestApi::MissingAuthorizationError</a></li>
        
          <li><a href="./RestApi/Oauth.html">RestApi::Oauth</a></li>
        
          <li><a href="./RestApi/Oauth/ClassMethods.html">RestApi::Oauth::ClassMethods</a></li>
        
          <li><a href="./RestApi/OpenshiftJsonFormat.html">RestApi::OpenshiftJsonFormat</a></li>
        
          <li><a href="./RestApi/Railties.html">RestApi::Railties</a></li>
        
          <li><a href="./RestApi/Railties/ControllerRuntime.html">RestApi::Railties::ControllerRuntime</a></li>
        
          <li><a href="./RestApi/Railties/ControllerRuntime/ClassMethods.html">RestApi::Railties::ControllerRuntime::ClassMethods</a></li>
        
          <li><a href="./RestApi/ResourceExistsError.html">RestApi::ResourceExistsError</a></li>
        
          <li><a href="./RestApi/ResourceNotFound.html">RestApi::ResourceNotFound</a></li>
        
          <li><a href="./RestApi/ServerError.html">RestApi::ServerError</a></li>
        
          <li><a href="./RestApi/ServerUnavailable.html">RestApi::ServerUnavailable</a></li>
        
          <li><a href="./RestApi/UserAwareConnection.html">RestApi::UserAwareConnection</a></li>
        
          <li><a href="./ActiveResource.html">ActiveResource</a></li>
        
          <li><a href="./ActiveResource/Associations.html">ActiveResource::Associations</a></li>
        
          <li><a href="./ActiveResource/Associations/Builder.html">ActiveResource::Associations::Builder</a></li>
        
          <li><a href="./ActiveResource/Associations/Builder/BelongsTo.html">ActiveResource::Associations::Builder::BelongsTo</a></li>
        
          <li><a href="./ActiveResource/Associations/Builder/HasMany.html">ActiveResource::Associations::Builder::HasMany</a></li>
        
          <li><a href="./ActiveResource/Associations/Builder/HasOne.html">ActiveResource::Associations::Builder::HasOne</a></li>
        
          <li><a href="./ActiveResource/Base.html">ActiveResource::Base</a></li>
        
          <li><a href="./ActiveResource/Connection.html">ActiveResource::Connection</a></li>
        
          <li><a href="./ActiveResource/HttpMock.html">ActiveResource::HttpMock</a></li>
        
          <li><a href="./ActiveResource/HttpMock/Responder.html">ActiveResource::HttpMock::Responder</a></li>
        
          <li><a href="./ActiveResource/PersistentConnection.html">ActiveResource::PersistentConnection</a></li>
        
          <li><a href="./ActiveResource/PersistentConnection/ServerRefusedConnection.html">ActiveResource::PersistentConnection::ServerRefusedConnection</a></li>
        
          <li><a href="./ActiveResource/Reflection.html">ActiveResource::Reflection</a></li>
        
          <li><a href="./ActiveResource/Reflection/AssociationReflection.html">ActiveResource::Reflection::AssociationReflection</a></li>
        
          <li><a href="./ActiveResource/Reflection/ClassMethods.html">ActiveResource::Reflection::ClassMethods</a></li>
        
          <li><a href="./ActiveResource/ResetConnectionError.html">ActiveResource::ResetConnectionError</a></li>
        
          <li><a href="./ActionDispatch.html">ActionDispatch</a></li>
        
          <li><a href="./ActionDispatch/Integration.html">ActionDispatch::Integration</a></li>
        
          <li><a href="./ActionDispatch/Integration/Session.html">ActionDispatch::Integration::Session</a></li>
        
          <li><a href="./ActionDispatch/IntegrationTest.html">ActionDispatch::IntegrationTest</a></li>
        
          <li><a href="./ActionDispatch/Request.html">ActionDispatch::Request</a></li>
        
          <li><a href="./ActionDispatch/Response.html">ActionDispatch::Response</a></li>
        
          <li><a href="./ActionDispatch/Routing.html">ActionDispatch::Routing</a></li>
        
          <li><a href="./ActionDispatch/Routing/Mapper.html">ActionDispatch::Routing::Mapper</a></li>
        
          <li><a href="./ActionDispatch/Routing/Mapper/ApplicationRedirector.html">ActionDispatch::Routing::Mapper::ApplicationRedirector</a></li>
        
          <li><a href="./ActionDispatch/Routing/Mapper/Mapping.html">ActionDispatch::Routing::Mapper::Mapping</a></li>
        
          <li><a href="./ActionDispatch/Routing/Mapper/Resources.html">ActionDispatch::Routing::Mapper::Resources</a></li>
        
          <li><a href="./ActionDispatch/Routing/Mapper/Resources/Resource.html">ActionDispatch::Routing::Mapper::Resources::Resource</a></li>
        
          <li><a href="./ActionDispatch/Routing/Mapper/Scoping.html">ActionDispatch::Routing::Mapper::Scoping</a></li>
        
          <li><a href="./ActionDispatch/Session.html">ActionDispatch::Session</a></li>
        
          <li><a href="./ActionDispatch/Session/CookieStore.html">ActionDispatch::Session::CookieStore</a></li>
        
          <li><a href="./RestApiTest.html">RestApiTest</a></li>
        
          <li><a href="./RestApiTest/AnonymousApi.html">RestApiTest::AnonymousApi</a></li>
        
          <li><a href="./RestApiTest/CacheableRestApi.html">RestApiTest::CacheableRestApi</a></li>
        
          <li><a href="./RestApiTest/Calculated.html">RestApiTest::Calculated</a></li>
        
          <li><a href="./RestApiTest/DomainWithValidation.html">RestApiTest::DomainWithValidation</a></li>
        
          <li><a href="./RestApiTest/ExitCode.html">RestApiTest::ExitCode</a></li>
        
          <li><a href="./RestApiTest/InheritedCacheableRestApi.html">RestApiTest::InheritedCacheableRestApi</a></li>
        
          <li><a href="./RestApiTest/Observed.html">RestApiTest::Observed</a></li>
        
          <li><a href="./RestApiTest/Observer.html">RestApiTest::Observer</a></li>
        
          <li><a href="./RestApiTest/ProtectedApi.html">RestApiTest::ProtectedApi</a></li>
        
          <li><a href="./RestApiTest/ReflectedTest.html">RestApiTest::ReflectedTest</a></li>
        
          <li><a href="./RestApiTest/TestExitCodeException.html">RestApiTest::TestExitCodeException</a></li>
        
          <li><a href="./Scope.html">Scope</a></li>
        
          <li><a href="./Scope/Application.html">Scope::Application</a></li>
        
          <li><a href="./Scope/Base.html">Scope::Base</a></li>
        
          <li><a href="./Scope/Domain.html">Scope::Domain</a></li>
        
          <li><a href="./Scope/DomainBuilder.html">Scope::DomainBuilder</a></li>
        
          <li><a href="./Scope/Parameterized.html">Scope::Parameterized</a></li>
        
          <li><a href="./Scope/Read.html">Scope::Read</a></li>
        
          <li><a href="./Scope/Scopes.html">Scope::Scopes</a></li>
        
          <li><a href="./Scope/Session.html">Scope::Session</a></li>
        
          <li><a href="./Scope/Simple.html">Scope::Simple</a></li>
        
          <li><a href="./Scope/Userinfo.html">Scope::Userinfo</a></li>
        
          <li><a href="./ActiveSupport.html">ActiveSupport</a></li>
        
          <li><a href="./ActiveSupport/BufferedLogger.html">ActiveSupport::BufferedLogger</a></li>
        
          <li><a href="./ActiveSupport/Inflector.html">ActiveSupport::Inflector</a></li>
        
          <li><a href="./ActiveSupport/MessageVerifier.html">ActiveSupport::MessageVerifier</a></li>
        
          <li><a href="./ActiveSupport/MessageVerifier/InvalidSignature.html">ActiveSupport::MessageVerifier::InvalidSignature</a></li>
        
          <li><a href="./ActiveSupport/TestCase.html">ActiveSupport::TestCase</a></li>
        
          <li><a href="./AsyncAwareTest.html">AsyncAwareTest</a></li>
        
          <li><a href="./AsyncAwareTest/A.html">AsyncAwareTest::A</a></li>
        
          <li><a href="./AsyncAwareTest/B.html">AsyncAwareTest::B</a></li>
        
          <li><a href="./AsyncAwareTest/C.html">AsyncAwareTest::C</a></li>
        
          <li><a href="./AdminSuggestionTest.html">AdminSuggestionTest</a></li>
        
          <li><a href="./AdminSuggestionTest/BreakMe.html">AdminSuggestionTest::BreakMe</a></li>
        
          <li><a href="./Admin/Suggestion.html">AdminSuggestionTest::S</a></li>
        
          <li><a href="./AuthenticationTest.html">AuthenticationTest</a></li>
        
          <li><a href="./AuthenticationTest/LegacyAuthService.html">AuthenticationTest::LegacyAuthService</a></li>
        
          <li><a href="./AuthenticationTest/SimpleAuthService.html">AuthenticationTest::SimpleAuthService</a></li>
        
          <li><a href="./Capabilities.html">Capabilities</a></li>
        
          <li><a href="./Capabilities/Cacheable.html">Capabilities::Cacheable</a></li>
        
          <li><a href="./Capabilities/Helpers.html">Capabilities::Helpers</a></li>
        
          <li><a href="./Cartridge.html">Cartridge</a></li>
        
          <li><a href="./Cartridge/BuildRelation.html">Cartridge::BuildRelation</a></li>
        
          <li><a href="./Cartridge/ScaleRelation.html">Cartridge::ScaleRelation</a></li>
        
          <li><a href="./MCollective.html">MCollective</a></li>
        
          <li><a href="./MCollective/Agent.html">MCollective::Agent</a></li>
        
          <li><a href="./MCollective/Agent/Openshift.html">MCollective::Agent::Openshift</a></li>
        
          <li><a href="./Mongoid.html">Mongoid</a></li>
        
          <li><a href="./Mongoid/Errors.html">Mongoid::Errors</a></li>
        
          <li><a href="./Mongoid/Errors/DocumentNotFound.html">Mongoid::Errors::DocumentNotFound</a></li>
        
          <li><a href="./Rails.html">Rails</a></li>
        
          <li><a href="./Rails/Application.html">Rails::Application</a></li>
        
          <li><a href="./Rails/Application/Configuration.html">Rails::Application::Configuration</a></li>
        
          <li><a href="./AccessControllable.html">AccessControllable</a></li>
        
          <li><a href="./AccessControllable/ClassMethods.html">AccessControllable::ClassMethods</a></li>
        
          <li><a href="./AccessControlled.html">AccessControlled</a></li>
        
          <li><a href="./AccessControlled/ClassMethods.html">AccessControlled::ClassMethods</a></li>
        
          <li><a href="./ActionController.html">ActionController</a></li>
        
          <li><a href="./ActionController/TestCase.html">ActionController::TestCase</a></li>
        
          <li><a href="./ActiveModel.html">ActiveModel</a></li>
        
          <li><a href="./ActiveModel/Errors.html">ActiveModel::Errors</a></li>
        
          <li><a href="./AppHelper.html">AppHelper</a></li>
        
          <li><a href="./AppHelper/TestApp.html">AppHelper::TestApp</a></li>
        
          <li><a href="./Application.html">Application</a></li>
        
          <li><a href="./Application/Member.html">Application::Member</a></li>
        
          <li><a href="./ApplicationType.html">ApplicationType</a></li>
        
          <li><a href="./ApplicationType/NotFound.html">ApplicationType::NotFound</a></li>
        
          <li><a href="./AsyncAware.html">AsyncAware</a></li>
        
          <li><a href="./AsyncAware/ThreadTimedOut.html">AsyncAware::ThreadTimedOut</a></li>
        
          <li><a href="./Broker.html">Broker</a></li>
        
          <li><a href="./Broker/Application.html">Broker::Application</a></li>
        
          <li><a href="./CartridgeType.html">CartridgeType</a></li>
        
          <li><a href="./CartridgeType/Property.html">CartridgeType::Property</a></li>
        
          <li><a href="./CloudUser.html">CloudUser</a></li>
        
          <li><a href="./CloudUser/CapabilityProxy.html">CloudUser::CapabilityProxy</a></li>
        
          <li><a href="./ConsoleAuthBasicControllerTest.html">ConsoleAuthBasicControllerTest</a></li>
        
          <li><a href="./ConsoleAuthBasicControllerTest/ConsoleAuthBasicController.html">ConsoleAuthBasicControllerTest::ConsoleAuthBasicController</a></li>
        
          <li><a href="./ConsoleAuthRemoteUserControllerTest.html">ConsoleAuthRemoteUserControllerTest</a></li>
        
          <li><a href="./ConsoleAuthRemoteUserControllerTest/ConsoleAuthRemoteUserController.html">ConsoleAuthRemoteUserControllerTest::ConsoleAuthRemoteUserController</a></li>
        
          <li><a href="./Domain.html">Domain</a></li>
        
          <li><a href="./Domain/Member.html">Domain::Member</a></li>
        
          <li><a href="./Dummy.html">Dummy</a></li>
        
          <li><a href="./Dummy/Application.html">Dummy::Application</a></li>
        
          <li><a href="./Fixtures.html">Fixtures</a></li>
        
          <li><a href="./Fixtures/Applications.html">Fixtures::Applications</a></li>
        
          <li><a href="./Haproxy.html">Haproxy</a></li>
        
          <li><a href="./Haproxy/ShouldRetry.html">Haproxy::ShouldRetry</a></li>
        
          <li><a href="./Key.html">Key</a></li>
        
          <li><a href="./Key/DuplicateName.html">Key::DuplicateName</a></li>
        
          <li><a href="./Membership.html">Membership</a></li>
        
          <li><a href="./Membership/ClassMethods.html">Membership::ClassMethods</a></li>
        
          <li><a href="./Mime.html">Mime</a></li>
        
          <li><a href="./Mime/Type.html">Mime::Type</a></li>
        
          <li><a href="./Net.html">Net</a></li>
        
          <li><a href="./Net/HTTP.html">Net::HTTP</a></li>
        
          <li><a href="./OpenshiftConsole.html">OpenshiftConsole</a></li>
        
          <li><a href="./OpenshiftConsole/Application.html">OpenshiftConsole::Application</a></li>
        
          <li><a href="./RailsApp.html">RailsApp</a></li>
        
          <li><a href="./RailsApp/Application.html">RailsApp::Application</a></li>
        
          <li><a href="./Test.html">Test</a></li>
        
          <li><a href="./Test/WebUser.html">Test::WebUser</a></li>
        
          <li><a href="./Ability.html">Ability</a></li>
        
          <li><a href="./AccessControlledTest.html">AccessControlledTest</a></li>
        
          <li><a href="./AccountController.html">AccountController</a></li>
        
          <li><a href="./AccountControllerTest.html">AccountControllerTest</a></li>
        
          <li><a href="./ActivateOp.html">ActivateOp</a></li>
        
          <li><a href="./ActivateOpGroup.html">ActivateOpGroup</a></li>
        
          <li><a href="./ActiveModelComplianceTest.html">ActiveModelComplianceTest</a></li>
        
          <li><a href="./AddAliasOp.html">AddAliasOp</a></li>
        
          <li><a href="./AddAliasOpGroup.html">AddAliasOpGroup</a></li>
        
          <li><a href="./AddBrokerAuthKeyOp.html">AddBrokerAuthKeyOp</a></li>
        
          <li><a href="./AddBrokerAuthKeyOpGroup.html">AddBrokerAuthKeyOpGroup</a></li>
        
          <li><a href="./AddCompOp.html">AddCompOp</a></li>
        
          <li><a href="./AddEnvVarsDomainOp.html">AddEnvVarsDomainOp</a></li>
        
          <li><a href="./AddFeaturesOpGroup.html">AddFeaturesOpGroup</a></li>
        
          <li><a href="./AddSshKeysUserOp.html">AddSshKeysUserOp</a></li>
        
          <li><a href="./AddSslCertOp.html">AddSslCertOp</a></li>
        
          <li><a href="./AddSslCertOpGroup.html">AddSslCertOpGroup</a></li>
        
          <li><a href="./AddSystemSshKeysDomainOp.html">AddSystemSshKeysDomainOp</a></li>
        
          <li><a href="./AdminConsoleTest.html">AdminConsoleTest</a></li>
        
          <li><a href="./AdminHelper.html">AdminHelper</a></li>
        
          <li><a href="./AdminStatsDbTest.html">AdminStatsDbTest</a></li>
        
          <li><a href="./AdminStatsTest.html">AdminStatsTest</a></li>
        
          <li><a href="./Alias.html">Alias</a></li>
        
          <li><a href="./AliasController.html">AliasController</a></li>
        
          <li><a href="./AliasControllerTest.html">AliasControllerTest</a></li>
        
          <li><a href="./AliasTest.html">AliasTest</a></li>
        
          <li><a href="./AliasesController.html">AliasesController</a></li>
        
          <li><a href="./AliasesControllerTest.html">AliasesControllerTest</a></li>
        
          <li><a href="./ApiController.html">ApiController</a></li>
        
          <li><a href="./ApiControllerTest.html">ApiControllerTest</a></li>
        
          <li><a href="./AppCartridgeEventsTest.html">AppCartridgeEventsTest</a></li>
        
          <li><a href="./AppCartridgesTest.html">AppCartridgesTest</a></li>
        
          <li><a href="./AppEventsController.html">AppEventsController</a></li>
        
          <li><a href="./AppEventsControllerTest.html">AppEventsControllerTest</a></li>
        
          <li><a href="./AppEventsTest.html">AppEventsTest</a></li>
        
          <li><a href="./AppInfo.html">AppInfo</a></li>
        
          <li><a href="./AppQuery.html">AppQuery</a></li>
        
          <li><a href="./ApplicationAssociations.html">ApplicationAssociations</a></li>
        
          <li><a href="./ApplicationConfigValidator.html">ApplicationConfigValidator</a></li>
        
          <li><a href="./ApplicationContainerFuncTest.html">ApplicationContainerFuncTest</a></li>
        
          <li><a href="./ApplicationContainerTest.html">ApplicationContainerTest</a></li>
        
          <li><a href="./ApplicationController.html">ApplicationController</a></li>
        
          <li><a href="./ApplicationControllerTest.html">ApplicationControllerTest</a></li>
        
          <li><a href="./ApplicationHelper.html">ApplicationHelper</a></li>
        
          <li><a href="./ApplicationMembersController.html">ApplicationMembersController</a></li>
        
          <li><a href="./ApplicationMetadataValidator.html">ApplicationMetadataValidator</a></li>
        
          <li><a href="./ApplicationRepositoryFuncTest.html">ApplicationRepositoryFuncTest</a></li>
        
          <li><a href="./ApplicationSshKey.html">ApplicationSshKey</a></li>
        
          <li><a href="./ApplicationStateTest.html">ApplicationStateTest</a></li>
        
          <li><a href="./ApplicationTest.html">ApplicationTest</a></li>
        
          <li><a href="./ApplicationTypesController.html">ApplicationTypesController</a></li>
        
          <li><a href="./ApplicationTypesControllerTest.html">ApplicationTypesControllerTest</a></li>
        
          <li><a href="./ApplicationsController.html">ApplicationsController</a></li>
        
          <li><a href="./ApplicationsControllerSanityTest.html">ApplicationsControllerSanityTest</a></li>
        
          <li><a href="./ApplicationsControllerTest.html">ApplicationsControllerTest</a></li>
        
          <li><a href="./ApplicationsFilter.html">ApplicationsFilter</a></li>
        
          <li><a href="./ApplicationsTest.html">ApplicationsTest</a></li>
        
          <li><a href="./Array.html">Array</a></li>
        
          <li><a href="./ArrayTest.html">ArrayTest</a></li>
        
          <li><a href="./AssetsTest.html">AssetsTest</a></li>
        
          <li><a href="./Authorization.html">Authorization</a></li>
        
          <li><a href="./AuthorizationsController.html">AuthorizationsController</a></li>
        
          <li><a href="./AuthorizationsControllerTest.html">AuthorizationsControllerTest</a></li>
        
          <li><a href="./Avahi.html">Avahi</a></li>
        
          <li><a href="./BaseApi_V1.html">BaseApi_V1</a></li>
        
          <li><a href="./BaseController.html">BaseController</a></li>
        
          <li><a href="./BaseObj.html">BaseObj</a></li>
        
          <li><a href="./BaseObj_V1.html">BaseObj_V1</a></li>
        
          <li><a href="./BindDnsServiceTest.html">BindDnsServiceTest</a></li>
        
          <li><a href="./BindTestService.html">BindTestService</a></li>
        
          <li><a href="./BlacklistedValidator.html">BlacklistedValidator</a></li>
        
          <li><a href="./BootstrapFormBuilderTest.html">BootstrapFormBuilderTest</a></li>
        
          <li><a href="./BrokerAuthTest.html">BrokerAuthTest</a></li>
        
          <li><a href="./BrowsingTest.html">BrowsingTest</a></li>
        
          <li><a href="./BuildLifecycleTest.html">BuildLifecycleTest</a></li>
        
          <li><a href="./BuildingController.html">BuildingController</a></li>
        
          <li><a href="./BuildingControllerTest.html">BuildingControllerTest</a></li>
        
          <li><a href="./CacheHelper.html">CacheHelper</a></li>
        
          <li><a href="./CapabilitiesValidator.html">CapabilitiesValidator</a></li>
        
          <li><a href="./CapabilityAware.html">CapabilityAware</a></li>
        
          <li><a href="./CapabilityAwareTest.html">CapabilityAwareTest</a></li>
        
          <li><a href="./CartridgeCache.html">CartridgeCache</a></li>
        
          <li><a href="./CartridgeCacheTest.html">CartridgeCacheTest</a></li>
        
          <li><a href="./CartridgeRepositoryTest.html">CartridgeRepositoryTest</a></li>
        
          <li><a href="./CartridgeRepositoryWebFunctionalTest.html">CartridgeRepositoryWebFunctionalTest</a></li>
        
          <li><a href="./CartridgeTypesController.html">CartridgeTypesController</a></li>
        
          <li><a href="./CartridgeTypesControllerTest.html">CartridgeTypesControllerTest</a></li>
        
          <li><a href="./CartridgeTypesIsolationControllerTest.html">CartridgeTypesIsolationControllerTest</a></li>
        
          <li><a href="./CartridgesController.html">CartridgesController</a></li>
        
          <li><a href="./CartridgesControllerTest.html">CartridgesControllerTest</a></li>
        
          <li><a href="./CgroupsUtilsTest.html">CgroupsUtilsTest</a></li>
        
          <li><a href="./ChangeMembersDomainOp.html">ChangeMembersDomainOp</a></li>
        
          <li><a href="./ChangeMembersOpGroup.html">ChangeMembersOpGroup</a></li>
        
          <li><a href="./CloudUserTest.html">CloudUserTest</a></li>
        
          <li><a href="./CommandHelper.html">CommandHelper</a></li>
        
          <li><a href="./ComponentInstance.html">ComponentInstance</a></li>
        
          <li><a href="./ComponentOrder.html">ComponentOrder</a></li>
        
          <li><a href="./ConfigurationTest.html">ConfigurationTest</a></li>
        
          <li><a href="./ConnectionInstance.html">ConnectionInstance</a></li>
        
          <li><a href="./ConsoleController.html">ConsoleController</a></li>
        
          <li><a href="./ConsoleIndexController.html">ConsoleIndexController</a></li>
        
          <li><a href="./ConsoleIndexControllerTest.html">ConsoleIndexControllerTest</a></li>
        
          <li><a href="./Container.html">Container</a></li>
        
          <li><a href="./CostAware.html">CostAware</a></li>
        
          <li><a href="./CreateGearOp.html">CreateGearOp</a></li>
        
          <li><a href="./CreateGroupInstanceOp.html">CreateGroupInstanceOp</a></li>
        
          <li><a href="./DeleteAppOpGroup.html">DeleteAppOpGroup</a></li>
        
          <li><a href="./DeleteCompOp.html">DeleteCompOp</a></li>
        
          <li><a href="./DeleteGearOp.html">DeleteGearOp</a></li>
        
          <li><a href="./DeleteGroupInstanceOp.html">DeleteGroupInstanceOp</a></li>
        
          <li><a href="./DeployOp.html">DeployOp</a></li>
        
          <li><a href="./DeployOpGroup.html">DeployOpGroup</a></li>
        
          <li><a href="./Deployment.html">Deployment</a></li>
        
          <li><a href="./DeploymentTest.html">DeploymentTest</a></li>
        
          <li><a href="./DeploymentsController.html">DeploymentsController</a></li>
        
          <li><a href="./DeploymentsControllerTest.html">DeploymentsControllerTest</a></li>
        
          <li><a href="./DeploymentsTest.html">DeploymentsTest</a></li>
        
          <li><a href="./DeregisterDnsOp.html">DeregisterDnsOp</a></li>
        
          <li><a href="./DescriptorsController.html">DescriptorsController</a></li>
        
          <li><a href="./DescriptorsControllerTest.html">DescriptorsControllerTest</a></li>
        
          <li><a href="./DestroyGearOp.html">DestroyGearOp</a></li>
        
          <li><a href="./DistributedLockTest.html">DistributedLockTest</a></li>
        
          <li><a href="./District.html">District</a></li>
        
          <li><a href="./DistrictTest.html">DistrictTest</a></li>
        
          <li><a href="./DnsResolvableController.html">DnsResolvableController</a></li>
        
          <li><a href="./DnsResolvableControllerTest.html">DnsResolvableControllerTest</a></li>
        
          <li><a href="./DomainAssociations.html">DomainAssociations</a></li>
        
          <li><a href="./DomainAware.html">DomainAware</a></li>
        
          <li><a href="./DomainMembersController.html">DomainMembersController</a></li>
        
          <li><a href="./DomainSessionSweeper.html">DomainSessionSweeper</a></li>
        
          <li><a href="./DomainTest.html">DomainTest</a></li>
        
          <li><a href="./DomainsController.html">DomainsController</a></li>
        
          <li><a href="./DomainsControllerTest.html">DomainsControllerTest</a></li>
        
          <li><a href="./EmbCartController.html">EmbCartController</a></li>
        
          <li><a href="./EmbCartControllerTest.html">EmbCartControllerTest</a></li>
        
          <li><a href="./EmbCartEventsController.html">EmbCartEventsController</a></li>
        
          <li><a href="./EmbCartEventsControllerTest.html">EmbCartEventsControllerTest</a></li>
        
          <li><a href="./Embedded.html">Embedded</a></li>
        
          <li><a href="./EnvironTest.html">EnvironTest</a></li>
        
          <li><a href="./EnvironmentController.html">EnvironmentController</a></li>
        
          <li><a href="./EnvironmentControllerTest.html">EnvironmentControllerTest</a></li>
        
          <li><a href="./EnvironmentVariablesController.html">EnvironmentVariablesController</a></li>
        
          <li><a href="./EnvironmentVariablesControllerTest.html">EnvironmentVariablesControllerTest</a></li>
        
          <li><a href="./ErrorPageAssertions.html">ErrorPageAssertions</a></li>
        
          <li><a href="./EtcUtils.html">EtcUtils</a></li>
        
          <li><a href="./EtcUtilsTest.html">EtcUtilsTest</a></li>
        
          <li><a href="./ExecuteConnectionsOp.html">ExecuteConnectionsOp</a></li>
        
          <li><a href="./ExecuteConnectionsOpGroup.html">ExecuteConnectionsOpGroup</a></li>
        
          <li><a href="./ExposePortOp.html">ExposePortOp</a></li>
        
          <li><a href="./FilterHash.html">FilterHash</a></li>
        
          <li><a href="./FilterHashTest.html">FilterHashTest</a></li>
        
          <li><a href="./FrontendHttpServerModelTest.html">FrontendHttpServerModelTest</a></li>
        
          <li><a href="./FrontendProxyTest.html">FrontendProxyTest</a></li>
        
          <li><a href="./FunctionalApi.html">FunctionalApi</a></li>
        
          <li><a href="./Gear.html">Gear</a></li>
        
          <li><a href="./GearGroup.html">GearGroup</a></li>
        
          <li><a href="./GearGroupsController.html">GearGroupsController</a></li>
        
          <li><a href="./GearGroupsControllerTest.html">GearGroupsControllerTest</a></li>
        
          <li><a href="./GearRegistryTest.html">GearRegistryTest</a></li>
        
          <li><a href="./GearScaleCtl.html">GearScaleCtl</a></li>
        
          <li><a href="./GearsController.html">GearsController</a></li>
        
          <li><a href="./GearsControllerTest.html">GearsControllerTest</a></li>
        
          <li><a href="./GroupInstance.html">GroupInstance</a></li>
        
          <li><a href="./HAProxyAttr.html">HAProxyAttr</a></li>
        
          <li><a href="./Hash.html">Hash</a></li>
        
          <li><a href="./HelpLinkTest.html">HelpLinkTest</a></li>
        
          <li><a href="./InitGearOp.html">InitGearOp</a></li>
        
          <li><a href="./KeyTypeValidator.html">KeyTypeValidator</a></li>
        
          <li><a href="./KeysController.html">KeysController</a></li>
        
          <li><a href="./KeysControllerTest.html">KeysControllerTest</a></li>
        
          <li><a href="./Link.html">Link</a></li>
        
          <li><a href="./Link_V1.html">Link_V1</a></li>
        
          <li><a href="./Lock.html">Lock</a></li>
        
          <li><a href="./LockTest.html">LockTest</a></li>
        
          <li><a href="./LogHelperTest.html">LogHelperTest</a></li>
        
          <li><a href="./MakeAppHaOpGroup.html">MakeAppHaOpGroup</a></li>
        
          <li><a href="./ManifestTest.html">ManifestTest</a></li>
        
          <li><a href="./Matrix.html">Matrix</a></li>
        
          <li><a href="./Member.html">Member</a></li>
        
          <li><a href="./MembersController.html">MembersController</a></li>
        
          <li><a href="./MembersControllerTest.html">MembersControllerTest</a></li>
        
          <li><a href="./Message.html">Message</a></li>
        
          <li><a href="./MonitoredGearInstanceTest.html">MonitoredGearInstanceTest</a></li>
        
          <li><a href="./MonitoredGearTest.html">MonitoredGearTest</a></li>
        
          <li><a href="./MultiHaFuncTest.html">MultiHaFuncTest</a></li>
        
          <li><a href="./NameServerCache.html">NameServerCache</a></li>
        
          <li><a href="./NameServerCacheTest.html">NameServerCacheTest</a></li>
        
          <li><a href="./NewCompOp.html">NewCompOp</a></li>
        
          <li><a href="./NodeTest.html">NodeTest</a></li>
        
          <li><a href="./NotifyAliasAddOp.html">NotifyAliasAddOp</a></li>
        
          <li><a href="./NotifyAliasRemoveOp.html">NotifyAliasRemoveOp</a></li>
        
          <li><a href="./NotifyAppCreateOp.html">NotifyAppCreateOp</a></li>
        
          <li><a href="./NotifyAppDeleteOp.html">NotifyAppDeleteOp</a></li>
        
          <li><a href="./NotifySslCertAddOp.html">NotifySslCertAddOp</a></li>
        
          <li><a href="./NotifySslCertRemoveOp.html">NotifySslCertRemoveOp</a></li>
        
          <li><a href="./Object.html">Object</a></li>
        
          <li><a href="./OoAdminCtlUserTest.html">OoAdminCtlUserTest</a></li>
        
          <li><a href="./OptionalParam.html">OptionalParam</a></li>
        
          <li><a href="./OptionalParam_V1.html">OptionalParam_V1</a></li>
        
          <li><a href="./OverridesTest.html">OverridesTest</a></li>
        
          <li><a href="./Param.html">Param</a></li>
        
          <li><a href="./Param_V1.html">Param_V1</a></li>
        
          <li><a href="./PatchUserEnvVarsOp.html">PatchUserEnvVarsOp</a></li>
        
          <li><a href="./PatchUserEnvVarsOpGroup.html">PatchUserEnvVarsOpGroup</a></li>
        
          <li><a href="./PathUtils.html">PathUtils</a></li>
        
          <li><a href="./PathUtilsTest.html">PathUtilsTest</a></li>
        
          <li><a href="./PendingAppOp.html">PendingAppOp</a></li>
        
          <li><a href="./PendingAppOpGroup.html">PendingAppOpGroup</a></li>
        
          <li><a href="./PendingDomainOps.html">PendingDomainOps</a></li>
        
          <li><a href="./PendingUserOps.html">PendingUserOps</a></li>
        
          <li><a href="./PermissionHelper.html">PermissionHelper</a></li>
        
          <li><a href="./PlatformBinaryDeployTest.html">PlatformBinaryDeployTest</a></li>
        
          <li><a href="./PlatformDeployExtTest.html">PlatformDeployExtTest</a></li>
        
          <li><a href="./PlatformDeploymentIntegrityTest.html">PlatformDeploymentIntegrityTest</a></li>
        
          <li><a href="./PortInterface.html">PortInterface</a></li>
        
          <li><a href="./PostConfigureCompOp.html">PostConfigureCompOp</a></li>
        
          <li><a href="./ProjectFilter.html">ProjectFilter</a></li>
        
          <li><a href="./PublishRoutingInfoOp.html">PublishRoutingInfoOp</a></li>
        
          <li><a href="./Quickstart.html">Quickstart</a></li>
        
          <li><a href="./QuickstartsController.html">QuickstartsController</a></li>
        
          <li><a href="./QuickstartsControllerTest.html">QuickstartsControllerTest</a></li>
        
          <li><a href="./QuickstartsTest.html">QuickstartsTest</a></li>
        
          <li><a href="./RegisterDnsOp.html">RegisterDnsOp</a></li>
        
          <li><a href="./RegisterRoutingDnsOp.html">RegisterRoutingDnsOp</a></li>
        
          <li><a href="./ReloadAppConfigOpGroup.html">ReloadAppConfigOpGroup</a></li>
        
          <li><a href="./ReloadCompConfigOp.html">ReloadCompConfigOp</a></li>
        
          <li><a href="./ReloadCompConfigOpGroup.html">ReloadCompConfigOpGroup</a></li>
        
          <li><a href="./ReloadFeatureConfigOpGroup.html">ReloadFeatureConfigOpGroup</a></li>
        
          <li><a href="./RemoteJob.html">RemoteJob</a></li>
        
          <li><a href="./RemoteUserAuthServiceTest.html">RemoteUserAuthServiceTest</a></li>
        
          <li><a href="./RemoveAliasOp.html">RemoveAliasOp</a></li>
        
          <li><a href="./RemoveAliasOpGroup.html">RemoveAliasOpGroup</a></li>
        
          <li><a href="./RemoveCompOp.html">RemoveCompOp</a></li>
        
          <li><a href="./RemoveEnvVarsDomainOp.html">RemoveEnvVarsDomainOp</a></li>
        
          <li><a href="./RemoveFeaturesOpGroup.html">RemoveFeaturesOpGroup</a></li>
        
          <li><a href="./RemoveGearOpGroup.html">RemoveGearOpGroup</a></li>
        
          <li><a href="./RemoveSshKeysUserOp.html">RemoveSshKeysUserOp</a></li>
        
          <li><a href="./RemoveSslCertOp.html">RemoveSslCertOp</a></li>
        
          <li><a href="./RemoveSslCertOpGroup.html">RemoveSslCertOpGroup</a></li>
        
          <li><a href="./RemoveSystemSshKeysDomainOp.html">RemoveSystemSshKeysDomainOp</a></li>
        
          <li><a href="./RemovedNodesAppFixupTest.html">RemovedNodesAppFixupTest</a></li>
        
          <li><a href="./ReplaceAllSshKeysOp.html">ReplaceAllSshKeysOp</a></li>
        
          <li><a href="./ReplaceAllSshKeysOpGroup.html">ReplaceAllSshKeysOpGroup</a></li>
        
          <li><a href="./RescueFromTest.html">RescueFromTest</a></li>
        
          <li><a href="./ReserveGearUidOp.html">ReserveGearUidOp</a></li>
        
          <li><a href="./RestAccount.html">RestAccount</a></li>
        
          <li><a href="./RestAlias.html">RestAlias</a></li>
        
          <li><a href="./RestAlias15.html">RestAlias15</a></li>
        
          <li><a href="./RestApiApplicationTest.html">RestApiApplicationTest</a></li>
        
          <li><a href="./RestApiAuth.html">RestApiAuth</a></li>
        
          <li><a href="./RestApiAuthorizationTest.html">RestApiAuthorizationTest</a></li>
        
          <li><a href="./RestApiCartridgeTest.html">RestApiCartridgeTest</a></li>
        
          <li><a href="./RestApiCartridgeTypeTest.html">RestApiCartridgeTypeTest</a></li>
        
          <li><a href="./RestApiCustomCartTest.html">RestApiCustomCartTest</a></li>
        
          <li><a href="./RestApiDomainTest.html">RestApiDomainTest</a></li>
        
          <li><a href="./RestApiInfoTest.html">RestApiInfoTest</a></li>
        
          <li><a href="./RestApiKeyTest.html">RestApiKeyTest</a></li>
        
          <li><a href="./RestApiMembershipTest.html">RestApiMembershipTest</a></li>
        
          <li><a href="./RestApiNolinksTest.html">RestApiNolinksTest</a></li>
        
          <li><a href="./RestApiUnitTest.html">RestApiUnitTest</a></li>
        
          <li><a href="./RestApi_V1.html">RestApi_V1</a></li>
        
          <li><a href="./RestApplication.html">RestApplication</a></li>
        
          <li><a href="./RestApplication10.html">RestApplication10</a></li>
        
          <li><a href="./RestApplication13.html">RestApplication13</a></li>
        
          <li><a href="./RestApplication15.html">RestApplication15</a></li>
        
          <li><a href="./RestApplicationEstimate_V1.html">RestApplicationEstimate_V1</a></li>
        
          <li><a href="./RestApplication_V1.html">RestApplication_V1</a></li>
        
          <li><a href="./RestAuthorization.html">RestAuthorization</a></li>
        
          <li><a href="./RestCartridge.html">RestCartridge</a></li>
        
          <li><a href="./RestCartridge10.html">RestCartridge10</a></li>
        
          <li><a href="./RestDeployment.html">RestDeployment</a></li>
        
          <li><a href="./RestDomain.html">RestDomain</a></li>
        
          <li><a href="./RestDomain10.html">RestDomain10</a></li>
        
          <li><a href="./RestDomain12.html">RestDomain12</a></li>
        
          <li><a href="./RestDomain15.html">RestDomain15</a></li>
        
          <li><a href="./RestDomain_V1.html">RestDomain_V1</a></li>
        
          <li><a href="./RestEmbeddedCartridge.html">RestEmbeddedCartridge</a></li>
        
          <li><a href="./RestEmbeddedCartridge10.html">RestEmbeddedCartridge10</a></li>
        
          <li><a href="./RestEmbeddedCartridge15.html">RestEmbeddedCartridge15</a></li>
        
          <li><a href="./RestEmbeddedCartridge_V1.html">RestEmbeddedCartridge_V1</a></li>
        
          <li><a href="./RestEnvironmentVariable.html">RestEnvironmentVariable</a></li>
        
          <li><a href="./RestEnvironmentVariable15.html">RestEnvironmentVariable15</a></li>
        
          <li><a href="./RestGearGroup.html">RestGearGroup</a></li>
        
          <li><a href="./RestGearGroup15.html">RestGearGroup15</a></li>
        
          <li><a href="./RestGearGroup_V1.html">RestGearGroup_V1</a></li>
        
          <li><a href="./RestGear_V1.html">RestGear_V1</a></li>
        
          <li><a href="./RestKey.html">RestKey</a></li>
        
          <li><a href="./RestKey_V1.html">RestKey_V1</a></li>
        
          <li><a href="./RestMember.html">RestMember</a></li>
        
          <li><a href="./RestModelHelper.html">RestModelHelper</a></li>
        
          <li><a href="./RestReply.html">RestReply</a></li>
        
          <li><a href="./RestUser.html">RestUser</a></li>
        
          <li><a href="./RestUser10.html">RestUser10</a></li>
        
          <li><a href="./RestUser_V1.html">RestUser_V1</a></li>
        
          <li><a href="./RestartAppOpGroup.html">RestartAppOpGroup</a></li>
        
          <li><a href="./RestartCompOp.html">RestartCompOp</a></li>
        
          <li><a href="./RestartCompOpGroup.html">RestartCompOpGroup</a></li>
        
          <li><a href="./RestartFeatureOpGroup.html">RestartFeatureOpGroup</a></li>
        
          <li><a href="./RestartsController.html">RestartsController</a></li>
        
          <li><a href="./RestartsControllerTest.html">RestartsControllerTest</a></li>
        
          <li><a href="./ResultIO.html">ResultIO</a></li>
        
          <li><a href="./Role.html">Role</a></li>
        
          <li><a href="./RollingRestartCompOp.html">RollingRestartCompOp</a></li>
        
          <li><a href="./SELinuxUtilsChconTest.html">SELinuxUtilsChconTest</a></li>
        
          <li><a href="./SELinuxUtilsContextTest.html">SELinuxUtilsContextTest</a></li>
        
          <li><a href="./SELinuxUtilsMCSLabelTest.html">SELinuxUtilsMCSLabelTest</a></li>
        
          <li><a href="./SELinuxUtilsSetMCSLabelTest.html">SELinuxUtilsSetMCSLabelTest</a></li>
        
          <li><a href="./SQLHelper.html">SQLHelper</a></li>
        
          <li><a href="./SanitizeTest.html">SanitizeTest</a></li>
        
          <li><a href="./ScaleOpGroup.html">ScaleOpGroup</a></li>
        
          <li><a href="./ScalingController.html">ScalingController</a></li>
        
          <li><a href="./ScalingControllerTest.html">ScalingControllerTest</a></li>
        
          <li><a href="./ScalingFuncTest.html">ScalingFuncTest</a></li>
        
          <li><a href="./ScopeTest.html">ScopeTest</a></li>
        
          <li><a href="./SetAddtlFsGbOp.html">SetAddtlFsGbOp</a></li>
        
          <li><a href="./SetGroupOverridesOp.html">SetGroupOverridesOp</a></li>
        
          <li><a href="./SettingsController.html">SettingsController</a></li>
        
          <li><a href="./SettingsControllerTest.html">SettingsControllerTest</a></li>
        
          <li><a href="./SetupHelper.html">SetupHelper</a></li>
        
          <li><a href="./SingularResourcesIntegrationTest.html">SingularResourcesIntegrationTest</a></li>
        
          <li><a href="./SingularResourcesTest.html">SingularResourcesTest</a></li>
        
          <li><a href="./SshKey.html">SshKey</a></li>
        
          <li><a href="./SshkeyAware.html">SshkeyAware</a></li>
        
          <li><a href="./SshkeySessionSweeper.html">SshkeySessionSweeper</a></li>
        
          <li><a href="./StartAppOpGroup.html">StartAppOpGroup</a></li>
        
          <li><a href="./StartCompOp.html">StartCompOp</a></li>
        
          <li><a href="./StartCompOpGroup.html">StartCompOpGroup</a></li>
        
          <li><a href="./StartFeatureOpGroup.html">StartFeatureOpGroup</a></li>
        
          <li><a href="./StaticPagesTest.html">StaticPagesTest</a></li>
        
          <li><a href="./StopAppOpGroup.html">StopAppOpGroup</a></li>
        
          <li><a href="./StopCompOp.html">StopCompOp</a></li>
        
          <li><a href="./StopCompOpGroup.html">StopCompOpGroup</a></li>
        
          <li><a href="./StopFeatureOpGroup.html">StopFeatureOpGroup</a></li>
        
          <li><a href="./StorageController.html">StorageController</a></li>
        
          <li><a href="./StorageControllerTest.html">StorageControllerTest</a></li>
        
          <li><a href="./String.html">String</a></li>
        
          <li><a href="./StringFilter.html">StringFilter</a></li>
        
          <li><a href="./SubUserTest.html">SubUserTest</a></li>
        
          <li><a href="./SubscriptionTest.html">SubscriptionTest</a></li>
        
          <li><a href="./SystemSshKey.html">SystemSshKey</a></li>
        
          <li><a href="./TestAuthorizedKeysFile.html">TestAuthorizedKeysFile</a></li>
        
          <li><a href="./TestK5login.html">TestK5login</a></li>
        
          <li><a href="./ThrottlerTest.html">ThrottlerTest</a></li>
        
          <li><a href="./TidyAppOpGroup.html">TidyAppOpGroup</a></li>
        
          <li><a href="./TidyCompOp.html">TidyCompOp</a></li>
        
          <li><a href="./TrackUsageOp.html">TrackUsageOp</a></li>
        
          <li><a href="./UnixUserModelFunctionalTest.html">UnixUserModelFunctionalTest</a></li>
        
          <li><a href="./UnreserveGearUidOp.html">UnreserveGearUidOp</a></li>
        
          <li><a href="./UnsubscribeConnectionsOp.html">UnsubscribeConnectionsOp</a></li>
        
          <li><a href="./Unused.html">Unused</a></li>
        
          <li><a href="./UpdateAppConfigOp.html">UpdateAppConfigOp</a></li>
        
          <li><a href="./UpdateAppConfigOpGroup.html">UpdateAppConfigOpGroup</a></li>
        
          <li><a href="./UpdateClusterOp.html">UpdateClusterOp</a></li>
        
          <li><a href="./UpdateClusterOpGroup.html">UpdateClusterOpGroup</a></li>
        
          <li><a href="./UpdateCompLimitsOpGroup.html">UpdateCompLimitsOpGroup</a></li>
        
          <li><a href="./Usage.html">Usage</a></li>
        
          <li><a href="./UsageModelTest.html">UsageModelTest</a></li>
        
          <li><a href="./UsageRecord.html">UsageRecord</a></li>
        
          <li><a href="./User.html">User</a></li>
        
          <li><a href="./UserAccount.html">UserAccount</a></li>
        
          <li><a href="./UserAssociations.html">UserAssociations</a></li>
        
          <li><a href="./UserController.html">UserController</a></li>
        
          <li><a href="./UserControllerTest.html">UserControllerTest</a></li>
        
          <li><a href="./UserHelper.html">UserHelper</a></li>
        
          <li><a href="./UserSessionSweeper.html">UserSessionSweeper</a></li>
        
          <li><a href="./UserSshKey.html">UserSshKey</a></li>
        
          <li><a href="./VersionFunctionalTest.html">VersionFunctionalTest</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">Application</h1>

    <div id="description" class="description">
      
<p>@api model Class to represent an <a href="OpenShift.html">OpenShift</a> <a
href="Application.html">Application</a> @!attribute [r] name</p>

<pre>@return [String] The name of the application. The name of the application is user provided and can be mixed case</pre>

<p>@!attribute [r] canonical_name</p>

<pre>@return [String] The down-cased name of the application</pre>

<p>@!attribute [r] uuid</p>

<pre>@return [String] UUID that represents this application. This is usually the same as the MongoID ID field.
  For applications that existed before the transition to MongoID, this field represents the original UUID and will differ
  from the MongoID ID field.</pre>

<p>@!attribute [rw] domain_requires</p>

<pre>@return [Array&lt;String&gt;] Array of IDs of the applications that this application is dependent on
  If the parent application is destroyed, this application also needs to be destroyed</pre>

<p>@!attribute [rw] group_overrides</p>

<pre>@return [Array&lt;Array&lt;String&gt;&gt;] Array of Array of components that need to be co-located</pre>

<p>@!attribute [rw] pending_op_groups</p>

<pre>@return [Array&lt;PendingAppOpGroup&gt;] List of pending operations to be performed on this application</pre>

<p>@!attribute [r] domain</p>

<pre>@return [Domain] Domain that this application is part of.</pre>

<p>@!attribute [rw] component_start_order</p>

<pre>@return [Array&lt;String&gt;] Normally start order computed based on order specified by each component's manifest.
  This attribute is used to overrides the start order</pre>

<p>@!attribute [rw] component_stop_order</p>

<pre>@return [Array&lt;String&gt;] Normally stop order computed based on order specified by each component's manifest.
  This attribute is used to overrides the stop order</pre>

<p>@!attribute [rw] component_stop_order</p>

<pre>@return [Array&lt;String&gt;] Normally configure order computed based on order specified by each component's manifest.
  This attribute is used to overrides the configure order</pre>

<p>@!attribute [r] default_gear_size</p>

<pre>@return [String] The default gear size to use when creating a new {GroupInstance}. This value can be overridden
  using group overrides or in the cartridge manifest</pre>

<p>@!attribute [r] scalable</p>

<pre>@return [Boolean] This value is true if the application is scalable</pre>

<p>@!attribute [r] init_git_url</p>

<pre>@return [String] Stores the URL to the GIT url specified during application creation</pre>

<p>@!attribute [r] analytics</p>

<pre>@return [Hash] Location to store analytics data relevant to the application</pre>

<p>@!attribute [r] component_instances</p>

<pre>@return [Array&lt;ComponentInstance&gt;] Array of components in this application</pre>

<p>@!attribute [r] group_instances</p>

<pre>@return [Array&lt;GroupInstance&gt;] Array of gear groups in the application</pre>

<p>@!attribute [r] app_ssh_keys</p>

<pre>@return [Array&lt;ApplicationSshKey&gt;] Array of auto-generated SSH keys used by components of the application to connect to other gears</pre>

<p>@!attribute [r] aliases</p>

<pre>@return [Array&lt;String&gt;] Array of DNS aliases registered with this application.
  @see {Application#add_alias} and {Application#remove_alias}</pre>

<p>@!attribute [r] deployments</p>

<pre>@return [Array&lt;Deployment&gt;] Array of deployment for this application</pre>
<hr style="height: 1px">

<p>The REST API model object representing an application instance.</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      
      <!-- Constants -->
      <div id="constants-list" class="section">
        <h3 class="section-header">Constants</h3>
        <dl>
        
          <dt><a name="APP_NAME_MAX_LENGTH">APP_NAME_MAX_LENGTH</a></dt>
          
          <dd class="description"><p>Maximum length of  a valid application name</p></dd>
          
        
          <dt><a name="APP_NAME_REGEX">APP_NAME_REGEX</a></dt>
          
          <dd class="description"><p>This is the current regex for validations for new applications</p></dd>
          
        
          <dt><a name="DEPLOYMENT_TYPES">DEPLOYMENT_TYPES</a></dt>
          
          <dd class="description"><p>Available deployment types</p></dd>
          
        
          <dt><a name="MAX_SCALE">MAX_SCALE</a></dt>
          
          <dd class="description"><p>Numeric representation for unlimited scaling</p></dd>
          
        
          <dt><a name="MAX_SCALE_NUM">MAX_SCALE_NUM</a></dt>
          
          <dd class="description"></dd>
          
        
        </dl>
      </div>
      

      
      <!-- Attributes -->
      <div id="attribute-method-details" class="method-section section">
        <h3 class="section-header">Attributes</h3>

        
        <div id="connections-attribute-method" class="method-detail">
          <a name="connections"></a>
          
          <a name="connections="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">connections</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="downloaded_cartridges-attribute-method" class="method-detail">
          <a name="downloaded_cartridges"></a>
          
          <a name="downloaded_cartridges="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">downloaded_cartridges</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="gear_groups-attribute-method" class="method-detail">
          <a name="gear_groups"></a>
          
          <a name="gear_groups="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">gear_groups</span><span
              class="attribute-access-type">[W]</span>
          </div>

          <div class="method-description">
          
          
          
          </div>
        </div>
        
        <div id="user_agent-attribute-method" class="method-detail">
          <a name="user_agent"></a>
          
          <a name="user_agent="></a>
          
          <div class="method-heading attribute-method-heading">
            <span class="method-name">user_agent</span><span
              class="attribute-access-type">[RW]</span>
          </div>

          <div class="method-description">
          
          <p>non-persisted field used to store user agent of current request</p>
          
          </div>
        </div>
        
      </div><!-- attribute-method-details -->
      

      <!-- Methods -->
      
      <div id="public-class-method-details" class="method-section section">
        <h3 class="section-header">Public Class Methods</h3>

      
        <div id="check_name-21-method" class="method-detail ">
          <a name="method-c-check_name-21"></a>

          
          <div class="method-heading">
            <span class="method-name">check_name!</span><span
              class="method-args">(name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="check_name-21-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 75</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">check_name!</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">!~</span> <span class="ruby-constant">APP_NAME_REGEX</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">Mongoid</span><span class="ruby-operator">::</span><span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentNotFound</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Application</span>, <span class="ruby-keyword">nil</span>, [<span class="ruby-identifier">name</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- check_name-21-source -->
            
          </div>

          

          
        </div><!-- check_name-21-method -->

      
        <div id="create_app-method" class="method-detail ">
          <a name="method-c-create_app"></a>

          
          <div class="method-heading">
            <span class="method-name">create_app</span><span
              class="method-args">(application_name, features, domain, default_gear_size = nil, scalable=false, result_io=ResultIO.new, group_overrides=[], init_git_url=nil, user_agent=nil, community_cart_urls=[], builder_id=nil, user_env_vars=nil, gear_size_map={})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Factory method to create the {Application}</p>

<p>@param application_name [String] Name of the application @param features
[<a href="Array.html">Array</a>&lt;String&gt;] List of cartridges or
features to add to the application @param domain [Domain] The domain
namespace under which this application is created @param default_gear_size
[String] The default gear size to use when creating a new {Gear} for the
application @param scalable [Boolean] Indicates if the application should
be scalable or host all cartridges on a single gear.</p>

<pre>If set to true, a &quot;web_proxy&quot; cartridge is automatically added to perform load-balancing for the web tier</pre>

<p>@param result_io [<a href="ResultIO.html">ResultIO</a>, output] <a
href="Object.html">Object</a> to log all messages and cartridge output
@param group_overrides [Array] List of overrides to specify gear sizes,
scaling limits, component collocation etc. @param init_git_url [String] URL
to git repository to retrieve application code @param <a
href="Application.html#attribute-i-user_agent">user_agent</a> [String] user
agent string of browser used for this rest API request @return
[Application] <a href="Application.html">Application</a> object @raise
[OpenShift::ApplicationValidationException] Exception to indicate a
validation error</p>
            

            
            <div class="method-source-code" id="create_app-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 198</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_app</span>(<span class="ruby-identifier">application_name</span>, <span class="ruby-identifier">features</span>, <span class="ruby-identifier">domain</span>, <span class="ruby-identifier">default_gear_size</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">scalable</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">result_io</span>=<span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">group_overrides</span>=[],
                    <span class="ruby-identifier">init_git_url</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_agent</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">community_cart_urls</span>=[], <span class="ruby-identifier">builder_id</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_env_vars</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">gear_size_map</span>={})<span class="ruby-comment">#, auto_deploy=false, deployment_branch=&quot;master&quot;, keep_deployments=1, deployment_type=&quot;git&quot;)</span>
  <span class="ruby-identifier">default_gear_size</span> =  <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">openshift</span>[<span class="ruby-value">:default_gear_size</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">default_gear_size</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">cmap</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">fetch_community_carts</span>(<span class="ruby-identifier">community_cart_urls</span>)
  <span class="ruby-identifier">app</span> = <span class="ruby-constant">Application</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">domain</span><span class="ruby-operator">:</span> <span class="ruby-identifier">domain</span>, <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">application_name</span>, <span class="ruby-identifier">default_gear_size</span><span class="ruby-operator">:</span> <span class="ruby-identifier">default_gear_size</span>, <span class="ruby-identifier">scalable</span><span class="ruby-operator">:</span> <span class="ruby-identifier">scalable</span>, <span class="ruby-identifier">app_ssh_keys</span><span class="ruby-operator">:</span> [], <span class="ruby-identifier">pending_op_groups</span><span class="ruby-operator">:</span> [], <span class="ruby-identifier">downloaded_cart_map</span><span class="ruby-operator">:</span> <span class="ruby-identifier">cmap</span>, <span class="ruby-identifier">builder_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">builder_id</span>)
  <span class="ruby-comment">#app.config['auto_deploy'] = auto_deploy</span>
  <span class="ruby-comment">#app.config['deployment_branch'] = deployment_branch</span>
  <span class="ruby-comment">#app.config['keep_deployments'] = keep_deployments</span>
  <span class="ruby-comment">#app.config['deployment_type'] = deployment_type</span>
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">user_agent</span> = <span class="ruby-identifier">user_agent</span>
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">init_git_url</span> = <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">Git</span>.<span class="ruby-identifier">persistable_clone_spec</span>(<span class="ruby-identifier">init_git_url</span>)
  <span class="ruby-identifier">app</span>.<span class="ruby-identifier">analytics</span>[<span class="ruby-string">'user_agent'</span>] = <span class="ruby-identifier">user_agent</span>
  <span class="ruby-identifier">features</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;web_proxy&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">scalable</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">app</span>.<span class="ruby-identifier">valid?</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">downloaded_cartridges</span> = <span class="ruby-identifier">app</span>.<span class="ruby-identifier">downloaded_cartridges</span>(<span class="ruby-identifier">gear_size_map</span>)
      <span class="ruby-identifier">downloaded_cartridges</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">cname</span>,<span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">features</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span> }
      <span class="ruby-identifier">framework_carts</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">cartridge_names</span>(<span class="ruby-string">&quot;web_framework&quot;</span>, <span class="ruby-identifier">app</span>)
      <span class="ruby-identifier">framework_cartridges</span> = []
      <span class="ruby-identifier">features</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feature</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature</span>, <span class="ruby-identifier">app</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>
          <span class="ruby-identifier">framework_cartridges</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">name</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_web_framework?</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid cartridge '#{feature}' specified.&quot;</span>, <span class="ruby-value">109</span>, <span class="ruby-string">&quot;cartridge&quot;</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">framework_carts</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Unable to determine list of available cartridges.  If the problem persists please contact Red Hat support&quot;</span>, <span class="ruby-value">109</span>, <span class="ruby-string">&quot;cartridge&quot;</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">framework_cartridges</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Each application must contain one web cartridge.  None of the specified cartridges #{features.to_sentence} is a web cartridge. Please include one of the following cartridges: #{framework_carts.to_sentence} or supply a valid url to a custom web_framework cartridge.&quot;</span>, <span class="ruby-value">109</span>, <span class="ruby-string">&quot;cartridge&quot;</span>)
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">framework_cartridges</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Each application must contain only one web cartridge.  Please include a single web cartridge from this list: #{framework_carts.to_sentence}.&quot;</span>, <span class="ruby-value">109</span>, <span class="ruby-string">&quot;cartridge&quot;</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">framework_gear_size</span> = <span class="ruby-identifier">gear_size_map</span>[<span class="ruby-identifier">framework_cartridges</span>[<span class="ruby-value">0</span>]]
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">framework_gear_size</span> <span class="ruby-keyword">and</span> (<span class="ruby-identifier">framework_gear_size</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">default_gear_size</span>)
        <span class="ruby-identifier">app</span>.<span class="ruby-identifier">default_gear_size</span> = <span class="ruby-identifier">framework_gear_size</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">gear_size_map</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_size</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">app</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">nil?</span>
          <span class="ruby-identifier">carts</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">cartridge_names</span>(<span class="ruby-string">&quot;embedded&quot;</span>, <span class="ruby-identifier">app</span>)
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid cartridge. Valid values are (#{carts.join(', ')})&quot;</span>, <span class="ruby-value">109</span>, <span class="ruby-string">&quot;cartridge&quot;</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">profs</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">profile_for_feature</span>(<span class="ruby-identifier">name</span>)
        <span class="ruby-identifier">profile</span> = (<span class="ruby-identifier">profs</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">profs</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">profs</span>
        <span class="ruby-identifier">comp</span> = <span class="ruby-identifier">profile</span>.<span class="ruby-identifier">components</span>.<span class="ruby-identifier">first</span>
        <span class="ruby-identifier">comp_spec</span> = {<span class="ruby-string">&quot;cart&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;comp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">name</span>}

        <span class="ruby-identifier">group_override</span> = {<span class="ruby-string">&quot;components&quot;</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">comp_spec</span>]}
        <span class="ruby-identifier">group_override</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] = <span class="ruby-identifier">gear_size</span>
        <span class="ruby-identifier">group_overrides</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">group_override</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">add_feature_result</span> = <span class="ruby-identifier">app</span>.<span class="ruby-identifier">add_features</span>(<span class="ruby-identifier">features</span>, <span class="ruby-identifier">group_overrides</span>, <span class="ruby-identifier">init_git_url</span>, <span class="ruby-identifier">user_env_vars</span>)
      <span class="ruby-identifier">result_io</span>.<span class="ruby-identifier">append</span> <span class="ruby-identifier">add_feature_result</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">app</span>.<span class="ruby-identifier">group_instances</span>.<span class="ruby-identifier">present?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">app</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">present?</span>
        <span class="ruby-identifier">app</span>.<span class="ruby-identifier">delete</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">app</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">app</span>.<span class="ruby-identifier">delete</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">ApplicationValidationException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">app</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">app</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- create_app-source -->
            
          </div>

          

          
        </div><!-- create_app-method -->

      
        <div id="element_path-method" class="method-detail ">
          <a name="method-c-element_path"></a>

          
          <div class="method-heading">
            <span class="method-name">element_path</span><span
              class="method-args">(id, prefix_options = {}, query_options = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Override the class method to not use the :domain_id prefix option when
searching by id</p>
            

            
            <div class="method-source-code" id="element_path-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 34</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">element_path</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">prefix_options</span> = {}, <span class="ruby-identifier">query_options</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">id</span>
    <span class="ruby-identifier">prefix_options</span> = <span class="ruby-identifier">prefix_options</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">reject</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span> <span class="ruby-operator">==</span> <span class="ruby-value">:domain_id</span> } <span class="ruby-keyword">if</span> <span class="ruby-identifier">prefix_options</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">query_options</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">query_options</span>[<span class="ruby-value">:name</span>] <span class="ruby-keyword">and</span> <span class="ruby-identifier">prefix_options</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">prefix_options</span>[<span class="ruby-value">:domain_id</span>]
    <span class="ruby-keyword">super</span>(<span class="ruby-identifier">query_options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:name</span>), <span class="ruby-identifier">prefix_options</span>, <span class="ruby-identifier">query_options</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- element_path-source -->
            
          </div>

          

          
        </div><!-- element_path-method -->

      
        <div id="find-method" class="method-detail ">
          <a name="method-c-find"></a>

          
          <div class="method-heading">
            <span class="method-name">find</span><span
              class="method-args">(*args)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Override to extract the real ID from the pretty ID before searching</p>
            

            
            <div class="method-source-code" id="find-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 51</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find</span>(*<span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>)
    <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>] = <span class="ruby-identifier">id_from_param</span>(<span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>])
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">super</span>(*<span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- find-source -->
            
          </div>

          

          
        </div><!-- find-method -->

      
        <div id="find_by_gear_uuid-method" class="method-detail ">
          <a name="method-c-find_by_gear_uuid"></a>

          
          <div class="method-heading">
            <span class="method-name">find_by_gear_uuid</span><span
              class="method-args">(gear_uuid)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Helper method to find an application that runs on a particular gear @param
gear_uuid [String] The UUID of the gear @return [[<a
href="Application.html">Application</a>,Gear]] The application and gear
objects or nil array if no application matches</p>
            

            
            <div class="method-source-code" id="find_by_gear_uuid-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 320</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_by_gear_uuid</span>(<span class="ruby-identifier">gear_uuid</span>)
  <span class="ruby-comment"># obj_id = Moped::BSON::ObjectId(gear_uuid)</span>
  <span class="ruby-identifier">obj_id</span> = <span class="ruby-identifier">gear_uuid</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-identifier">app</span> = <span class="ruby-constant">Application</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;gears.uuid&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">obj_id</span>).<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">return</span> [<span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">app</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">gear</span> = <span class="ruby-identifier">app</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">uuid</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">obj_id</span> }.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">return</span> [<span class="ruby-identifier">app</span>, <span class="ruby-identifier">gear</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- find_by_gear_uuid-source -->
            
          </div>

          

          
        </div><!-- find_by_gear_uuid-method -->

      
        <div id="find_by_user-method" class="method-detail ">
          <a name="method-c-find_by_user"></a>

          
          <div class="method-heading">
            <span class="method-name">find_by_user</span><span
              class="method-args">(user, app_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Helper method to find an application using the application name @param user
[CloudUser] The owner of the application @param app_name [String] The
application name @return [<a href="Application.html">Application</a>, nil]
The application object or nil if no application matches</p>
            

            
            <div class="method-source-code" id="find_by_user-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 312</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">find_by_user</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">app_name</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">in</span>(<span class="ruby-identifier">domain</span><span class="ruby-operator">:</span> <span class="ruby-identifier">user</span>.<span class="ruby-identifier">domains</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:_id</span>)).<span class="ruby-identifier">where</span>(<span class="ruby-identifier">canonical_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">app_name</span>.<span class="ruby-identifier">downcase</span>).<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- find_by_user-source -->
            
          </div>

          

          
        </div><!-- find_by_user-method -->

      
        <div id="id_from_param-method" class="method-detail ">
          <a name="method-c-id_from_param"></a>

          
          <div class="method-heading">
            <span class="method-name">id_from_param</span><span
              class="method-args">(param)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Helper method to extract the ID from an ID param containing the name as
well</p>
            

            
            <div class="method-source-code" id="id_from_param-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 46</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">id_from_param</span>(<span class="ruby-identifier">param</span>)
  <span class="ruby-identifier">param</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/-.*/</span>, <span class="ruby-string">''</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">param</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- id_from_param-source -->
            
          </div>

          

          
        </div><!-- id_from_param-method -->

      
        <div id="new-method" class="method-detail ">
          <a name="method-c-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">(attrs = nil, options = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Constructor. Should not be used directly. Use {Application#create_app}
instead. @note side-effect: Saves application object in mongo</p>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 332</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">attrs</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">options</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">super</span>
  <span class="ruby-ivar">@downloaded_cartridges</span> = {}
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">app_ssh_keys</span> = []
  <span class="ruby-comment">#self.pending_op_groups = []</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">analytics</span> = {} <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">analytics</span>.<span class="ruby-identifier">nil?</span>

  <span class="ruby-comment"># the resultant string length is 4/3 times the number specified as the first argument</span>
  <span class="ruby-comment"># with 96 specified, the token is going to be 128 characters long</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">secret_token</span> = <span class="ruby-constant">SecureRandom</span>.<span class="ruby-identifier">urlsafe_base64</span>(<span class="ruby-value">96</span>, <span class="ruby-keyword">false</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
        <div id="run_in_application_lock-method" class="method-detail ">
          <a name="method-c-run_in_application_lock"></a>

          
          <div class="method-heading">
            <span class="method-name">run_in_application_lock</span><span
              class="method-args">(application, &block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="run_in_application_lock-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1579</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-identifier">application</span>, &amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-identifier">got_lock</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">num_retries</span> = <span class="ruby-value">10</span>
  <span class="ruby-identifier">wait</span> = <span class="ruby-value">5</span>
  <span class="ruby-keyword">while</span>(<span class="ruby-identifier">num_retries</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">got_lock</span>)
    <span class="ruby-keyword">if</span>(<span class="ruby-constant">Lock</span>.<span class="ruby-identifier">lock_application</span>(<span class="ruby-identifier">application</span>))
      <span class="ruby-identifier">got_lock</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">num_retries</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">sleep</span>(<span class="ruby-identifier">wait</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">got_lock</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">block</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">application</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">yield</span>
    <span class="ruby-keyword">ensure</span>
      <span class="ruby-constant">Lock</span>.<span class="ruby-identifier">unlock_application</span>(<span class="ruby-identifier">application</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">LockUnavailableException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Unable to perform action. Another operation is already running.&quot;</span>, <span class="ruby-value">171</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- run_in_application_lock-source -->
            
          </div>

          

          
        </div><!-- run_in_application_lock-method -->

      
        <div id="safe_name-method" class="method-detail ">
          <a name="method-c-safe_name"></a>

          
          <div class="method-heading">
            <span class="method-name">safe_name</span><span
              class="method-args">(name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="safe_name-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 73</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">safe_name</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/[^A-Za-z0-9]/</span>,<span class="ruby-string">''</span>)[<span class="ruby-value">0</span>,<span class="ruby-value">32</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- safe_name-source -->
            
          </div>

          

          
        </div><!-- safe_name-method -->

      
        <div id="sanitize_user_env_variables-method" class="method-detail ">
          <a name="method-c-sanitize_user_env_variables"></a>

          
          <div class="method-heading">
            <span class="method-name">sanitize_user_env_variables</span><span
              class="method-args">(user_env_vars)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="sanitize_user_env_variables-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2867</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">sanitize_user_env_variables</span>(<span class="ruby-identifier">user_env_vars</span>)
  <span class="ruby-identifier">set_vars</span> = []
  <span class="ruby-identifier">unset_vars</span> = []
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">user_env_vars</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-comment"># separate add/update and delete user env vars</span>
    <span class="ruby-identifier">user_env_vars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ev</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">ev</span>[<span class="ruby-string">'name'</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ev</span>[<span class="ruby-string">'value'</span>]
        <span class="ruby-identifier">set_vars</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ev</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">unset_vars</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ev</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">set_vars</span>, <span class="ruby-identifier">unset_vars</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- sanitize_user_env_variables-source -->
            
          </div>

          

          
        </div><!-- sanitize_user_env_variables-method -->

      
        <div id="suggest_name_from-method" class="method-detail ">
          <a name="method-c-suggest_name_from"></a>

          
          <div class="method-heading">
            <span class="method-name">suggest_name_from</span><span
              class="method-args">(cartridges)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="suggest_name_from-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 58</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">suggest_name_from</span>(<span class="ruby-identifier">cartridges</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">cartridges</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-identifier">cartridges</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">present?</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span> = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">find</span>(&amp;<span class="ruby-value">:web_framework?</span>)
          <span class="ruby-keyword">return</span> <span class="ruby-identifier">safe_name</span>(<span class="ruby-identifier">c</span>.<span class="ruby-identifier">suggest_name</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">c</span> = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">find</span>(&amp;<span class="ruby-value">:custom?</span>)
          <span class="ruby-keyword">return</span> <span class="ruby-identifier">safe_name</span>(<span class="ruby-identifier">c</span>.<span class="ruby-identifier">suggest_name</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- suggest_name_from-source -->
            
          </div>

          

          
        </div><!-- suggest_name_from-method -->

      
        <div id="validate_user_env_variables-method" class="method-detail ">
          <a name="method-c-validate_user_env_variables"></a>

          
          <div class="method-heading">
            <span class="method-name">validate_user_env_variables</span><span
              class="method-args">(user_env_vars, no_delete=false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="validate_user_env_variables-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2844</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">validate_user_env_variables</span>(<span class="ruby-identifier">user_env_vars</span>, <span class="ruby-identifier">no_delete</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">user_env_vars</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">user_env_vars</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>) <span class="ruby-keyword">or</span> <span class="ruby-operator">!</span><span class="ruby-identifier">user_env_vars</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Invalid environment variables: expected array of hashes&quot;</span>, <span class="ruby-value">186</span>, <span class="ruby-string">&quot;environment_variables&quot;</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">keys</span> = {}
    <span class="ruby-identifier">user_env_vars</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ev</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-identifier">ev</span>[<span class="ruby-string">'name'</span>]
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword">and</span> (<span class="ruby-identifier">ev</span>.<span class="ruby-identifier">keys</span> <span class="ruby-operator">-</span> [<span class="ruby-string">'name'</span>, <span class="ruby-string">'value'</span>]).<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid environment variable #{ev}. Valid keys 'name'(required), 'value'&quot;</span>, <span class="ruby-value">187</span>, <span class="ruby-string">&quot;environment_variables&quot;</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid environment variable name #{name}: specified multiple times&quot;</span>, <span class="ruby-value">188</span>, <span class="ruby-string">&quot;environment_variables&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">keys</span>[<span class="ruby-identifier">name</span>]
      <span class="ruby-identifier">keys</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-keyword">true</span>
      <span class="ruby-identifier">match</span> = <span class="ruby-regexp">/\A([a-zA-Z_][\w]*)\z/</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">name</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Name can only contain letters, digits and underscore and can't begin with a digit.&quot;</span>, <span class="ruby-value">194</span>, <span class="ruby-string">&quot;name&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">match</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">no_delete</span>
      <span class="ruby-identifier">set_vars</span>, <span class="ruby-identifier">unset_vars</span> = <span class="ruby-identifier">sanitize_user_env_variables</span>(<span class="ruby-identifier">user_env_vars</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Environment variable deletion not allowed for this operation&quot;</span>, <span class="ruby-value">193</span>, <span class="ruby-string">&quot;environment_variables&quot;</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">unset_vars</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- validate_user_env_variables-source -->
            
          </div>

          

          
        </div><!-- validate_user_env_variables-method -->

      
        <div id="validation_map-method" class="method-detail ">
          <a name="method-c-validation_map"></a>

          
          <div class="method-heading">
            <span class="method-name">validation_map</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns a map of field to error code for validation failures</p>
<ul><li>
<p>105: Invalid application name</p>
</li></ul>
            

            
            <div class="method-source-code" id="validation_map-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 160</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">validation_map</span>
  {<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-value">105</span>}
<span class="ruby-keyword">end</span></pre>
            </div><!-- validation_map-source -->
            
          </div>

          

          
        </div><!-- validation_map-method -->

      
        <div id="with_gear_counts-method" class="method-detail ">
          <a name="method-c-with_gear_counts"></a>

          
          <div class="method-heading">
            <span class="method-name">with_gear_counts</span><span
              class="method-args">(domains=queryable)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Return a count of the gears for each application identified by the current
query.  Returns an array of hashes including:</p>

<pre>'_id': application id
'domain_id': domain id
'gear_sizes': hash of gear size strings to counts</pre>
            

            
            <div class="method-source-code" id="with_gear_counts-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">with_gear_counts</span>(<span class="ruby-identifier">domains</span>=<span class="ruby-identifier">queryable</span>)
  <span class="ruby-identifier">apps_info</span> = []
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">in</span>(<span class="ruby-identifier">domain_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">domains</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:_id</span>)).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">app</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">gear_sizes</span> = {}
    <span class="ruby-identifier">app</span>.<span class="ruby-identifier">group_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gi</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">gear_sz</span> = <span class="ruby-identifier">gi</span>.<span class="ruby-identifier">gear_size</span>
      <span class="ruby-identifier">gear_sizes</span>[<span class="ruby-identifier">gear_sz</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">gear_sizes</span>[<span class="ruby-identifier">gear_sz</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">gi</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">gi</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">app</span>.<span class="ruby-identifier">group_instances</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-identifier">apps_info</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-string">&quot;_id&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">app</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-string">&quot;domain_id&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">app</span>.<span class="ruby-identifier">domain_id</span>, <span class="ruby-string">&quot;gear_sizes&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">gear_sizes</span>} 
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">apps_info</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- with_gear_counts-source -->
            
          </div>

          

          
        </div><!-- with_gear_counts-method -->

      
      </div><!-- public-class-method-details -->
    
      <div id="protected-class-method-details" class="method-section section">
        <h3 class="section-header">Protected Class Methods</h3>

      
        <div id="rescue_parent_missing-method" class="method-detail ">
          <a name="method-c-rescue_parent_missing"></a>

          
          <div class="method-heading">
            <span class="method-name">rescue_parent_missing</span><span
              class="method-args">(e, options=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="rescue_parent_missing-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 258</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">rescue_parent_missing</span>(<span class="ruby-identifier">e</span>, <span class="ruby-identifier">options</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">parent</span> = <span class="ruby-constant">RestApi</span><span class="ruby-operator">::</span><span class="ruby-constant">ResourceNotFound</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Domain</span>.<span class="ruby-identifier">model_name</span>, (<span class="ruby-identifier">options</span>[<span class="ruby-value">:params</span>][<span class="ruby-value">:domain_id</span>] <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>), <span class="ruby-identifier">e</span>.<span class="ruby-identifier">response</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-identifier">parent</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">domain_missing?</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- rescue_parent_missing-source -->
            
          </div>

          

          
        </div><!-- rescue_parent_missing-method -->

      
      </div><!-- protected-class-method-details -->
    
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="activate-method" class="method-detail ">
          <a name="method-i-activate"></a>

          
          <div class="method-heading">
            <span class="method-name">activate</span><span
              class="method-args">(deployment_id)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="activate-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2919</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">activate</span>(<span class="ruby-identifier">deployment_id</span>)
  <span class="ruby-identifier">deployment</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">deployments</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">deployment_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">deployment_id</span>)
  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">ActivateOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">deployment_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">deployment_id</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result_io</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- activate-source -->
            
          </div>

          

          
        </div><!-- activate-method -->

      
        <div id="add_alias-method" class="method-detail ">
          <a name="method-i-add_alias"></a>

          
          <div class="method-heading">
            <span class="method-name">add_alias</span><span
              class="method-args">(fqdn, ssl_certificate=nil, private_key=nil, pass_phrase="")</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Register a DNS alias for the application.</p>

<h2>Parameters:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>fqdn</p></td>
<td>
<p>Fully qualified domain name of the alias to associate with this application</p>
</td></tr><tr><td class="rdoc-term"><p>ssl_certificate</p></td>
<td>
<p>SSL certificate to add</p>
</td></tr></table>

<p>private_key::Private key for the SSL certificate pass_phrase::Optional
passphrase for the private key</p>

<h2>Returns:</h2>

<p>{PendingAppOps} object which tracks the progress of the operation.</p>

<h2>Raises:</h2>

<p><a href="OpenShift/UserException.html">OpenShift::UserException</a> if the
alias is already been associated with an application.</p>
            

            
            <div class="method-source-code" id="add_alias-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1116</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_alias</span>(<span class="ruby-identifier">fqdn</span>, <span class="ruby-identifier">ssl_certificate</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">private_key</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">pass_phrase</span>=<span class="ruby-string">&quot;&quot;</span>)
  <span class="ruby-comment"># Server aliases validate as DNS host names in accordance with RFC</span>
  <span class="ruby-comment"># 1123 and RFC 952.  Additionally, OpenShift does not allow an</span>
  <span class="ruby-comment"># Alias to be an IP address or a host in the service domain.</span>
  <span class="ruby-comment"># Since DNS is case insensitive, all names are downcased for</span>
  <span class="ruby-comment"># indexing/compares.</span>
  <span class="ruby-identifier">server_alias</span> = <span class="ruby-identifier">fqdn</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">fqdn</span>
  <span class="ruby-keyword">if</span>  (<span class="ruby-identifier">server_alias</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-keyword">or</span>
      (<span class="ruby-identifier">server_alias</span> <span class="ruby-operator">=~</span> <span class="ruby-node">/#{Rails.configuration.openshift[:domain_suffix]}$/</span>) <span class="ruby-keyword">or</span>
      (<span class="ruby-identifier">server_alias</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">255</span> ) <span class="ruby-keyword">or</span>
      (<span class="ruby-identifier">server_alias</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> ) <span class="ruby-keyword">or</span>
      (<span class="ruby-identifier">server_alias</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\d+\.\d+\.\d+\.\d+$/</span>) <span class="ruby-keyword">or</span>
      (<span class="ruby-identifier">server_alias</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\A[\S]+(\.(json|xml|yml|yaml|html|xhtml))\z/</span>) <span class="ruby-keyword">or</span>
      (<span class="ruby-keyword">not</span> <span class="ruby-identifier">server_alias</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp">/\A[a-z0-9]+([\.]?[\-a-z0-9]+)+\z/</span>))
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;The specified alias is not allowed: '#{server_alias}'&quot;</span>, <span class="ruby-value">105</span>, <span class="ruby-string">&quot;id&quot;</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">validate_certificate</span>(<span class="ruby-identifier">ssl_certificate</span>, <span class="ruby-identifier">private_key</span>, <span class="ruby-identifier">pass_phrase</span>)

  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Alias #{server_alias} is already registered&quot;</span>, <span class="ruby-value">140</span>, <span class="ruby-string">&quot;id&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-constant">Application</span>.<span class="ruby-identifier">where</span>(<span class="ruby-string">&quot;aliases.fqdn&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">server_alias</span>).<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">AddAliasOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fqdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">server_alias</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ssl_certificate</span>.<span class="ruby-identifier">present?</span>
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">AddSslCertOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fqdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">server_alias</span>, <span class="ruby-identifier">ssl_certificate</span><span class="ruby-operator">:</span> <span class="ruby-identifier">ssl_certificate</span>, <span class="ruby-identifier">private_key</span><span class="ruby-operator">:</span> <span class="ruby-identifier">private_key</span>, <span class="ruby-identifier">pass_phrase</span><span class="ruby-operator">:</span> <span class="ruby-identifier">pass_phrase</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_alias-source -->
            
          </div>

          

          
        </div><!-- add_alias-method -->

      
        <div id="add_env_variables-method" class="method-detail ">
          <a name="method-i-add_env_variables"></a>

          
          <div class="method-heading">
            <span class="method-name">add_env_variables</span><span
              class="method-args">(vars, parent_op=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds environment variables to all gears on the application. @param vars [<a
href="Array.html">Array</a>&lt;Hash&gt;] List of environment variables.
Each entry must contain key and value @param parent_op [PendingDomainOps]
object used to track this operation at a domain level @return [ResultIO]
Output from cartridges</p>
            

            
            <div class="method-source-code" id="add_env_variables-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 455</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_env_variables</span>(<span class="ruby-identifier">vars</span>, <span class="ruby-identifier">parent_op</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">add_env_vars</span><span class="ruby-operator">:</span> <span class="ruby-identifier">vars</span>, <span class="ruby-identifier">parent_op</span><span class="ruby-operator">:</span> <span class="ruby-identifier">parent_op</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_env_variables-source -->
            
          </div>

          

          
        </div><!-- add_env_variables-method -->

      
        <div id="add_features-method" class="method-detail ">
          <a name="method-i-add_features"></a>

          
          <div class="method-heading">
            <span class="method-name">add_features</span><span
              class="method-args">(features, group_overrides=[], init_git_url=nil, user_env_vars=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds components to the application @param features [<a
href="Array.html">Array</a>&lt;String&gt;] List of features to add to the
application. Each feature will be resolved to the cartridge which provides
it @param group_overrides [Array] List of group overrides @param
init_git_url [String] URL to git repository to retrieve application code
@return [ResultIO] Output from cartridges @raise [OpenShift::UserException]
Exception raised if there is any reason the feature/cartridge cannot be
added into the <a href="Application.html">Application</a></p>
            

            
            <div class="method-source-code" id="add_features-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 561</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_features</span>(<span class="ruby-identifier">features</span>, <span class="ruby-identifier">group_overrides</span>=[], <span class="ruby-identifier">init_git_url</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_env_vars</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ssl_endpoint</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">application</span>.<span class="ruby-identifier">config</span>.<span class="ruby-identifier">openshift</span>[<span class="ruby-value">:ssl_endpoint</span>]
  <span class="ruby-identifier">cart_name_map</span> = {}

  <span class="ruby-identifier">features</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feature_name</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature_name</span>, <span class="ruby-keyword">self</span>)

    <span class="ruby-comment"># Make sure this is a valid cartridge</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid cartridge '#{feature_name}' specified.&quot;</span>, <span class="ruby-value">109</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># ensure that the user isn't trying to add multiple versions of the same cartridge</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart_name_map</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">original_name</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{cart.name} cannot co-exist with #{cart_name_map[cart.original_name]} in the same application&quot;</span>, <span class="ruby-value">109</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">cart_name_map</span>[<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">original_name</span>] = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">name</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_web_framework?</span>
      <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">is_web_framework?</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;You can only have one framework cartridge in your application '#{name}'.&quot;</span>, <span class="ruby-value">109</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_web_proxy?</span>
      <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">is_web_proxy?</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;You can only have one proxy cartridge in your application '#{name}'.&quot;</span>, <span class="ruby-value">109</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># check if the requested feature is provided by any existing/embedded application cartridge</span>
    <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">ci_cart</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">get_cartridge</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">ci_cart</span>.<span class="ruby-identifier">original_name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">original_name</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{feature_name} cannot co-exist with cartridge #{ci.cartridge_name} in your application&quot;</span>, <span class="ruby-value">109</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_web_framework?</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">endpoints</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">endpoints</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:each</span>)
      <span class="ruby-identifier">cart_req_ssl_endpoint</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">endpoints</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">endpoint</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">endpoint</span>.<span class="ruby-identifier">options</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">endpoint</span>.<span class="ruby-identifier">options</span>[<span class="ruby-string">&quot;ssl_to_gear&quot;</span>]
          <span class="ruby-identifier">cart_req_ssl_endpoint</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> (((<span class="ruby-identifier">ssl_endpoint</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;deny&quot;</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">cart_req_ssl_endpoint</span> ) <span class="ruby-keyword">or</span>
          ((<span class="ruby-identifier">ssl_endpoint</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;force&quot;</span>) <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">cart_req_ssl_endpoint</span>))
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid cartridge '#{feature_name}' conflicts with platform SSL_ENDPOINT setting.&quot;</span>, <span class="ruby-value">109</span>, <span class="ruby-string">&quot;cartridge&quot;</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Validate that the features support scalable if necessary</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_plugin?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_service?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_web_framework?</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{feature_name} cannot be embedded in scalable app '#{name}'.&quot;</span>, <span class="ruby-value">109</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># prevent a proxy from being added to a non-scalable (single-gear) application</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_web_proxy?</span> <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{feature_name} cannot be added to existing applications. It is automatically added when you create a scaling application.&quot;</span>, <span class="ruby-value">137</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_web_framework?</span>
      <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">profile_for_feature</span>(<span class="ruby-identifier">feature_name</span>)
      <span class="ruby-identifier">cart_scalable</span> = <span class="ruby-keyword">false</span>
      <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">components</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span>
         <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">min</span><span class="ruby-operator">==</span><span class="ruby-value">1</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">max</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>
         <span class="ruby-identifier">cart_scalable</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cart_scalable</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Scalable app cannot be of type '#{feature_name}'.&quot;</span>, <span class="ruby-value">109</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Validate that this feature either does not have the domain_scope category</span>
    <span class="ruby-comment"># or if it does, then no other application within the domain has this feature already</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_domain_scoped?</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">if</span> <span class="ruby-constant">Application</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">domain_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-string">&quot;component_instances.cartridge_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">name</span>).<span class="ruby-identifier">count</span>() <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
          <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;An application with #{feature_name} already exists within the domain. You can only have a single application with #{feature_name} within a domain.&quot;</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Mongoid</span><span class="ruby-operator">::</span><span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentNotFound</span>
        <span class="ruby-comment">#ignore</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">AddFeaturesOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">features</span><span class="ruby-operator">:</span> <span class="ruby-identifier">features</span>, <span class="ruby-identifier">group_overrides</span><span class="ruby-operator">:</span> <span class="ruby-identifier">group_overrides</span>, <span class="ruby-identifier">init_git_url</span><span class="ruby-operator">:</span> <span class="ruby-identifier">init_git_url</span>,
                                      <span class="ruby-identifier">user_env_vars</span><span class="ruby-operator">:</span> <span class="ruby-identifier">user_env_vars</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    
    <span class="ruby-comment"># if the app is not persisted, it means its an app creation request</span>
    <span class="ruby-comment"># in this case, calculate the pending_ops and execute the pre-save ones</span>
    <span class="ruby-comment"># this ensures that the app document is not saved without basic embedded documents in place </span>
    <span class="ruby-comment"># Note: when the scheduler is implemented, these steps (except the call to run_jobs) </span>
    <span class="ruby-comment"># will be moved out of the lock</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">elaborate</span>(<span class="ruby-keyword">self</span>)
      <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">pre_execute</span>(<span class="ruby-identifier">result_io</span>)
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">save!</span>
    <span class="ruby-keyword">rescue</span>
      <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">unreserve_gears</span>(<span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">num_gears_added</span>, <span class="ruby-keyword">self</span>)
      <span class="ruby-identifier">raise</span>
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">persisted?</span>

    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># adding this feature may have caused pending_ops to be created on the domain</span>
  <span class="ruby-comment"># for adding env vars and ssh keys</span>
  <span class="ruby-comment"># execute run_jobs on the domain to take care of those</span>
  <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">run_jobs</span>
  <span class="ruby-identifier">result_io</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_features-source -->
            
          </div>

          

          
        </div><!-- add_features-method -->

      
        <div id="add_sparse_cart-3F-method" class="method-detail ">
          <a name="method-i-add_sparse_cart-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">add_sparse_cart?</span><span
              class="method-args">(index, sparse_carts_added_count, cartridge, comp_spec, is_scale_up)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="add_sparse_cart-3F-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1850</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_sparse_cart?</span>(<span class="ruby-identifier">index</span>, <span class="ruby-identifier">sparse_carts_added_count</span>, <span class="ruby-identifier">cartridge</span>, <span class="ruby-identifier">comp_spec</span>, <span class="ruby-identifier">is_scale_up</span>)
  <span class="ruby-identifier">ci</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">cartridge_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">'cart'</span>], <span class="ruby-identifier">component_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">'comp'</span>]) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">gi</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">group_instance</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">cur_gears</span> =<span class="ruby-value">0</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">is_scale_up</span>
    <span class="ruby-identifier">cur_gears</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword">rescue</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">cur_gears</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">sparse_carts_added_count</span>
  <span class="ruby-identifier">cur_total_gears</span> =<span class="ruby-value">0</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">is_scale_up</span>
    <span class="ruby-identifier">cur_total_gears</span> = <span class="ruby-identifier">gi</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">length</span> <span class="ruby-keyword">rescue</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">cur_total_gears</span> <span class="ruby-operator">+=</span> (<span class="ruby-identifier">index</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)

  <span class="ruby-identifier">comp</span> = <span class="ruby-identifier">cartridge</span>.<span class="ruby-identifier">get_component</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;comp&quot;</span>])
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">is_sparse?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">gi</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">gi</span>.<span class="ruby-identifier">max</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">cur_total_gears</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">gi</span>.<span class="ruby-identifier">max</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">gi</span>.<span class="ruby-identifier">max</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>
        <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">cur_total_gears</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">max</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">max!</span>=<span class="ruby-value">-1</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">multiplier</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">multiplier</span> <span class="ruby-keyword">rescue</span> <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">multiplier</span>
  <span class="ruby-identifier">min</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">min</span> <span class="ruby-keyword">rescue</span> <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">min</span>
  <span class="ruby-identifier">max</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">max</span> <span class="ruby-keyword">rescue</span> <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">max</span>

  <span class="ruby-comment"># check on min first</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cur_gears</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">min</span>

  <span class="ruby-comment"># if min is met, but multiplier is infinite, return false</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">multiplier</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>

  <span class="ruby-comment"># for max, and cases where multiplier has been changed in apps mid-life</span>
  <span class="ruby-identifier">should_be_sparse_cart_count</span> = [<span class="ruby-identifier">cur_total_gears</span><span class="ruby-operator">/</span><span class="ruby-identifier">multiplier</span>, (<span class="ruby-identifier">max</span><span class="ruby-operator">==</span><span class="ruby-value">-1</span> <span class="ruby-operator">?</span> (<span class="ruby-identifier">cur_total_gears</span><span class="ruby-operator">/</span><span class="ruby-identifier">multiplier</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">max</span>)].<span class="ruby-identifier">min</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cur_gears</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">should_be_sparse_cart_count</span>

  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_sparse_cart-3F-source -->
            
          </div>

          

          
        </div><!-- add_sparse_cart-3F-method -->

      
        <div id="add_ssh_keys-method" class="method-detail ">
          <a name="method-i-add_ssh_keys"></a>

          
          <div class="method-heading">
            <span class="method-name">add_ssh_keys</span><span
              class="method-args">(user_id, keys, parent_op=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds the given ssh key to the application. @param user_id [String] The ID
of the user associated with the keys. If the user ID is nil, then the key
is assumed to be a system generated key @param keys [<a
href="Array.html">Array</a>&lt;SshKey&gt;] <a href="Array.html">Array</a>
of keys to add to the application. @param parent_op [PendingDomainOps]
object used to track this operation at a domain level @return [ResultIO]
Output from cartridges</p>
            

            
            <div class="method-source-code" id="add_ssh_keys-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 372</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_ssh_keys</span>(<span class="ruby-identifier">user_id</span>, <span class="ruby-identifier">keys</span>, <span class="ruby-identifier">parent_op</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">keys_attrs</span> = <span class="ruby-identifier">get_updated_ssh_keys</span>(<span class="ruby-identifier">user_id</span>, <span class="ruby-identifier">keys</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">user_id</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Ability</span>.<span class="ruby-identifier">has_permission?</span>(<span class="ruby-identifier">user_id</span>, <span class="ruby-value">:ssh_to_gears</span>, <span class="ruby-constant">Application</span>, <span class="ruby-identifier">role_for</span>(<span class="ruby-identifier">user_id</span>), <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">add_keys_attrs</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span>, <span class="ruby-identifier">parent_op</span><span class="ruby-operator">:</span> <span class="ruby-identifier">parent_op</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_ssh_keys-source -->
            
          </div>

          

          
        </div><!-- add_ssh_keys-method -->

      
        <div id="aliases-method" class="method-detail ">
          <a name="method-i-aliases"></a>

          
          <div class="method-heading">
            <span class="method-name">aliases</span><span
              class="method-args">(skip_cache=false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="aliases-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 148</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">aliases</span>(<span class="ruby-identifier">skip_cache</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">attributes</span>[<span class="ruby-value">:aliases</span>] = <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">skip_cache</span> <span class="ruby-keyword">or</span> <span class="ruby-operator">!</span><span class="ruby-identifier">attributes</span>[<span class="ruby-value">:aliases</span>]
      <span class="ruby-identifier">persisted?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Alias</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-identifier">child_options</span>) <span class="ruby-operator">:</span> []
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">attributes</span>[<span class="ruby-value">:aliases</span>]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- aliases-source -->
            
          </div>

          

          
        </div><!-- aliases-method -->

      
        <div id="builds-3F-method" class="method-detail ">
          <a name="method-i-builds-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">builds?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="builds-3F-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">builds?</span>
  <span class="ruby-identifier">building_with</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- builds-3F-source -->
            
          </div>

          

          
        </div><!-- builds-3F-method -->

      
        <div id="calculate_add_component_ops-method" class="method-detail ">
          <a name="method-i-calculate_add_component_ops"></a>

          
          <div class="method-heading">
            <span class="method-name">calculate_add_component_ops</span><span
              class="method-args">(comp_specs, group_instance_id, deploy_gear_id, gear_id_prereqs, component_ops, is_scale_up, prereq_id, init_git_url=nil, app_dns_gear_id=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="calculate_add_component_ops-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1892</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_add_component_ops</span>(<span class="ruby-identifier">comp_specs</span>, <span class="ruby-identifier">group_instance_id</span>, <span class="ruby-identifier">deploy_gear_id</span>, <span class="ruby-identifier">gear_id_prereqs</span>, <span class="ruby-identifier">component_ops</span>, <span class="ruby-identifier">is_scale_up</span>, <span class="ruby-identifier">prereq_id</span>, <span class="ruby-identifier">init_git_url</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">app_dns_gear_id</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">ops</span> = []

  <span class="ruby-identifier">comp_specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">comp_spec</span>] = {<span class="ruby-identifier">new_component</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">adds</span><span class="ruby-operator">:</span> [], <span class="ruby-identifier">post_configures</span><span class="ruby-operator">:</span> [], <span class="ruby-identifier">expose_ports</span><span class="ruby-operator">:</span> []} <span class="ruby-keyword">if</span> <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">comp_spec</span>].<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">cartridge</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-keyword">self</span>)

    <span class="ruby-identifier">new_component_op_id</span> = []
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_instances</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">group_instance_id</span>).<span class="ruby-identifier">exists?</span> <span class="ruby-keyword">and</span> (<span class="ruby-keyword">not</span> <span class="ruby-identifier">is_scale_up</span>)
      <span class="ruby-identifier">new_component_op</span> = <span class="ruby-constant">NewCompOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">group_instance_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">group_instance_id</span>, <span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>, <span class="ruby-identifier">cartridge_vendor</span><span class="ruby-operator">:</span> <span class="ruby-identifier">cartridge</span>.<span class="ruby-identifier">cartridge_vendor</span>, <span class="ruby-identifier">version</span><span class="ruby-operator">:</span> <span class="ruby-identifier">cartridge</span>.<span class="ruby-identifier">version</span>)
      <span class="ruby-identifier">new_component_op</span>.<span class="ruby-identifier">prereq</span> = [<span class="ruby-identifier">prereq_id</span>] <span class="ruby-keyword">unless</span> <span class="ruby-identifier">prereq_id</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">comp_spec</span>][<span class="ruby-value">:new_component</span>] = <span class="ruby-identifier">new_component_op</span>
      <span class="ruby-identifier">new_component_op_id</span> = [<span class="ruby-identifier">new_component_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>]
      <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">new_component_op</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">sparse_carts_added_count</span> =<span class="ruby-value">0</span>
    <span class="ruby-identifier">gear_id_prereqs</span>.<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">prereq</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">prereq_id</span> = <span class="ruby-identifier">prereq</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">add_sparse_cart?</span>(<span class="ruby-identifier">index</span>, <span class="ruby-identifier">sparse_carts_added_count</span>, <span class="ruby-identifier">cartridge</span>, <span class="ruby-identifier">comp_spec</span>, <span class="ruby-identifier">is_scale_up</span>)
      <span class="ruby-identifier">sparse_carts_added_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">git_url</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-identifier">git_url</span> = <span class="ruby-identifier">init_git_url</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">gear_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">deploy_gear_id</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">cartridge</span>.<span class="ruby-identifier">is_deployable?</span>
      <span class="ruby-identifier">add_component_op</span> = <span class="ruby-constant">AddCompOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>, <span class="ruby-identifier">init_git_url</span><span class="ruby-operator">:</span> <span class="ruby-identifier">git_url</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">new_component_op_id</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">prereq_id</span>])
      <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">add_component_op</span>
      <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">comp_spec</span>][<span class="ruby-value">:adds</span>].<span class="ruby-identifier">push</span> <span class="ruby-identifier">add_component_op</span>
      <span class="ruby-identifier">usage_op_prereq</span> = [<span class="ruby-identifier">add_component_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>]

      <span class="ruby-comment"># in case of deployable carts, the post-configure op is executed at the end</span>
      <span class="ruby-comment"># to ensure this, it is removed from the prerequisite list for any other pending_op</span>
      <span class="ruby-comment"># to avoid issues, pending_ops should not depend ONLY on post-configure op to manage execution order</span>
      <span class="ruby-keyword">unless</span> (<span class="ruby-identifier">gear_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">app_dns_gear_id</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">cartridge</span>.<span class="ruby-identifier">is_deployable?</span>
        <span class="ruby-identifier">post_configure_op</span> = <span class="ruby-constant">PostConfigureCompOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>, <span class="ruby-identifier">init_git_url</span><span class="ruby-operator">:</span> <span class="ruby-identifier">git_url</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">add_component_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-operator">+</span> [<span class="ruby-identifier">prereq_id</span>])
        <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">post_configure_op</span>
        <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">comp_spec</span>][<span class="ruby-value">:post_configures</span>].<span class="ruby-identifier">push</span> <span class="ruby-identifier">post_configure_op</span>
        <span class="ruby-identifier">usage_op_prereq</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">post_configure_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>]
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">TrackUsageOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">parent_user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">parent_user_id</span>,
        <span class="ruby-identifier">app_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">event</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EVENTS</span>[<span class="ruby-value">:begin</span>], <span class="ruby-identifier">cart_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>],
        <span class="ruby-identifier">usage_type</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">USAGE_TYPES</span>[<span class="ruby-value">:premium_cart</span>], <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">usage_op_prereq</span>)) <span class="ruby-keyword">if</span> <span class="ruby-identifier">cartridge</span>.<span class="ruby-identifier">is_premium?</span>

     <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>
      <span class="ruby-identifier">op</span> = <span class="ruby-constant">ExposePortOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">usage_op_prereq</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">prereq_id</span>])
      <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">comp_spec</span>][<span class="ruby-value">:expose_ports</span>].<span class="ruby-identifier">push</span> <span class="ruby-identifier">op</span>
      <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op</span>
     <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">ops</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- calculate_add_component_ops-source -->
            
          </div>

          

          
        </div><!-- calculate_add_component_ops-method -->

      
        <div id="calculate_component_orders-method" class="method-detail ">
          <a name="method-i-calculate_component_orders"></a>

          
          <div class="method-heading">
            <span class="method-name">calculate_component_orders</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the start/stop order specified in the application descriptor or
processes the start and stop orders for each component and returns the
final order (topological sort).</p>

<h2>Returns:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>start_order</p></td>
<td>
<p>{ComponentInstance} objects ordered by calculated start order</p>
</td></tr><tr><td class="rdoc-term"><p>stop_order</p></td>
<td>
<p>{ComponentInstance} objects ordered by calculated stop order</p>
</td></tr></table>
            

            
            <div class="method-source-code" id="calculate_component_orders-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2654</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_component_orders</span>
  <span class="ruby-identifier">start_order</span> = <span class="ruby-constant">ComponentOrder</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">stop_order</span> = <span class="ruby-constant">ComponentOrder</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">comps</span> = []
  <span class="ruby-identifier">categories</span> = {}

  <span class="ruby-comment">#build a map of [categories, features, cart name] =&gt; component_instance</span>
  <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_inst</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">cartridge_name</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">get_profile_for_component</span>(<span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">component_name</span>)

    <span class="ruby-identifier">comps</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-identifier">cart</span><span class="ruby-operator">:</span> <span class="ruby-identifier">cart</span>, <span class="ruby-identifier">prof</span><span class="ruby-operator">:</span> <span class="ruby-identifier">prof</span>}
    [[<span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">cartridge_name</span>],<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">categories</span>,<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">provides</span>,<span class="ruby-identifier">prof</span>.<span class="ruby-identifier">provides</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cat</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">cat</span>] = [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">cat</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">cat</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">comp_inst</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">start_order</span>.<span class="ruby-identifier">add_component_order</span>([<span class="ruby-identifier">comp_inst</span>])
    <span class="ruby-identifier">stop_order</span>.<span class="ruby-identifier">add_component_order</span>([<span class="ruby-identifier">comp_inst</span>])
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">#use the map to build DAG for order calculation</span>
  <span class="ruby-identifier">comps</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">start_order</span>.<span class="ruby-identifier">add_component_order</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-value">:prof</span>].<span class="ruby-identifier">start_order</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">c</span>]}.<span class="ruby-identifier">flatten</span>)
    <span class="ruby-identifier">stop_order</span>.<span class="ruby-identifier">add_component_order</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-value">:prof</span>].<span class="ruby-identifier">stop_order</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">c</span>]}.<span class="ruby-identifier">flatten</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># enforce system order of components (web_framework first etc)</span>
  <span class="ruby-identifier">enforce_system_order</span>(<span class="ruby-identifier">start_order</span>, <span class="ruby-identifier">categories</span>)
  <span class="ruby-identifier">enforce_system_order</span>(<span class="ruby-identifier">stop_order</span>, <span class="ruby-identifier">categories</span>)

  <span class="ruby-comment">#calculate start order using tsort</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_start_order</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">computed_start_order</span> = <span class="ruby-identifier">start_order</span>.<span class="ruby-identifier">tsort</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Conflict in calculating start order. Cartridges should adhere to system's order ('web_framework','service','plugin').&quot;</span>, <span class="ruby-value">109</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">computed_start_order</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_start_order</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">c</span>]}.<span class="ruby-identifier">flatten</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">#calculate stop order using tsort</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_stop_order</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">computed_stop_order</span> = <span class="ruby-identifier">stop_order</span>.<span class="ruby-identifier">tsort</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Conflict in calculating start order. Cartridges should adhere to system's order ('web_framework','service','plugin').&quot;</span>, <span class="ruby-value">109</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">computed_stop_order</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_stop_order</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">c</span>]}.<span class="ruby-identifier">flatten</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># start/stop order can have nil if the component is not present in the application</span>
  <span class="ruby-comment"># for eg, php is being stopped and haproxy is not present in a non-scalable application</span>
  <span class="ruby-identifier">computed_start_order</span> = <span class="ruby-identifier">computed_start_order</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">co</span><span class="ruby-operator">|</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">co</span>.<span class="ruby-identifier">nil?</span> }
  <span class="ruby-identifier">computed_stop_order</span> = <span class="ruby-identifier">computed_stop_order</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">co</span><span class="ruby-operator">|</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">co</span>.<span class="ruby-identifier">nil?</span> }

  [<span class="ruby-identifier">computed_start_order</span>, <span class="ruby-identifier">computed_stop_order</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- calculate_component_orders-source -->
            
          </div>

          

          
        </div><!-- calculate_component_orders-method -->

      
        <div id="calculate_configure_order-method" class="method-detail ">
          <a name="method-i-calculate_configure_order"></a>

          
          <div class="method-heading">
            <span class="method-name">calculate_configure_order</span><span
              class="method-args">(comp_specs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the configure order specified in the application descriptor or
processes the configure orders for each component and returns the final
order (topological sort). @note This is calculates separately from
start/stop order as this function is usually used to</p>

<pre>compute the {PendingAppOps} while start/stop order applies to already configured components.</pre>

<h2>Parameters:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>comp_specs</p></td>
<td>
<p><a href="Array.html">Array</a> of components specs to order.</p>
</td></tr></table>

<h2>Returns:</h2>

<p>{ComponentInstance} objects ordered by calculated configure order</p>
            

            
            <div class="method-source-code" id="calculate_configure_order-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2588</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_configure_order</span>(<span class="ruby-identifier">comp_specs</span>)
  <span class="ruby-identifier">configure_order</span> = <span class="ruby-constant">ComponentOrder</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-identifier">existing_categories</span> = {}
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_inst</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">cartridge_name</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">get_profile_for_component</span>(<span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">component_name</span>)

    [[<span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">cartridge_name</span>],<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">categories</span>,<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">provides</span>,<span class="ruby-identifier">prof</span>.<span class="ruby-identifier">provides</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cat</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">existing_categories</span>[<span class="ruby-identifier">cat</span>] = [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">existing_categories</span>[<span class="ruby-identifier">cat</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">existing_categories</span>[<span class="ruby-identifier">cat</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">to_hash</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">comps</span> = []
  <span class="ruby-identifier">categories</span> = {}
  <span class="ruby-identifier">comp_specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_inst</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">comp_inst</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">get_profile_for_component</span>(<span class="ruby-identifier">comp_inst</span>[<span class="ruby-string">&quot;comp&quot;</span>])

    <span class="ruby-identifier">comps</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-identifier">cart</span><span class="ruby-operator">:</span> <span class="ruby-identifier">cart</span>, <span class="ruby-identifier">prof</span><span class="ruby-operator">:</span> <span class="ruby-identifier">prof</span>}
    [[<span class="ruby-identifier">comp_inst</span>[<span class="ruby-string">&quot;cart&quot;</span>]],<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">categories</span>,<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">provides</span>,<span class="ruby-identifier">prof</span>.<span class="ruby-identifier">provides</span>].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cat</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">cat</span>] = [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">cat</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">cat</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">comp_inst</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">configure_order</span>.<span class="ruby-identifier">add_component_order</span>([<span class="ruby-identifier">comp_inst</span>])
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">#use the map to build DAG for order calculation</span>
  <span class="ruby-identifier">comps</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">comp_spec</span>[<span class="ruby-value">:prof</span>].<span class="ruby-identifier">configure_order</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dep_cart</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">categories</span>[<span class="ruby-identifier">dep_cart</span>] <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">existing_categories</span>[<span class="ruby-identifier">dep_cart</span>]
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Cartridge '#{comp_spec[:cart].name}' can not be added without cartridge '#{dep_cart}'.&quot;</span>, <span class="ruby-value">185</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">configure_order</span>.<span class="ruby-identifier">add_component_order</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-value">:prof</span>].<span class="ruby-identifier">configure_order</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">c</span>]}.<span class="ruby-identifier">flatten</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># enforce system order of components (web_framework first etc)</span>
  <span class="ruby-identifier">enforce_system_order</span>(<span class="ruby-identifier">configure_order</span>, <span class="ruby-identifier">categories</span>)

  <span class="ruby-comment">#calculate configure order using tsort</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_configure_order</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">computed_configure_order</span> = <span class="ruby-identifier">configure_order</span>.<span class="ruby-identifier">tsort</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Conflict in calculating configure order. Cartridges should adhere to system's order ('web_framework','service','plugin').&quot;</span>, <span class="ruby-value">109</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">computed_configure_order</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_configure_order</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">categories</span>[<span class="ruby-identifier">c</span>]}.<span class="ruby-identifier">flatten</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># configure order can have nil if the component is already configured</span>
  <span class="ruby-comment"># for eg, phpmyadmin is being added and it is the only component being passed/added</span>
  <span class="ruby-comment"># this could happen if mysql is already previously configured</span>
  <span class="ruby-identifier">computed_configure_order</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">co</span><span class="ruby-operator">|</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">co</span>.<span class="ruby-identifier">nil?</span> }
<span class="ruby-keyword">end</span></pre>
            </div><!-- calculate_configure_order-source -->
            
          </div>

          

          
        </div><!-- calculate_configure_order-method -->

      
        <div id="calculate_gear_create_ops-method" class="method-detail ">
          <a name="method-i-calculate_gear_create_ops"></a>

          
          <div class="method-heading">
            <span class="method-name">calculate_gear_create_ops</span><span
              class="method-args">(ginst_id, gear_ids, deploy_gear_id, comp_specs, component_ops, additional_filesystem_gb, gear_size, prereq_op=nil, is_scale_up=false, hosts_app_dns=false, init_git_url=nil, user_env_vars=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="calculate_gear_create_ops-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1664</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_gear_create_ops</span>(<span class="ruby-identifier">ginst_id</span>, <span class="ruby-identifier">gear_ids</span>, <span class="ruby-identifier">deploy_gear_id</span>, <span class="ruby-identifier">comp_specs</span>, <span class="ruby-identifier">component_ops</span>, <span class="ruby-identifier">additional_filesystem_gb</span>, <span class="ruby-identifier">gear_size</span>,
                              <span class="ruby-identifier">prereq_op</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">is_scale_up</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">hosts_app_dns</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">init_git_url</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_env_vars</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">pending_ops</span> = []

  <span class="ruby-identifier">gear_id_prereqs</span> = {}
  <span class="ruby-identifier">maybe_notify_app_create_op</span> = []
  <span class="ruby-identifier">app_dns_gear_id</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">gear_ids</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear_id</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">host_singletons</span> = (<span class="ruby-identifier">gear_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">deploy_gear_id</span>)
    <span class="ruby-identifier">app_dns</span> = (<span class="ruby-identifier">host_singletons</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">hosts_app_dns</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">app_dns</span>
      <span class="ruby-identifier">notify_app_create_op</span> = <span class="ruby-constant">NotifyAppCreateOp</span>.<span class="ruby-identifier">new</span>()
      <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">notify_app_create_op</span>)
      <span class="ruby-identifier">maybe_notify_app_create_op</span> = [<span class="ruby-identifier">notify_app_create_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>]
      <span class="ruby-identifier">app_dns_gear_id</span> = <span class="ruby-identifier">gear_id</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">init_gear_op</span> = <span class="ruby-constant">InitGearOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">group_instance_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">ginst_id</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, 
                                  <span class="ruby-identifier">comp_specs</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_specs</span>, <span class="ruby-identifier">host_singletons</span><span class="ruby-operator">:</span> <span class="ruby-identifier">host_singletons</span>, 
                                  <span class="ruby-identifier">app_dns</span><span class="ruby-operator">:</span> <span class="ruby-identifier">app_dns</span>, <span class="ruby-identifier">pre_save</span><span class="ruby-operator">:</span> (<span class="ruby-keyword">not</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">persisted?</span>))
    <span class="ruby-identifier">init_gear_op</span>.<span class="ruby-identifier">prereq</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">prereq_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">prereq_op</span>.<span class="ruby-identifier">nil?</span>

    <span class="ruby-identifier">reserve_uid_op</span> = <span class="ruby-constant">ReserveGearUidOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">maybe_notify_app_create_op</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">init_gear_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])

    <span class="ruby-identifier">create_gear_op</span> = <span class="ruby-constant">CreateGearOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">reserve_uid_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>], <span class="ruby-identifier">retry_rollback_op</span><span class="ruby-operator">:</span> <span class="ruby-identifier">reserve_uid_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>)

    <span class="ruby-identifier">track_usage_op</span> = <span class="ruby-constant">TrackUsageOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">parent_user_id</span><span class="ruby-operator">:</span>
                         <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">parent_user_id</span>, <span class="ruby-identifier">app_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>,
                         <span class="ruby-identifier">event</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EVENTS</span>[<span class="ruby-value">:begin</span>], <span class="ruby-identifier">usage_type</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">USAGE_TYPES</span>[<span class="ruby-value">:gear_usage</span>],
                         <span class="ruby-identifier">gear_size</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_size</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">create_gear_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])

    <span class="ruby-identifier">register_dns_op</span> = <span class="ruby-constant">RegisterDnsOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">create_gear_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])

    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">init_gear_op</span>)
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">reserve_uid_op</span>)
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">create_gear_op</span>)
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">track_usage_op</span>)
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">register_dns_op</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">additional_filesystem_gb</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">fs_op</span> = <span class="ruby-constant">SetAddtlFsGbOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">create_gear_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>],
                                 <span class="ruby-identifier">addtl_fs_gb</span><span class="ruby-operator">:</span> <span class="ruby-identifier">additional_filesystem_gb</span>, <span class="ruby-identifier">saved_addtl_fs_gb</span><span class="ruby-operator">:</span> <span class="ruby-value">0</span>)
      <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">fs_op</span>)

      <span class="ruby-identifier">track_usage_fs_op</span> = <span class="ruby-constant">TrackUsageOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">parent_user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">parent_user_id</span>,
                                           <span class="ruby-identifier">app_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">event</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EVENTS</span>[<span class="ruby-value">:begin</span>],
                                           <span class="ruby-identifier">usage_type</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">USAGE_TYPES</span>[<span class="ruby-value">:addtl_fs_gb</span>],
                                           <span class="ruby-identifier">additional_filesystem_gb</span><span class="ruby-operator">:</span> <span class="ruby-identifier">additional_filesystem_gb</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">fs_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])
      <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">track_usage_fs_op</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">gear_id_prereqs</span>[<span class="ruby-identifier">gear_id</span>] = <span class="ruby-identifier">register_dns_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">env_vars</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">env_vars</span>

  <span class="ruby-identifier">gear_id_prereqs</span>.<span class="ruby-identifier">each_key</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear_id</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">prereq</span> = <span class="ruby-identifier">gear_id_prereqs</span>[<span class="ruby-identifier">gear_id</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> [] <span class="ruby-operator">:</span> [<span class="ruby-identifier">gear_id_prereqs</span>[<span class="ruby-identifier">gear_id</span>]]
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">UpdateAppConfigOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">prereq</span>, <span class="ruby-identifier">recalculate_sshkeys</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">add_env_vars</span><span class="ruby-operator">:</span> <span class="ruby-identifier">env_vars</span>, <span class="ruby-identifier">config</span><span class="ruby-operator">:</span> (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">config</span> <span class="ruby-operator">||</span> {})))
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">app_dns_gear_id</span>
    <span class="ruby-identifier">prereq</span> = <span class="ruby-identifier">gear_id_prereqs</span>[<span class="ruby-identifier">app_dns_gear_id</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> [] <span class="ruby-operator">:</span> [<span class="ruby-identifier">gear_id_prereqs</span>[<span class="ruby-identifier">app_dns_gear_id</span>]]
    <span class="ruby-identifier">add_broker_auth_op</span> = <span class="ruby-constant">AddBrokerAuthKeyOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">app_dns_gear_id</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">prereq</span>)
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">add_broker_auth_op</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Add and/or push user env vars when this is not an app create or user_env_vars are specified</span>
  <span class="ruby-identifier">user_vars_op_id</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">maybe_notify_app_create_op</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">user_env_vars</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-identifier">op</span> = <span class="ruby-constant">PatchUserEnvVarsOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_env_vars</span><span class="ruby-operator">:</span> <span class="ruby-identifier">user_env_vars</span>, <span class="ruby-identifier">push_vars</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">op</span>)
    <span class="ruby-identifier">user_vars_op_id</span> = <span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">prereq_op_id</span> = <span class="ruby-identifier">prereq_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">ops</span> = <span class="ruby-identifier">calculate_add_component_ops</span>(<span class="ruby-identifier">comp_specs</span>, <span class="ruby-identifier">ginst_id</span>, <span class="ruby-identifier">deploy_gear_id</span>, <span class="ruby-identifier">gear_id_prereqs</span>, <span class="ruby-identifier">component_ops</span>, 
                                    <span class="ruby-identifier">is_scale_up</span>, (<span class="ruby-identifier">user_vars_op_id</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prereq_op_id</span>), <span class="ruby-identifier">init_git_url</span>, 
                                    <span class="ruby-identifier">app_dns_gear_id</span>)
  <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">ops</span>)

  <span class="ruby-identifier">pending_ops</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- calculate_gear_create_ops-source -->
            
          </div>

          

          
        </div><!-- calculate_gear_create_ops-method -->

      
        <div id="calculate_gear_destroy_ops-method" class="method-detail ">
          <a name="method-i-calculate_gear_destroy_ops"></a>

          
          <div class="method-heading">
            <span class="method-name">calculate_gear_destroy_ops</span><span
              class="method-args">(ginst_id, gear_ids, additional_filesystem_gb)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="calculate_gear_destroy_ops-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1749</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_gear_destroy_ops</span>(<span class="ruby-identifier">ginst_id</span>, <span class="ruby-identifier">gear_ids</span>, <span class="ruby-identifier">additional_filesystem_gb</span>)
  <span class="ruby-identifier">pending_ops</span> = []
  <span class="ruby-identifier">delete_gear_op</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">deleting_app</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">gear_ids</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear_id</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">deleting_app</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">gear_id</span>).<span class="ruby-identifier">app_dns</span>
    <span class="ruby-identifier">destroy_gear_op</span> = <span class="ruby-constant">DestroyGearOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>)
    <span class="ruby-identifier">deregister_dns_op</span> = <span class="ruby-constant">DeregisterDnsOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">destroy_gear_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])
    <span class="ruby-identifier">unreserve_uid_op</span> = <span class="ruby-constant">UnreserveGearUidOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">deregister_dns_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])
    <span class="ruby-identifier">delete_gear_op</span> = <span class="ruby-constant">DeleteGearOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">unreserve_uid_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])
    <span class="ruby-identifier">track_usage_op</span> = <span class="ruby-constant">TrackUsageOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">parent_user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">parent_user_id</span>,
                        <span class="ruby-identifier">app_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">event</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EVENTS</span>[<span class="ruby-value">:end</span>],
                        <span class="ruby-identifier">usage_type</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">USAGE_TYPES</span>[<span class="ruby-value">:gear_usage</span>], 
                        <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">delete_gear_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])

    <span class="ruby-identifier">ops</span> = []
    <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">destroy_gear_op</span>)
    <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">deregister_dns_op</span>)
    <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">unreserve_uid_op</span>)
    <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">delete_gear_op</span>)
    <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">track_usage_op</span>)

    <span class="ruby-identifier">remove_ssh_keys</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">app_ssh_keys</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">component_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>) <span class="ruby-keyword">rescue</span> []
    <span class="ruby-identifier">remove_ssh_keys</span> = [<span class="ruby-identifier">remove_ssh_keys</span>].<span class="ruby-identifier">flatten</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_ssh_keys</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">keys_attrs</span> = <span class="ruby-identifier">remove_ssh_keys</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">dup</span>}
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">remove_keys_attrs</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
      <span class="ruby-constant">Application</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">_id</span>).<span class="ruby-identifier">update_all</span>({ <span class="ruby-string">&quot;$push&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">pending_op_groups</span><span class="ruby-operator">:</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">serializable_hash_with_timestamp</span> }, <span class="ruby-string">&quot;$pullAll&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">app_ssh_keys</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span> }})
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span> *<span class="ruby-identifier">ops</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">additional_filesystem_gb</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">track_usage_fs_op</span> = <span class="ruby-constant">TrackUsageOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">parent_user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">parent_user_id</span>,
        <span class="ruby-identifier">app_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">event</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EVENTS</span>[<span class="ruby-value">:end</span>], <span class="ruby-identifier">usage_type</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">USAGE_TYPES</span>[<span class="ruby-value">:addtl_fs_gb</span>],
        <span class="ruby-identifier">additional_filesystem_gb</span><span class="ruby-operator">:</span> <span class="ruby-identifier">additional_filesystem_gb</span>, 
        <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">delete_gear_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])
      <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">track_usage_fs_op</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">comp_specs</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_instances</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">ginst_id</span>).<span class="ruby-identifier">all_component_instances</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">to_hash</span> }
  <span class="ruby-identifier">comp_specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cartridge</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">gear_ids</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear_id</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">TrackUsageOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">parent_user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">parent_user_id</span>,
        <span class="ruby-identifier">app_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">event</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EVENTS</span>[<span class="ruby-value">:end</span>], <span class="ruby-identifier">cart_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>],
        <span class="ruby-identifier">usage_type</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">USAGE_TYPES</span>[<span class="ruby-value">:premium_cart</span>], 
        <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">delete_gear_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>]))
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cartridge</span>.<span class="ruby-identifier">is_premium?</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">deleting_app</span>
    <span class="ruby-identifier">notify_app_delete_op</span> = <span class="ruby-constant">NotifyAppDeleteOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">notify_app_delete_op</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">pending_ops</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- calculate_gear_destroy_ops-source -->
            
          </div>

          

          
        </div><!-- calculate_gear_destroy_ops-method -->

      
        <div id="calculate_ops-method" class="method-detail ">
          <a name="method-i-calculate_ops"></a>

          
          <div class="method-heading">
            <span class="method-name">calculate_ops</span><span
              class="method-args">(changes, moves=[], connections=nil, group_overrides=nil, init_git_url=nil, user_env_vars=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Given a set of changes, moves and connections, calculates all the
operations required to update the application.</p>

<h2>Parameters:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>changes</p></td>
<td>
<p>Changes needed to the current_group_instances to make it match the
new_group_instances. (Includes all adds/removes). (Output of {<a
href="Application.html#method-i-compute_diffs">compute_diffs</a>} or {<a
href="Application.html#method-i-scale_by">scale_by</a>})</p>
</td></tr><tr><td class="rdoc-term"><p>moves</p></td>
<td>
<p>A list of components which need to move from one group instance to another.
(Output of {<a
href="Application.html#method-i-compute_diffs">compute_diffs</a>})</p>
</td></tr><tr><td class="rdoc-term"><p>connections</p></td>
<td>
<p>An array of connections. (Output of {<a
href="Application.html#method-i-elaborate">elaborate</a>})</p>
</td></tr></table>
            

            
            <div class="method-source-code" id="calculate_ops-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1986</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_ops</span>(<span class="ruby-identifier">changes</span>, <span class="ruby-identifier">moves</span>=[], <span class="ruby-identifier">connections</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">group_overrides</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">init_git_url</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_env_vars</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">app_dns_ginst_found</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">add_gears</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">remove_gears</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">pending_ops</span> = []
  <span class="ruby-identifier">start_order</span>, <span class="ruby-identifier">stop_order</span> = <span class="ruby-identifier">calculate_component_orders</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">group_overrides</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">set_group_override_op</span> = <span class="ruby-constant">SetGroupOverridesOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">group_overrides</span><span class="ruby-operator">:</span> <span class="ruby-identifier">group_overrides</span>, 
                                                    <span class="ruby-identifier">saved_group_overrides</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_overrides</span>, 
                                                    <span class="ruby-identifier">pre_save</span><span class="ruby-operator">:</span> (<span class="ruby-keyword">not</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">persisted?</span>))
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">set_group_override_op</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">component_ops</span> = {}
  <span class="ruby-comment"># Create group instances and gears in preparation for move or add component operations</span>
  <span class="ruby-identifier">create_ginst_changes</span> = <span class="ruby-identifier">changes</span>.<span class="ruby-identifier">select</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">change</span><span class="ruby-operator">|</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from</span>].<span class="ruby-identifier">nil?</span> }
  <span class="ruby-identifier">create_ginst_changes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">change</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">ginst_scale</span> = (<span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:current</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:min</span>]) <span class="ruby-operator">||</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">ginst_scale</span> = <span class="ruby-value">1</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>
    <span class="ruby-identifier">ginst_id</span>    = <span class="ruby-identifier">change</span>[<span class="ruby-value">:to</span>]
    <span class="ruby-identifier">gear_size</span> = <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:gear_size</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">default_gear_size</span>
    <span class="ruby-identifier">additional_filesystem_gb</span> = <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">add_gears</span>   <span class="ruby-operator">+=</span> <span class="ruby-identifier">ginst_scale</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ginst_scale</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>

    <span class="ruby-identifier">comp_specs</span> = <span class="ruby-identifier">change</span>[<span class="ruby-value">:added</span>]
    <span class="ruby-identifier">app_dns_ginst</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">comp_specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">cats</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-keyword">self</span>).<span class="ruby-identifier">categories</span>
      <span class="ruby-identifier">app_dns_ginst</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> ((<span class="ruby-keyword">not</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>) <span class="ruby-keyword">and</span> <span class="ruby-identifier">cats</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;web_framework&quot;</span>)) <span class="ruby-operator">||</span> <span class="ruby-identifier">cats</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;web_proxy&quot;</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">gear_ids</span> = (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">ginst_scale</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">idx</span><span class="ruby-operator">|</span> <span class="ruby-constant">Moped</span><span class="ruby-operator">::</span><span class="ruby-constant">BSON</span><span class="ruby-operator">::</span><span class="ruby-constant">ObjectId</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_s</span>}
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">app_dns_ginst</span>
      <span class="ruby-identifier">deploy_gear_id</span> = <span class="ruby-identifier">gear_ids</span>[<span class="ruby-value">0</span>] = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">deploy_gear_id</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">ops</span> = <span class="ruby-identifier">calculate_gear_create_ops</span>(<span class="ruby-identifier">ginst_id</span>, <span class="ruby-identifier">gear_ids</span>, <span class="ruby-identifier">deploy_gear_id</span>, <span class="ruby-identifier">comp_specs</span>, <span class="ruby-identifier">component_ops</span>, <span class="ruby-identifier">additional_filesystem_gb</span>,
                                    <span class="ruby-identifier">gear_size</span>, <span class="ruby-identifier">set_group_override_op</span>, <span class="ruby-keyword">false</span>, <span class="ruby-identifier">app_dns_ginst</span>, <span class="ruby-identifier">init_git_url</span>, <span class="ruby-identifier">user_env_vars</span>)
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">ops</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">moves</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">move</span><span class="ruby-operator">|</span>
    <span class="ruby-comment">#ops.push(PendingAppOps.new(op_type: :move_component, args: move, flag_req_change: true))</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">user_vars_op_id</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">user_env_vars</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-identifier">changes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">change</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:added</span>].<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">op</span> = <span class="ruby-constant">PatchUserEnvVarsOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_env_vars</span><span class="ruby-operator">:</span> <span class="ruby-identifier">user_env_vars</span>)
        <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">op</span>)
        <span class="ruby-identifier">user_vars_op_id</span> = <span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>
        <span class="ruby-keyword">break</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">changes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">change</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">group_instance</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_instances</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">change</span>[<span class="ruby-value">:from</span>])
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to</span>].<span class="ruby-identifier">nil?</span>
        <span class="ruby-identifier">remove_gears</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:current</span>]

        <span class="ruby-identifier">group_instance_remove_ops</span> = <span class="ruby-identifier">calculate_remove_group_instance_ops</span>(<span class="ruby-identifier">change</span>[<span class="ruby-value">:removed</span>], <span class="ruby-identifier">group_instance</span>)
        <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">group_instance_remove_ops</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">scale_change</span> = <span class="ruby-value">0</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:current</span>].<span class="ruby-identifier">nil?</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:current</span>] <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:min</span>]
            <span class="ruby-identifier">scale_change</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:min</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:current</span>]
          <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">if</span>((<span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:current</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:max</span>]) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:max</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">-1</span>))
            <span class="ruby-identifier">scale_change</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:current</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:max</span>]
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">scale_change</span> <span class="ruby-operator">+=</span> (<span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:current</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:current</span>])
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">deploy_gear_id</span> = <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">app_dns</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">ops</span> = <span class="ruby-identifier">calculate_remove_component_ops</span>(<span class="ruby-identifier">change</span>[<span class="ruby-value">:removed</span>])
        <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">ops</span>)

        <span class="ruby-identifier">gear_id_prereqs</span> = {}
        <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">gear_id_prereqs</span>[<span class="ruby-identifier">g</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>] = []}
        <span class="ruby-identifier">ops</span> = <span class="ruby-identifier">calculate_add_component_ops</span>(<span class="ruby-identifier">change</span>[<span class="ruby-value">:added</span>], <span class="ruby-identifier">change</span>[<span class="ruby-value">:from</span>], <span class="ruby-identifier">deploy_gear_id</span>, <span class="ruby-identifier">gear_id_prereqs</span>, <span class="ruby-identifier">component_ops</span>, <span class="ruby-keyword">false</span>, <span class="ruby-identifier">user_vars_op_id</span>, <span class="ruby-keyword">nil</span>)
        <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">ops</span>)

        <span class="ruby-identifier">changed_additional_filesystem_gb</span> = <span class="ruby-keyword">nil</span>
        <span class="ruby-comment">#add/remove fs space from existing gears</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>] <span class="ruby-operator">!=</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>]
          <span class="ruby-identifier">changed_additional_filesystem_gb</span> = <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>]
          <span class="ruby-identifier">usage_prereq</span> = []
          <span class="ruby-identifier">usage_prereq</span> = [<span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">last</span>
          <span class="ruby-identifier">usage_ops</span> = []
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
            <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
              <span class="ruby-identifier">track_usage_old_fs_op</span> = <span class="ruby-constant">TrackUsageOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">parent_user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">parent_user_id</span>,
                <span class="ruby-identifier">app_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">event</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EVENTS</span>[<span class="ruby-value">:end</span>],
                <span class="ruby-identifier">usage_type</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">USAGE_TYPES</span>[<span class="ruby-value">:addtl_fs_gb</span>],
                <span class="ruby-identifier">additional_filesystem_gb</span><span class="ruby-operator">:</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>], <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">usage_prereq</span>)
              <span class="ruby-identifier">usage_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">track_usage_old_fs_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>)
              <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">track_usage_old_fs_op</span>)
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
          <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">fs_op</span> = <span class="ruby-constant">SetAddtlFsGbOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>,
                <span class="ruby-identifier">addtl_fs_gb</span><span class="ruby-operator">:</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>],
                <span class="ruby-identifier">saved_addtl_fs_gb</span><span class="ruby-operator">:</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:from_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>],
                <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> (<span class="ruby-identifier">usage_ops</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">usage_prereq</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">usage_ops</span>))
            <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">fs_op</span>)

            <span class="ruby-keyword">if</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
              <span class="ruby-identifier">track_usage_fs_op</span> = <span class="ruby-constant">TrackUsageOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">parent_user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">parent_user_id</span>,
                <span class="ruby-identifier">app_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">event</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EVENTS</span>[<span class="ruby-value">:begin</span>],
                <span class="ruby-identifier">usage_type</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">USAGE_TYPES</span>[<span class="ruby-value">:addtl_fs_gb</span>],
                <span class="ruby-identifier">additional_filesystem_gb</span><span class="ruby-operator">:</span> <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>], <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">fs_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])
              <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">track_usage_fs_op</span>)
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">scale_change</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
          <span class="ruby-identifier">add_gears</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">scale_change</span>
          <span class="ruby-identifier">comp_specs</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">group_instance_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">_id</span>).<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">to_hash</span>}
          <span class="ruby-identifier">deploy_gear_id</span> = <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">app_dns</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
          <span class="ruby-identifier">gear_ids</span> = (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">scale_change</span>).<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">idx</span><span class="ruby-operator">|</span> <span class="ruby-constant">Moped</span><span class="ruby-operator">::</span><span class="ruby-constant">BSON</span><span class="ruby-operator">::</span><span class="ruby-constant">ObjectId</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_s</span>}
          <span class="ruby-identifier">additional_filesystem_gb</span> = <span class="ruby-identifier">changed_additional_filesystem_gb</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">addtl_fs_gb</span>
          <span class="ruby-identifier">gear_size</span> = <span class="ruby-identifier">change</span>[<span class="ruby-value">:to_scale</span>][<span class="ruby-value">:gear_size</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">gear_size</span>

          <span class="ruby-identifier">ops</span> = <span class="ruby-identifier">calculate_gear_create_ops</span>(<span class="ruby-identifier">change</span>[<span class="ruby-value">:from</span>], <span class="ruby-identifier">gear_ids</span>, <span class="ruby-identifier">deploy_gear_id</span>, <span class="ruby-identifier">comp_specs</span>, <span class="ruby-identifier">component_ops</span>,
                                          <span class="ruby-identifier">additional_filesystem_gb</span>, <span class="ruby-identifier">gear_size</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">true</span>, <span class="ruby-keyword">false</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_env_vars</span>)
          <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span> *<span class="ruby-identifier">ops</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">scale_change</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
          <span class="ruby-identifier">remove_gears</span> <span class="ruby-operator">+=</span> <span class="ruby-operator">-</span><span class="ruby-identifier">scale_change</span>
          <span class="ruby-identifier">ginst</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_instances</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">change</span>[<span class="ruby-value">:from</span>])
          <span class="ruby-identifier">gears</span> = <span class="ruby-identifier">get_sparse_scaledown_gears</span>(<span class="ruby-identifier">ginst</span>, <span class="ruby-identifier">scale_change</span>)
          <span class="ruby-comment"># gears = scaled_gears[(scaled_gears.length + scale_change)..-1]</span>
          <span class="ruby-identifier">remove_ids</span> = <span class="ruby-identifier">gears</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>}
          <span class="ruby-identifier">ops</span> = <span class="ruby-identifier">calculate_gear_destroy_ops</span>(<span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">remove_ids</span>, <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">addtl_fs_gb</span>)
          <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">ops</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">config_order</span> = <span class="ruby-identifier">calculate_configure_order</span>(<span class="ruby-identifier">component_ops</span>.<span class="ruby-identifier">keys</span>)
  <span class="ruby-identifier">config_order</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">idx</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">idx</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">prereq_ids</span> = <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">config_order</span>[<span class="ruby-identifier">idx</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]][<span class="ruby-value">:adds</span>].<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>}
    <span class="ruby-identifier">prereq_ids</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">config_order</span>[<span class="ruby-identifier">idx</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]][<span class="ruby-value">:post_configures</span>].<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>}
    <span class="ruby-identifier">prereq_ids</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">config_order</span>[<span class="ruby-identifier">idx</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]][<span class="ruby-value">:expose_ports</span>].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> }

    <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">config_order</span>[<span class="ruby-identifier">idx</span>]][<span class="ruby-value">:new_component</span>].<span class="ruby-identifier">prereq</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">prereq_ids</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">config_order</span>[<span class="ruby-identifier">idx</span>]][<span class="ruby-value">:new_component</span>].<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">config_order</span>[<span class="ruby-identifier">idx</span>]][<span class="ruby-value">:adds</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">prereq</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">prereq_ids</span> }
    <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">config_order</span>[<span class="ruby-identifier">idx</span>]][<span class="ruby-value">:post_configures</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">prereq</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">prereq_ids</span> }
    <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">config_order</span>[<span class="ruby-identifier">idx</span>]][<span class="ruby-value">:expose_ports</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">prereq</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">prereq_ids</span> }
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">or</span> ((<span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>) <span class="ruby-keyword">and</span> (<span class="ruby-identifier">pending_ops</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">SetGroupOverridesOp</span>))

    <span class="ruby-identifier">all_ops_ids</span> = <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> }
    <span class="ruby-identifier">execute_connection_op</span> = <span class="ruby-constant">ExecuteConnectionsOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">all_ops_ids</span>)
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">execute_connection_op</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># check to see if there are any deployable carts being configured</span>
  <span class="ruby-comment"># if so, then make sure that the post-configure op for it is executed at the end</span>
  <span class="ruby-comment"># also, it should not be the prerequisite for any other pending_op</span>
  <span class="ruby-identifier">component_ops</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cartridge</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">cartridge</span>.<span class="ruby-identifier">is_deployable?</span>
      <span class="ruby-identifier">component_ops</span>[<span class="ruby-identifier">comp_spec</span>][<span class="ruby-value">:post_configures</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pcop</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">pcop</span>.<span class="ruby-identifier">prereq</span> <span class="ruby-operator">+=</span> [<span class="ruby-identifier">execute_connection_op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>]
        <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">prereq</span>.<span class="ruby-identifier">delete_if</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">prereq_id</span><span class="ruby-operator">|</span> <span class="ruby-identifier">prereq_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pcop</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> } }
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># update-cluster has to run after all deployable carts have been post-configured</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">scalable</span>
    <span class="ruby-identifier">all_ops_ids</span> = <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> }
    <span class="ruby-identifier">update_cluster_op</span> = <span class="ruby-constant">UpdateClusterOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">all_ops_ids</span>)
    <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">update_cluster_op</span>
  <span class="ruby-keyword">end</span>

  [<span class="ruby-identifier">pending_ops</span>, <span class="ruby-identifier">add_gears</span>, <span class="ruby-identifier">remove_gears</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- calculate_ops-source -->
            
          </div>

          

          
        </div><!-- calculate_ops-method -->

      
        <div id="calculate_remove_component_ops-method" class="method-detail ">
          <a name="method-i-calculate_remove_component_ops"></a>

          
          <div class="method-heading">
            <span class="method-name">calculate_remove_component_ops</span><span
              class="method-args">(comp_specs)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="calculate_remove_component_ops-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1945</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_remove_component_ops</span>(<span class="ruby-identifier">comp_specs</span>)
  <span class="ruby-identifier">ops</span> = []
  <span class="ruby-identifier">comp_specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">component_instance</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">cartridge_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-identifier">component_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;comp&quot;</span>])
    <span class="ruby-identifier">cartridge</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">is_plugin?</span> <span class="ruby-operator">||</span> (<span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">is_embeddable?</span>)
      <span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">op</span> = <span class="ruby-constant">RemoveCompOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>)
        <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op</span>
        <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">TrackUsageOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">parent_user_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">parent_user_id</span>,
          <span class="ruby-identifier">app_name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">event</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EVENTS</span>[<span class="ruby-value">:end</span>], <span class="ruby-identifier">cart_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>],
          <span class="ruby-identifier">usage_type</span><span class="ruby-operator">:</span> <span class="ruby-constant">UsageRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">USAGE_TYPES</span>[<span class="ruby-value">:premium_cart</span>], <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>])) <span class="ruby-keyword">if</span> <span class="ruby-identifier">cartridge</span>.<span class="ruby-identifier">is_premium?</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">remove_ssh_keys</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">app_ssh_keys</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">component_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">_id</span>) <span class="ruby-keyword">rescue</span> []
    <span class="ruby-identifier">remove_ssh_keys</span> = [<span class="ruby-identifier">remove_ssh_keys</span>].<span class="ruby-identifier">flatten</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_ssh_keys</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">keys_attrs</span> = <span class="ruby-identifier">remove_ssh_keys</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">dup</span>}
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">remove_keys_attrs</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
      <span class="ruby-constant">Application</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">_id</span>).<span class="ruby-identifier">update_all</span>({ <span class="ruby-string">&quot;$push&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">pending_op_groups</span><span class="ruby-operator">:</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">serializable_hash_with_timestamp</span> }, <span class="ruby-string">&quot;$pullAll&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">app_ssh_keys</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span> }})
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">remove_system_ssh_keys</span>(<span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">_id</span>)
    <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">remove_env_variables</span>(<span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">_id</span>)
    <span class="ruby-identifier">op</span> = <span class="ruby-constant">DeleteCompOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>})
    <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op</span>
    <span class="ruby-identifier">ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">UnsubscribeConnectionsOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sub_pub_info</span><span class="ruby-operator">:</span> <span class="ruby-identifier">get_unsubscribe_info</span>(<span class="ruby-identifier">component_instance</span>), <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>]))
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">ops</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- calculate_remove_component_ops-source -->
            
          </div>

          

          
        </div><!-- calculate_remove_component_ops-method -->

      
        <div id="calculate_remove_group_instance_ops-method" class="method-detail ">
          <a name="method-i-calculate_remove_group_instance_ops"></a>

          
          <div class="method-heading">
            <span class="method-name">calculate_remove_group_instance_ops</span><span
              class="method-args">(comp_specs, group_instance)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="calculate_remove_group_instance_ops-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1635</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_remove_group_instance_ops</span>(<span class="ruby-identifier">comp_specs</span>, <span class="ruby-identifier">group_instance</span>)
  <span class="ruby-identifier">pending_ops</span> = []
  <span class="ruby-identifier">gear_destroy_ops</span> = <span class="ruby-identifier">calculate_gear_destroy_ops</span>(<span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>, 
                                                <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>}, 
                                                <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">addtl_fs_gb</span>)
  <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">gear_destroy_ops</span>)
  <span class="ruby-identifier">gear_destroy_op_ids</span> = <span class="ruby-identifier">gear_destroy_ops</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">op</span><span class="ruby-operator">|</span> <span class="ruby-identifier">op</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>}

  <span class="ruby-identifier">unsubscribe_conn_ops</span> = []
  <span class="ruby-identifier">comp_specs</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">comp_instance</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">cartridge_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-identifier">component_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;comp&quot;</span>])
    <span class="ruby-identifier">remove_ssh_keys</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">app_ssh_keys</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">component_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_instance</span>.<span class="ruby-identifier">_id</span>) <span class="ruby-keyword">rescue</span> []
    <span class="ruby-identifier">remove_ssh_keys</span> = [<span class="ruby-identifier">remove_ssh_keys</span>].<span class="ruby-identifier">flatten</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_ssh_keys</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">keys_attrs</span> = <span class="ruby-identifier">remove_ssh_keys</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">dup</span>}
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">remove_keys_attrs</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
      <span class="ruby-constant">Application</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">_id</span>).<span class="ruby-identifier">update_all</span>({ <span class="ruby-string">&quot;$push&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">pending_op_groups</span><span class="ruby-operator">:</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">serializable_hash_with_timestamp</span> }, <span class="ruby-string">&quot;$pullAll&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">app_ssh_keys</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span> }})
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">remove_system_ssh_keys</span>(<span class="ruby-identifier">comp_instance</span>.<span class="ruby-identifier">_id</span>)
    <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">remove_env_variables</span>(<span class="ruby-identifier">comp_instance</span>.<span class="ruby-identifier">_id</span>)
    <span class="ruby-identifier">unsubscribe_conn_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">UnsubscribeConnectionsOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sub_pub_info</span><span class="ruby-operator">:</span> <span class="ruby-identifier">get_unsubscribe_info</span>(<span class="ruby-identifier">comp_instance</span>), <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_destroy_op_ids</span>))
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(*<span class="ruby-identifier">unsubscribe_conn_ops</span>)

  <span class="ruby-identifier">destroy_ginst_op</span>  = <span class="ruby-constant">DeleteGroupInstanceOp</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">group_instance_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">prereq</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_destroy_op_ids</span>)
  <span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">destroy_ginst_op</span>)
  <span class="ruby-identifier">pending_ops</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- calculate_remove_group_instance_ops-source -->
            
          </div>

          

          
        </div><!-- calculate_remove_group_instance_ops-method -->

      
        <div id="calculate_scale_by-method" class="method-detail ">
          <a name="method-i-calculate_scale_by"></a>

          
          <div class="method-heading">
            <span class="method-name">calculate_scale_by</span><span
              class="method-args">(ginst_id, scale_by)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="calculate_scale_by-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1615</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate_scale_by</span>(<span class="ruby-identifier">ginst_id</span>, <span class="ruby-identifier">scale_by</span>)
  <span class="ruby-identifier">changes</span> = []
  <span class="ruby-identifier">current_group_instances</span> = <span class="ruby-identifier">group_instances_with_scale</span>
  <span class="ruby-identifier">current_group_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ginst</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">ginst_id</span>.<span class="ruby-identifier">to_s</span>
      <span class="ruby-identifier">final_scale</span> = <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scale_by</span>
      <span class="ruby-identifier">final_scale</span> = <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">min</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">final_scale</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">min</span>
      <span class="ruby-identifier">final_scale</span> = <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">max</span> <span class="ruby-keyword">if</span> ((<span class="ruby-identifier">final_scale</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">max</span>) <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">!=</span> <span class="ruby-value">-1</span>))

      <span class="ruby-identifier">changes</span> <span class="ruby-operator">&lt;&lt;</span> {
        <span class="ruby-value">:from=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">ginst_id</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-value">:to=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">ginst_id</span>.<span class="ruby-identifier">to_s</span>,
        <span class="ruby-value">:added=</span><span class="ruby-operator">&gt;</span>[], <span class="ruby-value">:removed=</span><span class="ruby-operator">&gt;</span>[],
        <span class="ruby-value">:from_scale=</span><span class="ruby-operator">&gt;</span>{<span class="ruby-value">:min=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">min</span>, <span class="ruby-value">:max=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">max</span>, <span class="ruby-value">:current=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">length</span>},
        <span class="ruby-value">:to_scale=</span><span class="ruby-operator">&gt;</span>{<span class="ruby-value">:min=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">min</span>, <span class="ruby-value">:max=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">max</span>, <span class="ruby-value">:current=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">final_scale</span>}
      }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">calculate_ops</span>(<span class="ruby-identifier">changes</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- calculate_scale_by-source -->
            
          </div>

          

          
        </div><!-- calculate_scale_by-method -->

      
        <div id="capabilities-method" class="method-detail ">
          <a name="method-i-capabilities"></a>

          
          <div class="method-heading">
            <span class="method-name">capabilities</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="capabilities-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 362</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">capabilities</span>
  <span class="ruby-ivar">@capabilities</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">capabilities</span>.<span class="ruby-identifier">deep_dup</span> <span class="ruby-keyword">rescue</span> (<span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>, <span class="ruby-string">&quot;The application cannot be changed at this time.  Contact support.&quot;</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- capabilities-source -->
            
          </div>

          

          
        </div><!-- capabilities-method -->

      
        <div id="cartridge_gear_groups-method" class="method-detail ">
          <a name="method-i-cartridge_gear_groups"></a>

          
          <div class="method-heading">
            <span class="method-name">cartridge_gear_groups</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="cartridge_gear_groups-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 133</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cartridge_gear_groups</span>
  <span class="ruby-ivar">@cartridge_gear_groups</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">GearGroup</span>.<span class="ruby-identifier">infer</span>(<span class="ruby-identifier">cartridges</span>, <span class="ruby-keyword">self</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- cartridge_gear_groups-source -->
            
          </div>

          

          
        </div><!-- cartridge_gear_groups-method -->

      
        <div id="cartridge_names-method" class="method-detail ">
          <a name="method-i-cartridge_names"></a>

          
          <div class="method-heading">
            <span class="method-name">cartridge_names</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="cartridge_names-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cartridge_names</span>
  <span class="ruby-identifier">persisted?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">cartridges</span>.<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:name</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">Array</span>(<span class="ruby-identifier">attributes</span>[<span class="ruby-value">:cartridges</span>])
<span class="ruby-keyword">end</span></pre>
            </div><!-- cartridge_names-source -->
            
          </div>

          

          
        </div><!-- cartridge_names-method -->

      
        <div id="cartridge_names-3D-method" class="method-detail ">
          <a name="method-i-cartridge_names-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">cartridge_names=</span><span
              class="method-args">(arr)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="cartridge_names-3D-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cartridge_names=</span>(<span class="ruby-identifier">arr</span>)
  <span class="ruby-identifier">attributes</span>[<span class="ruby-value">:cartridges</span>] = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">arr</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">o</span>
      <span class="ruby-identifier">o</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">o</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:[]</span>)
      <span class="ruby-identifier">o</span>[<span class="ruby-value">:name</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">o</span>.<span class="ruby-identifier">name</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- cartridge_names-3D-source -->
            
          </div>

          

          
        </div><!-- cartridge_names-3D-method -->

      
        <div id="cartridges-method" class="method-detail ">
          <a name="method-i-cartridges"></a>

          
          <div class="method-heading">
            <span class="method-name">cartridges</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="cartridges-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 107</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">cartridges</span>
  <span class="ruby-identifier">attributes</span>[<span class="ruby-value">:cartridges</span>] <span class="ruby-operator">||=</span> <span class="ruby-identifier">persisted?</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Cartridge</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-identifier">child_options</span>) <span class="ruby-operator">:</span> []
<span class="ruby-keyword">end</span></pre>
            </div><!-- cartridges-source -->
            
          </div>

          

          
        </div><!-- cartridges-method -->

      
        <div id="component_status-method" class="method-detail ">
          <a name="method-i-component_status"></a>

          
          <div class="method-heading">
            <span class="method-name">component_status</span><span
              class="method-args">(component_instance)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="component_status-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1091</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">component_status</span>(<span class="ruby-identifier">component_instance</span>)
  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">status_messages</span> = []
  <span class="ruby-constant">GroupInstance</span>.<span class="ruby-identifier">run_on_gears</span>(<span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">gears</span>, <span class="ruby-identifier">result_io</span>, <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span>, <span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">gear_output</span> = <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">status</span>(<span class="ruby-identifier">component_instance</span>)
    <span class="ruby-identifier">status_messages</span> <span class="ruby-operator">+=</span> [{<span class="ruby-string">&quot;gear_id&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-string">&quot;message&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">gear_output</span>.<span class="ruby-identifier">resultIO</span>.<span class="ruby-identifier">string</span>}]
    <span class="ruby-identifier">r</span>.<span class="ruby-identifier">append</span> <span class="ruby-identifier">gear_output</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">status_messages</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- component_status-source -->
            
          </div>

          

          
        </div><!-- component_status-method -->

      
        <div id="compute_diffs-method" class="method-detail ">
          <a name="method-i-compute_diffs"></a>

          
          <div class="method-heading">
            <span class="method-name">compute_diffs</span><span
              class="method-args">(current_group_instances, new_group_instances)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Computes the changes (moves, additions, deletions) required to move from
the current set of group instances/components to a new set.</p>

<h2>Parameters:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>current_group_instances</p></td>
<td>
<p>Group instance list containing information about current group instances.
Expected format:</p>

<pre>[ {component_instances: [{cart: &lt;cart name&gt;, comp: &lt;comp name&gt;}...], _id: &lt;uuid&gt;, scale: {min: &lt;min scale&gt;, max: &lt;max scale&gt;, current: &lt;current scale&gt;}}...]</pre>
</td></tr><tr><td class="rdoc-term"><p>new_group_instances</p></td>
<td>
<p>New set of group instances as computed by the elaborate function</p>
</td></tr></table>

<h2>Returns:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>changes</p></td>
<td>
<p>Changes needed to the current_group_instances to make it match the
new_group_instances. (Includes all adds/removes)</p>
</td></tr><tr><td class="rdoc-term"><p>moves</p></td>
<td>
<p>A list of components which need to move from one group instance to another</p>
</td></tr></table>
            

            
            <div class="method-source-code" id="compute_diffs-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2194</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">compute_diffs</span>(<span class="ruby-identifier">current_group_instances</span>, <span class="ruby-identifier">new_group_instances</span>)
  <span class="ruby-identifier">axis_size</span> = <span class="ruby-identifier">current_group_instances</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">new_group_instances</span>.<span class="ruby-identifier">length</span>
  <span class="ruby-identifier">cost_matrix</span> = <span class="ruby-constant">Matrix</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">axis_size</span>,<span class="ruby-identifier">axis_size</span>){<span class="ruby-value">0</span>}
  <span class="ruby-comment">#compute cost of moves</span>
  (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">axis_size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">from</span><span class="ruby-operator">|</span>
    (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">axis_size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">to</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">gi_from</span> = <span class="ruby-identifier">current_group_instances</span>[<span class="ruby-identifier">from</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> [] <span class="ruby-operator">:</span> <span class="ruby-identifier">current_group_instances</span>[<span class="ruby-identifier">from</span>][<span class="ruby-value">:component_instances</span>]
      <span class="ruby-identifier">gi_to</span>   = <span class="ruby-identifier">new_group_instances</span>[<span class="ruby-identifier">to</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> [] <span class="ruby-operator">:</span> <span class="ruby-identifier">new_group_instances</span>[<span class="ruby-identifier">to</span>][<span class="ruby-value">:component_instances</span>]

      <span class="ruby-identifier">move_away</span> = <span class="ruby-identifier">gi_from</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">gi_to</span>
      <span class="ruby-identifier">move_in</span>   = <span class="ruby-identifier">gi_to</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">gi_from</span>
      <span class="ruby-identifier">cost_matrix</span>[<span class="ruby-identifier">from</span>,<span class="ruby-identifier">to</span>] = <span class="ruby-identifier">move_away</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">move_in</span>.<span class="ruby-identifier">length</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">#compute changes</span>
  <span class="ruby-identifier">changes</span> = []
  (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">axis_size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">from</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">best_to</span> = <span class="ruby-identifier">cost_matrix</span>.<span class="ruby-identifier">row_vectors</span>[<span class="ruby-identifier">from</span>].<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">cost_matrix</span>.<span class="ruby-identifier">row_vectors</span>[<span class="ruby-identifier">from</span>].<span class="ruby-identifier">min</span>)
    <span class="ruby-identifier">from_id</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">from_comp_insts</span> = []
    <span class="ruby-identifier">to_comp_insts</span>   = []
    <span class="ruby-identifier">from_scale</span>      = {<span class="ruby-identifier">min</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">max</span><span class="ruby-operator">:</span> <span class="ruby-constant">MAX_SCALE</span>, <span class="ruby-identifier">current</span><span class="ruby-operator">:</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">additional_filesystem_gb</span><span class="ruby-operator">:</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">gear_size</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">default_gear_size</span>}
    <span class="ruby-identifier">to_scale</span>        = {<span class="ruby-identifier">min</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">max</span><span class="ruby-operator">:</span> <span class="ruby-constant">MAX_SCALE</span>}

    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">current_group_instances</span>[<span class="ruby-identifier">from</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">from_comp_insts</span> = <span class="ruby-identifier">current_group_instances</span>[<span class="ruby-identifier">from</span>][<span class="ruby-value">:component_instances</span>]
      <span class="ruby-identifier">from_id</span>         = <span class="ruby-identifier">current_group_instances</span>[<span class="ruby-identifier">from</span>][<span class="ruby-value">:_id</span>]
      <span class="ruby-identifier">from_scale</span>      = <span class="ruby-identifier">current_group_instances</span>[<span class="ruby-identifier">from</span>][<span class="ruby-value">:scale</span>]
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">new_group_instances</span>[<span class="ruby-identifier">best_to</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">to_comp_insts</span> = <span class="ruby-identifier">new_group_instances</span>[<span class="ruby-identifier">best_to</span>][<span class="ruby-value">:component_instances</span>]
      <span class="ruby-identifier">to_scale</span>      = <span class="ruby-identifier">new_group_instances</span>[<span class="ruby-identifier">best_to</span>][<span class="ruby-value">:scale</span>]
      <span class="ruby-identifier">to_id</span>         = <span class="ruby-identifier">from_id</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">new_group_instances</span>[<span class="ruby-identifier">best_to</span>][<span class="ruby-value">:_id</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">from_comp_insts</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">to_comp_insts</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">added</span> = <span class="ruby-identifier">to_comp_insts</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">from_comp_insts</span>
      <span class="ruby-identifier">removed</span> = <span class="ruby-identifier">from_comp_insts</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">to_comp_insts</span>
      <span class="ruby-identifier">changes</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-identifier">from</span><span class="ruby-operator">:</span> <span class="ruby-identifier">from_id</span>, <span class="ruby-identifier">to</span><span class="ruby-operator">:</span> <span class="ruby-identifier">to_id</span>, <span class="ruby-identifier">added</span><span class="ruby-operator">:</span> <span class="ruby-identifier">added</span>, <span class="ruby-identifier">removed</span><span class="ruby-operator">:</span> <span class="ruby-identifier">removed</span>, <span class="ruby-identifier">from_scale</span><span class="ruby-operator">:</span> <span class="ruby-identifier">from_scale</span>, <span class="ruby-identifier">to_scale</span><span class="ruby-operator">:</span> <span class="ruby-identifier">to_scale</span>}
    <span class="ruby-keyword">end</span>
    (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-identifier">axis_size</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">cost_matrix</span>[<span class="ruby-identifier">i</span>,<span class="ruby-identifier">best_to</span>] = <span class="ruby-value">1000</span>}
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">moves</span> = []
  <span class="ruby-identifier">changes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c1</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">c1</span>[<span class="ruby-value">:removed</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">changes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c2</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">c2</span>[<span class="ruby-value">:added</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comp_spec</span>)
          <span class="ruby-identifier">from_id</span> = <span class="ruby-identifier">c1</span>[<span class="ruby-value">:from</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">c1</span>[<span class="ruby-value">:from</span>]
          <span class="ruby-identifier">to_id</span> = <span class="ruby-identifier">c2</span>[<span class="ruby-value">:to</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">c2</span>[<span class="ruby-value">:to</span>]
          <span class="ruby-identifier">moves</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-identifier">component</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp_spec</span>, <span class="ruby-identifier">from_group_instance_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">from_id</span>, <span class="ruby-identifier">to_group_instance_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">to_id</span>}
          <span class="ruby-identifier">c1</span>[<span class="ruby-value">:removed</span>].<span class="ruby-identifier">delete</span> <span class="ruby-identifier">comp_spec</span>
          <span class="ruby-identifier">c2</span>[<span class="ruby-value">:added</span>].<span class="ruby-identifier">delete</span> <span class="ruby-identifier">comp_spec</span>
          <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  [<span class="ruby-identifier">changes</span>, <span class="ruby-identifier">moves</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- compute_diffs-source -->
            
          </div>

          

          
        </div><!-- compute_diffs-method -->

      
        <div id="deploy-method" class="method-detail ">
          <a name="method-i-deploy"></a>

          
          <div class="method-heading">
            <span class="method-name">deploy</span><span
              class="method-args">(hot_deploy=false, force_clean_build=false, ref=nil, artifact_url=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="deploy-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2909</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">deploy</span>(<span class="ruby-identifier">hot_deploy</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">force_clean_build</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">ref</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">artifact_url</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">DeployOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">hot_deploy</span><span class="ruby-operator">:</span> <span class="ruby-identifier">hot_deploy</span>, <span class="ruby-identifier">force_clean_build</span><span class="ruby-operator">:</span> <span class="ruby-identifier">force_clean_build</span>, <span class="ruby-identifier">ref</span><span class="ruby-operator">:</span> <span class="ruby-identifier">ref</span>, <span class="ruby-identifier">artifact_url</span><span class="ruby-operator">:</span> <span class="ruby-identifier">artifact_url</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result_io</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- deploy-source -->
            
          </div>

          

          
        </div><!-- deploy-method -->

      
        <div id="deregister_routing_dns-method" class="method-detail ">
          <a name="method-i-deregister_routing_dns"></a>

          
          <div class="method-heading">
            <span class="method-name">deregister_routing_dns</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="deregister_routing_dns-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1402</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">deregister_routing_dns</span>
  <span class="ruby-identifier">ha_dns_prefix</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">openshift</span>[<span class="ruby-value">:ha_dns_prefix</span>]
  <span class="ruby-identifier">ha_dns_suffix</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">openshift</span>[<span class="ruby-value">:ha_dns_suffix</span>]
  <span class="ruby-identifier">dns</span> = <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">DnsService</span>.<span class="ruby-identifier">instance</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">dns</span>.<span class="ruby-identifier">deregister_application</span>(<span class="ruby-node">&quot;#{ha_dns_prefix}#{self.name}&quot;</span>, <span class="ruby-node">&quot;#{self.domain.namespace}#{ha_dns_suffix}&quot;</span>)
    <span class="ruby-identifier">dns</span>.<span class="ruby-identifier">publish</span>
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-identifier">dns</span>.<span class="ruby-identifier">close</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- deregister_routing_dns-source -->
            
          </div>

          

          
        </div><!-- deregister_routing_dns-method -->

      
        <div id="destroy_app-method" class="method-detail ">
          <a name="method-i-destroy_app"></a>

          
          <div class="method-heading">
            <span class="method-name">destroy_app</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Destroys all gears on the application. @note {<a
href="Application.html#method-i-run_jobs">run_jobs</a>} must be called in
order to perform the updates This operation will trigger deletion of any
applications listed in {domain_requires} @return [ResultIO] Output from
cartridges</p>
            

            
            <div class="method-source-code" id="destroy_app-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 761</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy_app</span>
  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">applications</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">app</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">app</span>.<span class="ruby-identifier">domain_requires</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">app_id</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">app_id</span><span class="ruby-operator">==</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">_id</span>
        <span class="ruby-comment"># now we have to worry if apps have a circular dependency among them or not</span>
        <span class="ruby-comment"># assuming not for now or else stack overflow</span>
        <span class="ruby-identifier">result_io</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">app</span>.<span class="ruby-identifier">destroy_app</span>)
        <span class="ruby-keyword">break</span>
      <span class="ruby-keyword">end</span>
    }
  }
  <span class="ruby-comment"># specifying the remove_all_features flag as true to ensure removal of all features</span>
  <span class="ruby-identifier">result_io</span>.<span class="ruby-identifier">append</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">remove_features</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">requires</span>, [], <span class="ruby-keyword">true</span>, <span class="ruby-keyword">true</span>))
  <span class="ruby-identifier">notify_observers</span>(<span class="ruby-value">:after_destroy</span>)
  <span class="ruby-identifier">result_io</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- destroy_app-source -->
            
          </div>

          

          
        </div><!-- destroy_app-method -->

      
        <div id="destroy_build_cartridge-method" class="method-detail ">
          <a name="method-i-destroy_build_cartridge"></a>

          
          <div class="method-heading">
            <span class="method-name">destroy_build_cartridge</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>FIXME it is assumed that eventually this will be server functionality</p>
            

            
            <div class="method-source-code" id="destroy_build_cartridge-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy_build_cartridge</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">builds?</span>
  <span class="ruby-identifier">cart</span> = <span class="ruby-constant">Cartridge</span>.<span class="ruby-identifier">new</span>({<span class="ruby-value">:application</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">as</span>, <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">building_with</span>}, <span class="ruby-keyword">true</span>)
  <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">destroy</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">ConnectionError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">set_remote_errors</span>(<span class="ruby-identifier">e</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-comment">#end.tap{ |success| cart.errors.full_messages.each{ |m| errors.add(:base, m) } unless success }</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- destroy_build_cartridge-source -->
            
          </div>

          

          
        </div><!-- destroy_build_cartridge-method -->

      
        <div id="domain_namespace-method" class="method-detail ">
          <a name="method-i-domain_namespace"></a>

          
          <div class="method-heading">
            <span class="method-name">domain_namespace</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Return either the denormalized domain name or nil, since namespace is
denormalized</p>
            

            
            <div class="method-source-code" id="domain_namespace-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 358</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">domain_namespace</span>
  <span class="ruby-identifier">attributes</span>[<span class="ruby-string">'domain_namespace'</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">has_domain?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">canonical_namespace</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- domain_namespace-source -->
            
          </div>

          

          
        </div><!-- domain_namespace-method -->

      
        <div id="elaborate-method" class="method-detail ">
          <a name="method-i-elaborate"></a>

          
          <div class="method-heading">
            <span class="method-name">elaborate</span><span
              class="method-args">(features, group_overrides = [])</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Computes the group instances, component instances and connections required
to support a given set of features</p>

<h2>Parameters:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>feature</p></td>
<td>
<p>A list of features</p>
</td></tr><tr><td class="rdoc-term"><p>group_overrides</p></td>
<td>
<p>A list of group-overrides which specify which components must be placed on
the same group. Components can be specified as Hash{cart: &lt;cart name&gt;
[, comp: &lt;component name&gt;]}</p>
</td></tr></table>

<h2>Returns:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>connections</p></td>
<td>
<p>An array of connections</p>
</td></tr><tr><td class="rdoc-term"><p>group instances</p></td>
<td>
<p>An array of hash values representing a group instances.</p>
</td></tr></table>
            

            
            <div class="method-source-code" id="elaborate-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2466</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">elaborate</span>(<span class="ruby-identifier">features</span>, <span class="ruby-identifier">group_overrides</span> = [])
  <span class="ruby-identifier">profiles</span> = []
  <span class="ruby-identifier">added_cartridges</span> = []
  <span class="ruby-identifier">overrides</span> = <span class="ruby-identifier">group_overrides</span>.<span class="ruby-identifier">deep_dup</span>

  <span class="ruby-comment">#calculate initial list based on user provided dependencies</span>
  <span class="ruby-identifier">features</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feature</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UnfulfilledRequirementException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">feature</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">profile_for_feature</span>(<span class="ruby-identifier">feature</span>)
    <span class="ruby-identifier">added_cartridges</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cart</span>
    <span class="ruby-identifier">profiles</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-identifier">cartridge</span><span class="ruby-operator">:</span> <span class="ruby-identifier">cart</span>, <span class="ruby-identifier">profile</span><span class="ruby-operator">:</span> <span class="ruby-identifier">prof</span>}
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">#solve for transitive dependencies</span>
  <span class="ruby-keyword">until</span> <span class="ruby-identifier">added_cartridges</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">carts_to_process</span> = <span class="ruby-identifier">added_cartridges</span>
    <span class="ruby-identifier">added_cartridges</span> = []
    <span class="ruby-identifier">carts_to_process</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cart</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">requires</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feature</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">profiles</span>.<span class="ruby-identifier">count</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">:cartridge</span>].<span class="ruby-identifier">features</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">feature</span>)} <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>

        <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature</span>, <span class="ruby-keyword">self</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UnfulfilledRequirementException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">feature</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">profile_for_feature</span>(<span class="ruby-identifier">feature</span>)
        <span class="ruby-identifier">added_cartridges</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cart</span>
        <span class="ruby-identifier">profiles</span> <span class="ruby-operator">&lt;&lt;</span> {<span class="ruby-identifier">cartridge</span><span class="ruby-operator">:</span> <span class="ruby-identifier">cart</span>, <span class="ruby-identifier">profile</span><span class="ruby-operator">:</span> <span class="ruby-identifier">prof</span>}
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">#calculate component instances</span>
  <span class="ruby-identifier">component_instances</span> = []
  <span class="ruby-identifier">profiles</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">profile</span> = (<span class="ruby-identifier">data</span>[<span class="ruby-value">:profile</span>].<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">data</span>[<span class="ruby-value">:profile</span>].<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">data</span>[<span class="ruby-value">:profile</span>]
    <span class="ruby-identifier">profile</span>.<span class="ruby-identifier">components</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">component</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">component_instances</span> <span class="ruby-operator">&lt;&lt;</span> {
        <span class="ruby-identifier">cartridge</span><span class="ruby-operator">:</span> <span class="ruby-identifier">data</span>[<span class="ruby-value">:cartridge</span>],
        <span class="ruby-identifier">component</span><span class="ruby-operator">:</span> <span class="ruby-identifier">component</span>
      }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment">#calculate connections</span>
  <span class="ruby-identifier">publishers</span> = {}
  <span class="ruby-identifier">connections</span> = []
  <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">ci</span>[<span class="ruby-value">:component</span>].<span class="ruby-identifier">publishes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">connector</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">type</span> = <span class="ruby-identifier">connector</span>.<span class="ruby-identifier">type</span>
      <span class="ruby-identifier">name</span> = <span class="ruby-identifier">connector</span>.<span class="ruby-identifier">name</span>
      <span class="ruby-identifier">publishers</span>[<span class="ruby-identifier">type</span>] = [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">publishers</span>[<span class="ruby-identifier">type</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">publishers</span>[<span class="ruby-identifier">type</span>] <span class="ruby-operator">&lt;&lt;</span> { <span class="ruby-identifier">cartridge</span><span class="ruby-operator">:</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:cartridge</span>].<span class="ruby-identifier">name</span> , <span class="ruby-identifier">component</span><span class="ruby-operator">:</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:component</span>].<span class="ruby-identifier">name</span>, <span class="ruby-identifier">connector</span><span class="ruby-operator">:</span> <span class="ruby-identifier">name</span> }
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># obtain copy of connections with fully-resolved subscriptions for this ci</span>
    <span class="ruby-identifier">subscriptions</span> = <span class="ruby-identifier">subscription_filter</span>(<span class="ruby-identifier">ci</span>, <span class="ruby-identifier">publishers</span>)
    <span class="ruby-identifier">subscriptions</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">connector</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">stype</span> = <span class="ruby-identifier">connector</span>.<span class="ruby-identifier">type</span>
      <span class="ruby-identifier">sname</span> = <span class="ruby-identifier">connector</span>.<span class="ruby-identifier">name</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">publishers</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">stype</span>
        <span class="ruby-identifier">publishers</span>[<span class="ruby-identifier">stype</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cinfo</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">connections</span> <span class="ruby-operator">&lt;&lt;</span> {
            <span class="ruby-string">&quot;from_comp_inst&quot;</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-string">&quot;cart&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cinfo</span>[<span class="ruby-value">:cartridge</span>], <span class="ruby-string">&quot;comp&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cinfo</span>[<span class="ruby-value">:component</span>]},
            <span class="ruby-string">&quot;to_comp_inst&quot;</span> =<span class="ruby-operator">&gt;</span>   {<span class="ruby-string">&quot;cart&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:cartridge</span>].<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;comp&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:component</span>].<span class="ruby-identifier">name</span>},
            <span class="ruby-string">&quot;from_connector_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cinfo</span>[<span class="ruby-value">:connector</span>],
            <span class="ruby-string">&quot;to_connector_name&quot;</span> =<span class="ruby-operator">&gt;</span>   <span class="ruby-identifier">sname</span>,
            <span class="ruby-string">&quot;connection_type&quot;</span> =<span class="ruby-operator">&gt;</span>     <span class="ruby-identifier">stype</span>}
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">stype</span>.<span class="ruby-identifier">starts_with?</span>(<span class="ruby-string">&quot;FILESYSTEM&quot;</span>) <span class="ruby-keyword">or</span> <span class="ruby-identifier">stype</span>.<span class="ruby-identifier">starts_with?</span>(<span class="ruby-string">&quot;SHMEM&quot;</span>)
            <span class="ruby-identifier">overrides</span> <span class="ruby-operator">&lt;&lt;</span> [{<span class="ruby-string">&quot;cart&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cinfo</span>[<span class="ruby-value">:cartridge</span>], <span class="ruby-string">&quot;comp&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cinfo</span>[<span class="ruby-value">:component</span>]}, {<span class="ruby-string">&quot;cart&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:cartridge</span>].<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;comp&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:component</span>].<span class="ruby-identifier">name</span>}]
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">comp_specs</span> = <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span> {<span class="ruby-string">&quot;comp&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:component</span>].<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;cart&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ci</span>[<span class="ruby-value">:cartridge</span>].<span class="ruby-identifier">name</span>}}
  <span class="ruby-identifier">processed_overrides</span>, <span class="ruby-identifier">cleaned_overrides</span> = <span class="ruby-identifier">process_group_overrides</span>(<span class="ruby-identifier">comp_specs</span>, <span class="ruby-identifier">overrides</span>)
  <span class="ruby-identifier">group_instances</span> = <span class="ruby-identifier">processed_overrides</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">go</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">group_instance</span> = {}
    <span class="ruby-identifier">group_instance</span>[<span class="ruby-value">:component_instances</span>] = <span class="ruby-identifier">go</span>[<span class="ruby-string">&quot;components&quot;</span>].<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">go_comp_spec</span><span class="ruby-operator">|</span> { <span class="ruby-string">&quot;cart&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">go_comp_spec</span>[<span class="ruby-string">'cart'</span>], <span class="ruby-string">&quot;comp&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">go_comp_spec</span>[<span class="ruby-string">'comp'</span>] } }
    <span class="ruby-identifier">group_instance</span>[<span class="ruby-value">:scale</span>] = {}
    <span class="ruby-identifier">group_instance</span>[<span class="ruby-value">:scale</span>][<span class="ruby-value">:min</span>] = ( <span class="ruby-identifier">go</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-value">1</span> )
    <span class="ruby-identifier">group_instance</span>[<span class="ruby-value">:scale</span>][<span class="ruby-value">:max</span>] = ( <span class="ruby-identifier">go</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-value">-1</span> )
    <span class="ruby-identifier">group_instance</span>[<span class="ruby-value">:scale</span>][<span class="ruby-value">:gear_size</span>] = ( <span class="ruby-identifier">go</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">default_gear_size</span> )
    <span class="ruby-identifier">group_instance</span>[<span class="ruby-value">:scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>] <span class="ruby-operator">||=</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">group_instance</span>[<span class="ruby-value">:scale</span>][<span class="ruby-value">:additional_filesystem_gb</span>] <span class="ruby-operator">+=</span> (<span class="ruby-identifier">go</span>[<span class="ruby-string">&quot;additional_filesystem_gb&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>)
    <span class="ruby-identifier">group_instance</span>[<span class="ruby-value">:_id</span>] = <span class="ruby-constant">Moped</span><span class="ruby-operator">::</span><span class="ruby-constant">BSON</span><span class="ruby-operator">::</span><span class="ruby-constant">ObjectId</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">group_instance</span>
  }
  [<span class="ruby-identifier">connections</span>, <span class="ruby-identifier">group_instances</span>, <span class="ruby-identifier">cleaned_overrides</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- elaborate-source -->
            
          </div>

          

          
        </div><!-- elaborate-method -->

      
        <div id="element_path-method" class="method-detail ">
          <a name="method-i-element_path"></a>

          
          <div class="method-heading">
            <span class="method-name">element_path</span><span
              class="method-args">(options = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Override the instance method to use the ID-only when calling the REST API,
instead of <a href="Application.html#method-i-to_param">to_param</a></p>
            

            
            <div class="method-source-code" id="element_path-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">element_path</span>(<span class="ruby-identifier">options</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">element_path</span>(<span class="ruby-identifier">id</span>, <span class="ruby-identifier">options</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">prefix_options</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- element_path-source -->
            
          </div>

          

          
        </div><!-- element_path-method -->

      
        <div id="embedded-method" class="method-detail ">
          <a name="method-i-embedded"></a>

          
          <div class="method-heading">
            <span class="method-name">embedded</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="embedded-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 203</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">embedded</span>
  <span class="ruby-ivar">@attributes</span>[<span class="ruby-value">:embedded</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- embedded-source -->
            
          </div>

          

          
        </div><!-- embedded-method -->

      
        <div id="enforce_system_order-method" class="method-detail ">
          <a name="method-i-enforce_system_order"></a>

          
          <div class="method-heading">
            <span class="method-name">enforce_system_order</span><span
              class="method-args">(order, categories)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="enforce_system_order-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2561</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">enforce_system_order</span>(<span class="ruby-identifier">order</span>, <span class="ruby-identifier">categories</span>)
  <span class="ruby-identifier">web_carts</span> = <span class="ruby-identifier">categories</span>[<span class="ruby-string">'web_framework'</span>] <span class="ruby-operator">||</span> []
  <span class="ruby-identifier">service_carts</span> = (<span class="ruby-identifier">categories</span>[<span class="ruby-string">'service'</span>] <span class="ruby-operator">||</span> [])<span class="ruby-operator">-</span><span class="ruby-identifier">web_carts</span>
  <span class="ruby-identifier">plugin_carts</span> = (<span class="ruby-identifier">categories</span>[<span class="ruby-string">'plugin'</span>] <span class="ruby-operator">||</span> [])<span class="ruby-operator">-</span><span class="ruby-identifier">service_carts</span>
  <span class="ruby-identifier">web_carts</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">w</span><span class="ruby-operator">|</span>
    (<span class="ruby-identifier">service_carts</span><span class="ruby-operator">+</span><span class="ruby-identifier">plugin_carts</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">sp</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">order</span>.<span class="ruby-identifier">add_component_order</span>([<span class="ruby-identifier">w</span>,<span class="ruby-identifier">sp</span>])
    }
  }
  <span class="ruby-identifier">service_carts</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">plugin_carts</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">order</span>.<span class="ruby-identifier">add_component_order</span>([<span class="ruby-identifier">s</span>,<span class="ruby-identifier">p</span>])
    }
  }
<span class="ruby-keyword">end</span></pre>
            </div><!-- enforce_system_order-source -->
            
          </div>

          

          
        </div><!-- enforce_system_order-method -->

      
        <div id="execute_connections-method" class="method-detail ">
          <a name="method-i-execute_connections"></a>

          
          <div class="method-heading">
            <span class="method-name">execute_connections</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="execute_connections-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1326</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">execute_connections</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>
    <span class="ruby-identifier">connections</span>, <span class="ruby-identifier">new_group_instances</span>, <span class="ruby-identifier">cleaned_group_overrides</span> = <span class="ruby-identifier">elaborate</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">requires</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_overrides</span>)
    <span class="ruby-identifier">set_connections</span>(<span class="ruby-identifier">connections</span>)

    <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-string">&quot;Running publishers&quot;</span>
    <span class="ruby-identifier">handle</span> = <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">create_parallel_job</span>
    <span class="ruby-comment">#publishers</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">connections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">pub_inst</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">from_comp_inst_id</span>)
      <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>

      <span class="ruby-identifier">pub_inst</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">input_args</span> = [<span class="ruby-identifier">gear</span>.<span class="ruby-identifier">name</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain_namespace</span>, <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">uuid</span>]
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">removed</span>
          <span class="ruby-identifier">job</span> = <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">get_execute_connector_job</span>(<span class="ruby-identifier">pub_inst</span>, <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">from_connector_name</span>, <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">connection_type</span>, <span class="ruby-identifier">input_args</span>)
          <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">add_parallel_job</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-identifier">gear</span>, <span class="ruby-identifier">job</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">pub_out</span> = {}
    <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">execute_parallel_jobs</span>(<span class="ruby-identifier">handle</span>)
    <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">get_parallel_run_results</span>(<span class="ruby-identifier">handle</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tag</span>, <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">output</span>, <span class="ruby-identifier">status</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">conn_type</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">connections</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">tag</span>}.<span class="ruby-identifier">connection_type</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">status</span><span class="ruby-operator">==</span><span class="ruby-value">0</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">conn_type</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;ENV:&quot;</span>)
          <span class="ruby-identifier">pub_out</span>[<span class="ruby-identifier">tag</span>] = {} <span class="ruby-keyword">if</span> <span class="ruby-identifier">pub_out</span>[<span class="ruby-identifier">tag</span>].<span class="ruby-identifier">nil?</span>
          <span class="ruby-identifier">pub_out</span>[<span class="ruby-identifier">tag</span>][<span class="ruby-identifier">gear_id</span>] = <span class="ruby-identifier">output</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">pub_out</span>[<span class="ruby-identifier">tag</span>] = [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">pub_out</span>[<span class="ruby-identifier">tag</span>].<span class="ruby-identifier">nil?</span>
          <span class="ruby-identifier">pub_out</span>[<span class="ruby-identifier">tag</span>].<span class="ruby-identifier">push</span>(<span class="ruby-node">&quot;'#{gear_id}'='#{output}'&quot;</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-string">&quot;Running subscribers&quot;</span>
    <span class="ruby-comment">#subscribers</span>
    <span class="ruby-identifier">handle</span> = <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">create_parallel_job</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">connections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">pub_inst</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">from_comp_inst_id</span>)
      <span class="ruby-identifier">sub_inst</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">to_comp_inst_id</span>)
      <span class="ruby-identifier">tag</span> = <span class="ruby-string">&quot;&quot;</span>

      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">pub_out</span>[<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">nil?</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">connection_type</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;ENV:&quot;</span>)
          <span class="ruby-identifier">input_to_subscriber</span> = <span class="ruby-identifier">pub_out</span>[<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>]
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">input_to_subscriber</span> = <span class="ruby-constant">Shellwords</span><span class="ruby-operator">::</span><span class="ruby-identifier">shellescape</span>(<span class="ruby-identifier">pub_out</span>[<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">join</span>(<span class="ruby-string">' '</span>))
        <span class="ruby-keyword">end</span>

        <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Output of publisher - '#{pub_out}'&quot;</span>
        <span class="ruby-identifier">sub_inst</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">input_args</span> = [<span class="ruby-identifier">gear</span>.<span class="ruby-identifier">name</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain_namespace</span>, <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">uuid</span>, <span class="ruby-identifier">input_to_subscriber</span>]
          <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">removed</span>
            <span class="ruby-identifier">job</span> = <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">get_execute_connector_job</span>(<span class="ruby-identifier">sub_inst</span>, <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">to_connector_name</span>, <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">connection_type</span>, <span class="ruby-identifier">input_args</span>, <span class="ruby-identifier">pub_inst</span>.<span class="ruby-identifier">cartridge_name</span>)
            <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">add_parallel_job</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-identifier">gear</span>, <span class="ruby-identifier">job</span>)
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">execute_parallel_jobs</span>(<span class="ruby-identifier">handle</span>)
    <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-string">&quot;Connections done&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- execute_connections-source -->
            
          </div>

          

          
        </div><!-- execute_connections-method -->

      
        <div id="extended_validator-method" class="method-detail ">
          <a name="method-i-extended_validator"></a>

          
          <div class="method-heading">
            <span class="method-name">extended_validator</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Observer hook for extending the validation of the application in an
ActiveRecord::Observer @see <a
href="http://api.rubyonrails.org/classes/ActiveRecord/Observer.html">api.rubyonrails.org/classes/ActiveRecord/Observer.html</a></p>
            

            
            <div class="method-source-code" id="extended_validator-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 179</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">extended_validator</span>
  <span class="ruby-identifier">notify_observers</span>(<span class="ruby-value">:validate_application</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- extended_validator-source -->
            
          </div>

          

          
        </div><!-- extended_validator-method -->

      
        <div id="find_alias-method" class="method-detail ">
          <a name="method-i-find_alias"></a>

          
          <div class="method-heading">
            <span class="method-name">find_alias</span><span
              class="method-args">(id)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="find_alias-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 157</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_alias</span>(<span class="ruby-identifier">id</span>)
  <span class="ruby-constant">Alias</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">id</span>, <span class="ruby-identifier">child_options</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- find_alias-source -->
            
          </div>

          

          
        </div><!-- find_alias-method -->

      
        <div id="find_cartridge-method" class="method-detail ">
          <a name="method-i-find_cartridge"></a>

          
          <div class="method-heading">
            <span class="method-name">find_cartridge</span><span
              class="method-args">(name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="find_cartridge-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 103</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-constant">Cartridge</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">child_options</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- find_cartridge-source -->
            
          </div>

          

          
        </div><!-- find_cartridge-method -->

      
        <div id="fix_gear_ssh_keys-method" class="method-detail ">
          <a name="method-i-fix_gear_ssh_keys"></a>

          
          <div class="method-heading">
            <span class="method-name">fix_gear_ssh_keys</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Removes all ssh keys from the application’s gears and adds the given ssh
keys. @param user_id [String] The ID of the user associated with the keys.
If the user ID is nil, then the key is assumed to be a system generated key
@param keys [<a href="Array.html">Array</a>&lt;SshKey&gt;] <a
href="Array.html">Array</a> of keys to add to the application. @return
[ResultIO] Output from cartridges</p>
            

            
            <div class="method-source-code" id="fix_gear_ssh_keys-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 437</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fix_gear_ssh_keys</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-comment"># reload the application to get the latest data</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reload</span>

    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">ReplaceAllSshKeysOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">keys_attrs</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_all_updated_ssh_keys</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- fix_gear_ssh_keys-source -->
            
          </div>

          

          
        </div><!-- fix_gear_ssh_keys-method -->

      
        <div id="fqdn-method" class="method-detail ">
          <a name="method-i-fqdn"></a>

          
          <div class="method-heading">
            <span class="method-name">fqdn</span><span
              class="method-args">(gear_name = nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the fully qualified DNS name for an application gear (unless
specified, the primary) @return [String]</p>
            

            
            <div class="method-source-code" id="fqdn-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 889</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fqdn</span>(<span class="ruby-identifier">gear_name</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-node">&quot;#{gear_name || canonical_name}-#{domain_namespace}.#{Rails.configuration.openshift[:domain_suffix]}&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- fqdn-source -->
            
          </div>

          

          
        </div><!-- fqdn-method -->

      
        <div id="framework_name-method" class="method-detail ">
          <a name="method-i-framework_name"></a>

          
          <div class="method-heading">
            <span class="method-name">framework_name</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="framework_name-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 199</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">framework_name</span>
  <span class="ruby-ivar">@framework_name</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">CartridgeType</span>.<span class="ruby-identifier">cached</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">framework</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">as</span>).<span class="ruby-identifier">display_name</span> <span class="ruby-keyword">rescue</span> <span class="ruby-identifier">framework</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- framework_name-source -->
            
          </div>

          

          
        </div><!-- framework_name-method -->

      
        <div id="gear_groups-method" class="method-detail ">
          <a name="method-i-gear_groups"></a>

          
          <div class="method-heading">
            <span class="method-name">gear_groups</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="gear_groups-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gear_groups</span>
  <span class="ruby-ivar">@gear_groups</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">GearGroup</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-identifier">child_options</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- gear_groups-source -->
            
          </div>

          

          
        </div><!-- gear_groups-method -->

      
        <div id="gear_ranges-method" class="method-detail ">
          <a name="method-i-gear_ranges"></a>

          
          <div class="method-heading">
            <span class="method-name">gear_ranges</span><span
              class="method-args">(account_max=Float::INFINITY)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="gear_ranges-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gear_ranges</span>(<span class="ruby-identifier">account_max</span>=<span class="ruby-constant">Float</span><span class="ruby-operator">::</span><span class="ruby-constant">INFINITY</span>)
  <span class="ruby-identifier">cartridge_gear_groups</span>.<span class="ruby-identifier">inject</span>({}) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">h</span>, <span class="ruby-identifier">group</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">profile</span> = (<span class="ruby-identifier">h</span>[<span class="ruby-identifier">group</span>.<span class="ruby-identifier">gear_profile</span>] <span class="ruby-operator">||=</span> [<span class="ruby-value">0</span>, <span class="ruby-value">0</span>])
    <span class="ruby-identifier">count</span>, <span class="ruby-identifier">max</span> = <span class="ruby-value">0</span>, <span class="ruby-value">0</span>
    <span class="ruby-identifier">group</span>.<span class="ruby-identifier">cartridges</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cart</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">count</span> = [<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">current_scale</span>, <span class="ruby-identifier">count</span>].<span class="ruby-identifier">max</span>
      <span class="ruby-identifier">max</span> = [<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">will_scale_to</span>(<span class="ruby-identifier">account_max</span>), <span class="ruby-identifier">max</span>].<span class="ruby-identifier">max</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">profile</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">+=</span> <span class="ruby-identifier">count</span>
    <span class="ruby-identifier">profile</span>[<span class="ruby-value">1</span>] = [<span class="ruby-identifier">profile</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">max</span>, <span class="ruby-identifier">account_max</span>].<span class="ruby-identifier">max</span>
    <span class="ruby-identifier">h</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, (<span class="ruby-identifier">v</span>, <span class="ruby-identifier">v2</span>)<span class="ruby-operator">|</span> [<span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span>, <span class="ruby-identifier">v2</span>] }.<span class="ruby-identifier">sort_by</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">a</span>[<span class="ruby-value">1</span>], <span class="ruby-identifier">a</span>[<span class="ruby-value">2</span>], <span class="ruby-identifier">a</span>[<span class="ruby-value">0</span>]] }.<span class="ruby-identifier">reverse</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- gear_ranges-source -->
            
          </div>

          

          
        </div><!-- gear_ranges-method -->

      
        <div id="gears-method" class="method-detail ">
          <a name="method-i-gears"></a>

          
          <div class="method-heading">
            <span class="method-name">gears</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="gears-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 126</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gears</span>
  <span class="ruby-constant">Gear</span>.<span class="ruby-identifier">find</span> <span class="ruby-value">:all</span>, <span class="ruby-identifier">child_options</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- gears-source -->
            
          </div>

          

          
        </div><!-- gears-method -->

      
        <div id="gen_non_scalable_app_overrides-method" class="method-detail ">
          <a name="method-i-gen_non_scalable_app_overrides"></a>

          
          <div class="method-heading">
            <span class="method-name">gen_non_scalable_app_overrides</span><span
              class="method-args">(features)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="gen_non_scalable_app_overrides-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2737</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">gen_non_scalable_app_overrides</span>(<span class="ruby-identifier">features</span>)
  <span class="ruby-comment">#find web_framework</span>
  <span class="ruby-identifier">web_framework</span> = {}
  <span class="ruby-identifier">features</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feature</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;web_framework&quot;</span>
    <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">profile_for_feature</span>(<span class="ruby-identifier">feature</span>)
    <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">first</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>
    <span class="ruby-identifier">comp</span> = <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">components</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-identifier">web_framework</span> = {<span class="ruby-string">&quot;cart&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">cart</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;comp&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">comp</span>.<span class="ruby-identifier">name</span>}
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">group_overrides</span> = [{<span class="ruby-string">&quot;components&quot;</span>=<span class="ruby-operator">&gt;</span>[<span class="ruby-identifier">web_framework</span>], <span class="ruby-string">&quot;max_gears&quot;</span>=<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>}]
  <span class="ruby-comment">#generate group overrides to colocate all components with web_framework and limit scale to 1</span>
  <span class="ruby-identifier">features</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feature</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;web_framework&quot;</span>
    <span class="ruby-identifier">profs</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">profile_for_feature</span>(<span class="ruby-identifier">feature</span>)
    <span class="ruby-identifier">profile</span> = (<span class="ruby-identifier">profs</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">profs</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">profs</span>
    <span class="ruby-identifier">components</span> = <span class="ruby-identifier">profile</span>.<span class="ruby-identifier">components</span>
    <span class="ruby-identifier">group_overrides</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">components</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">comp</span><span class="ruby-operator">|</span>
      {
        <span class="ruby-string">&quot;components&quot;</span> =<span class="ruby-operator">&gt;</span> [
          <span class="ruby-identifier">web_framework</span>,
          {<span class="ruby-string">&quot;cart&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">cart</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;comp&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">comp</span>.<span class="ruby-identifier">name</span>}
        ],
        <span class="ruby-string">&quot;max_gears&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
      }
    }
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">group_overrides</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- gen_non_scalable_app_overrides-source -->
            
          </div>

          

          
        </div><!-- gen_non_scalable_app_overrides-method -->

      
        <div id="get_all_updated_ssh_keys-method" class="method-detail ">
          <a name="method-i-get_all_updated_ssh_keys"></a>

          
          <div class="method-heading">
            <span class="method-name">get_all_updated_ssh_keys</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="get_all_updated_ssh_keys-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2771</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_all_updated_ssh_keys</span>
  <span class="ruby-identifier">ssh_keys</span> = []
  <span class="ruby-identifier">ssh_keys</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">app_ssh_keys</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">serializable_hash</span> } <span class="ruby-comment"># the app_ssh_keys already have their name &quot;updated&quot;</span>
  <span class="ruby-identifier">ssh_keys</span> <span class="ruby-operator">|=</span> <span class="ruby-identifier">get_updated_ssh_keys</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">system_ssh_keys</span>)
  <span class="ruby-identifier">ssh_keys</span> <span class="ruby-operator">|=</span> <span class="ruby-constant">CloudUser</span>.<span class="ruby-identifier">members_of</span>(<span class="ruby-keyword">self</span>){ <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-constant">Ability</span>.<span class="ruby-identifier">has_permission?</span>(<span class="ruby-identifier">m</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-value">:ssh_to_gears</span>, <span class="ruby-constant">Application</span>, <span class="ruby-identifier">m</span>.<span class="ruby-identifier">role</span>, <span class="ruby-keyword">self</span>) }.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">u</span><span class="ruby-operator">|</span> <span class="ruby-identifier">get_updated_ssh_keys</span>(<span class="ruby-identifier">u</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">u</span>.<span class="ruby-identifier">ssh_keys</span>) }.<span class="ruby-identifier">flatten</span>(<span class="ruby-value">1</span>)

  <span class="ruby-identifier">ssh_keys</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_all_updated_ssh_keys-source -->
            
          </div>

          

          
        </div><!-- get_all_updated_ssh_keys-method -->

      
        <div id="get_app_dns_gear-method" class="method-detail ">
          <a name="method-i-get_app_dns_gear"></a>

          
          <div class="method-heading">
            <span class="method-name">get_app_dns_gear</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Retrieve the gear with application dns. @return [Gear] gear object</p>
            

            
            <div class="method-source-code" id="get_app_dns_gear-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1395</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_app_dns_gear</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">gears</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">app_dns</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">gears</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">app_dns</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Gear containing application dns not found&quot;</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_app_dns_gear-source -->
            
          </div>

          

          
        </div><!-- get_app_dns_gear-method -->

      
        <div id="get_app_scaling_limits-method" class="method-detail ">
          <a name="method-i-get_app_scaling_limits"></a>

          
          <div class="method-heading">
            <span class="method-name">get_app_scaling_limits</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Get scaling limits for the application’s group instance that has the web
framework cartridge This method is only to maintain backwards compatibility
for rest api version 1.0 @return [Integer, Integer]</p>
            

            
            <div class="method-source-code" id="get_app_scaling_limits-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2823</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_app_scaling_limits</span>
  <span class="ruby-identifier">web_cart</span> = <span class="ruby-identifier">get_framework_cartridge</span>
  <span class="ruby-identifier">component_instance</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">cartridge_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">web_cart</span>.<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">group_instance</span> = <span class="ruby-identifier">group_instances_with_scale</span>.<span class="ruby-identifier">select</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">go</span><span class="ruby-operator">|</span> <span class="ruby-identifier">go</span>.<span class="ruby-identifier">all_component_instances</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">component_instance</span> }[<span class="ruby-value">0</span>]
  [<span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">min</span>, <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">max</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_app_scaling_limits-source -->
            
          </div>

          

          
        </div><!-- get_app_scaling_limits-method -->

      
        <div id="get_components_for_feature-method" class="method-detail ">
          <a name="method-i-get_components_for_feature"></a>

          
          <div class="method-heading">
            <span class="method-name">get_components_for_feature</span><span
              class="method-args">(feature)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="get_components_for_feature-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2730</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_components_for_feature</span>(<span class="ruby-identifier">feature</span>)
  <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature</span>, <span class="ruby-keyword">self</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;No cartridge found that provides #{feature}&quot;</span>, <span class="ruby-value">109</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">profile_for_feature</span>(<span class="ruby-identifier">feature</span>)
  <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">components</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">comp</span><span class="ruby-operator">|</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">cartridge_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">component_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">name</span>) }
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_components_for_feature-source -->
            
          </div>

          

          
        </div><!-- get_components_for_feature-method -->

      
        <div id="get_feature-method" class="method-detail ">
          <a name="method-i-get_feature"></a>

          
          <div class="method-heading">
            <span class="method-name">get_feature</span><span
              class="method-args">(cartridge_name,component_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Gets a feature name for the cartridge/component combination</p>

<h2>Parameters:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>cartridge_name</p></td>
<td>
<p>Name of cartridge</p>
</td></tr><tr><td class="rdoc-term"><p>component_name</p></td>
<td>
<p>Name of component</p>
</td></tr></table>

<h2>Returns:</h2>

<p>Feature name provided by the cartridge that includes the component</p>
            

            
            <div class="method-source-code" id="get_feature-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2724</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_feature</span>(<span class="ruby-identifier">cartridge_name</span>,<span class="ruby-identifier">component_name</span>)
  <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">cartridge_name</span>, <span class="ruby-keyword">self</span>)
  <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">get_profile_for_component</span> <span class="ruby-identifier">component_name</span>
  (<span class="ruby-identifier">prof</span>.<span class="ruby-identifier">provides</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">default_profile</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">provides</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">provides</span>.<span class="ruby-identifier">first</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_feature-source -->
            
          </div>

          

          
        </div><!-- get_feature-method -->

      
        <div id="get_framework_cartridge-method" class="method-detail ">
          <a name="method-i-get_framework_cartridge"></a>

          
          <div class="method-heading">
            <span class="method-name">get_framework_cartridge</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Get the web framework cartridge This method is only to maintain backwards
compatibility for rest api version 1.0 @return <a
href="Cartridge.html">Cartridge</a></p>
            

            
            <div class="method-source-code" id="get_framework_cartridge-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2833</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_framework_cartridge</span>
  <span class="ruby-identifier">web_cart</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">requires</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feature</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;web_framework&quot;</span>
    <span class="ruby-identifier">web_cart</span> = <span class="ruby-identifier">cart</span>
    <span class="ruby-keyword">break</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">web_cart</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_framework_cartridge-source -->
            
          </div>

          

          
        </div><!-- get_framework_cartridge-method -->

      
        <div id="get_gear_states-method" class="method-detail ">
          <a name="method-i-get_gear_states"></a>

          
          <div class="method-heading">
            <span class="method-name">get_gear_states</span><span
              class="method-args">(timeout=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Retrieves the gear state for all gears within the application. @return [<a
href="Hash.html">Hash</a>&lt;<a href="String.html">String</a>, String&gt;]
Map of {Gear} ID to state</p>
            

            
            <div class="method-source-code" id="get_gear_states-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 913</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_gear_states</span>(<span class="ruby-identifier">timeout</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">gear_states</span>, <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">Gear</span>.<span class="ruby-identifier">get_gear_states</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">gears</span>, <span class="ruby-identifier">timeout</span>)
  [<span class="ruby-identifier">gear_states</span>, <span class="ruby-identifier">result_io</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_gear_states-source -->
            
          </div>

          

          
        </div><!-- get_gear_states-method -->

      
        <div id="get_sparse_scaledown_gears-method" class="method-detail ">
          <a name="method-i-get_sparse_scaledown_gears"></a>

          
          <div class="method-heading">
            <span class="method-name">get_sparse_scaledown_gears</span><span
              class="method-args">(ginst, scale_down_factor)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="get_sparse_scaledown_gears-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1807</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_sparse_scaledown_gears</span>(<span class="ruby-identifier">ginst</span>, <span class="ruby-identifier">scale_down_factor</span>)
  <span class="ruby-identifier">scaled_gears</span> = <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">app_dns</span><span class="ruby-operator">==</span><span class="ruby-keyword">false</span> }
  <span class="ruby-identifier">sparse_components</span> = <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">is_sparse?</span> }
  <span class="ruby-identifier">gears</span> = []
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">sparse_components</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    (<span class="ruby-identifier">scale_down_factor</span><span class="ruby-operator">...</span><span class="ruby-value">0</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
      <span class="ruby-comment"># iterate through sparse components to see which ones need a definite scale-down</span>
      <span class="ruby-identifier">relevant_sparse_components</span> = <span class="ruby-identifier">sparse_components</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">min</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">min</span> <span class="ruby-keyword">rescue</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">get_component</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">min</span>
        <span class="ruby-identifier">multiplier</span> = <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">multiplier</span> <span class="ruby-keyword">rescue</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">get_component</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">multiplier</span>
        <span class="ruby-identifier">cur_sparse_gears</span> = (<span class="ruby-identifier">ci</span>.<span class="ruby-identifier">gears</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">gears</span>)
        <span class="ruby-identifier">cur_total_gears</span> = (<span class="ruby-identifier">gi</span>.<span class="ruby-identifier">gears</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">gears</span>)
        <span class="ruby-identifier">status</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">cur_sparse_gears</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">min</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">multiplier</span><span class="ruby-operator">&lt;=</span><span class="ruby-value">0</span>
          <span class="ruby-identifier">status</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">status</span> = <span class="ruby-identifier">cur_total_gears</span><span class="ruby-operator">/</span>(<span class="ruby-identifier">cur_sparse_gears</span>*<span class="ruby-value">1.0</span>)<span class="ruby-operator">&gt;</span><span class="ruby-identifier">multiplier</span> <span class="ruby-operator">?</span> <span class="ruby-keyword">false</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">status</span>
      }
      <span class="ruby-comment"># each of relevant_sparse_components want a gear removed that has them contained in the gear</span>
      <span class="ruby-comment"># if its empty, then remove a gear which does not have any of sparse_components in them (non-sparse gears)</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">relevant_sparse_components</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">relevant_sparse_comp_ids</span> = <span class="ruby-identifier">relevant_sparse_components</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">sp_ci</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">_id</span> }
        <span class="ruby-identifier">gear</span> = <span class="ruby-identifier">scaled_gears</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
           (<span class="ruby-identifier">relevant_sparse_comp_ids</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">sparse_carts</span>).<span class="ruby-identifier">empty?</span>
        }
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">gear</span> = <span class="ruby-identifier">scaled_gears</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">sparse_carts</span>.<span class="ruby-identifier">empty?</span> }
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">nil?</span>
        <span class="ruby-comment"># this may mean that some sparse_component's min limit is being violated</span>
        <span class="ruby-identifier">gear</span> = <span class="ruby-identifier">scaled_gears</span>.<span class="ruby-identifier">last</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">gears</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">gear</span>
      <span class="ruby-identifier">scaled_gears</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">gear</span>)
    }
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">gears</span> = <span class="ruby-identifier">scaled_gears</span>[(<span class="ruby-identifier">scaled_gears</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">scale_down_factor</span>)<span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">gears</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_sparse_scaledown_gears-source -->
            
          </div>

          

          
        </div><!-- get_sparse_scaledown_gears-method -->

      
        <div id="get_unsubscribe_info-method" class="method-detail ">
          <a name="method-i-get_unsubscribe_info"></a>

          
          <div class="method-heading">
            <span class="method-name">get_unsubscribe_info</span><span
              class="method-args">(comp_inst)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="get_unsubscribe_info-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1310</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_unsubscribe_info</span>(<span class="ruby-identifier">comp_inst</span>)
  <span class="ruby-identifier">old_features</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">requires</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">cartridge_name</span>] <span class="ruby-comment">#[get_feature(comp_inst.cartridge_name, comp_inst.component_name)]</span>
  <span class="ruby-identifier">old_connections</span>, <span class="ruby-identifier">ignore</span>, <span class="ruby-identifier">ignore</span> = <span class="ruby-identifier">elaborate</span>(<span class="ruby-identifier">old_features</span>)
  <span class="ruby-identifier">sub_pub_hash</span> = {}
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">old_connections</span>
    <span class="ruby-identifier">old_connections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">old_conn</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> (<span class="ruby-identifier">old_conn</span>[<span class="ruby-string">&quot;from_comp_inst&quot;</span>][<span class="ruby-string">&quot;cart&quot;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">cartridge_name</span>) <span class="ruby-keyword">and</span>
         (<span class="ruby-identifier">old_conn</span>[<span class="ruby-string">&quot;from_comp_inst&quot;</span>][<span class="ruby-string">&quot;comp&quot;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">comp_inst</span>.<span class="ruby-identifier">component_name</span>)
        <span class="ruby-identifier">to_cart_comp</span> = <span class="ruby-identifier">old_conn</span>[<span class="ruby-string">&quot;to_comp_inst&quot;</span>][<span class="ruby-string">&quot;cart&quot;</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">old_conn</span>[<span class="ruby-string">&quot;to_comp_inst&quot;</span>][<span class="ruby-string">&quot;comp&quot;</span>]
        <span class="ruby-identifier">sub_pub_hash</span>[<span class="ruby-identifier">to_cart_comp</span>] = [<span class="ruby-identifier">old_conn</span>[<span class="ruby-string">&quot;to_comp_inst&quot;</span>], <span class="ruby-identifier">old_conn</span>[<span class="ruby-string">&quot;from_comp_inst&quot;</span>]]
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">sub_pub_hash</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_unsubscribe_info-source -->
            
          </div>

          

          
        </div><!-- get_unsubscribe_info-method -->

      
        <div id="get_updated_ssh_keys-method" class="method-detail ">
          <a name="method-i-get_updated_ssh_keys"></a>

          
          <div class="method-heading">
            <span class="method-name">get_updated_ssh_keys</span><span
              class="method-args">(user_id, keys)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>The ssh key names are used as part of the ssh key comments on the
application’s gears Do not change the format of the key name, otherwise it
may break key removal code on the node</p>

<p>FIXME why are we not using uuids and hashes to guarantee key uniqueness on
the nodes?</p>
            

            
            <div class="method-source-code" id="get_updated_ssh_keys-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2786</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_updated_ssh_keys</span>(<span class="ruby-identifier">user_id</span>, <span class="ruby-identifier">keys</span>)
  <span class="ruby-identifier">updated_keys_attrs</span> = <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">key_attrs</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">serializable_hash</span>.<span class="ruby-identifier">deep_dup</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">key</span>.<span class="ruby-identifier">class</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">UserSshKey</span>
      <span class="ruby-identifier">key_attrs</span>[<span class="ruby-string">&quot;name&quot;</span>] = <span class="ruby-identifier">user_id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">key_attrs</span>[<span class="ruby-string">&quot;name&quot;</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-constant">SystemSshKey</span>
      <span class="ruby-identifier">key_attrs</span>[<span class="ruby-string">&quot;name&quot;</span>] = <span class="ruby-string">&quot;domain-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">key_attrs</span>[<span class="ruby-string">&quot;name&quot;</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-constant">ApplicationSshKey</span>
      <span class="ruby-identifier">key_attrs</span>[<span class="ruby-string">&quot;name&quot;</span>] = <span class="ruby-string">&quot;application-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">key_attrs</span>[<span class="ruby-string">&quot;name&quot;</span>]
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">key_attrs</span>
  }
  <span class="ruby-identifier">updated_keys_attrs</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_updated_ssh_keys-source -->
            
          </div>

          

          
        </div><!-- get_updated_ssh_keys-method -->

      
        <div id="get_web_framework_gears-method" class="method-detail ">
          <a name="method-i-get_web_framework_gears"></a>

          
          <div class="method-heading">
            <span class="method-name">get_web_framework_gears</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="get_web_framework_gears-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1196</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_web_framework_gears</span>
  [].<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gears</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">removed</span>
          <span class="ruby-identifier">gears</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">gear</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">is_web_framework?</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_web_framework_gears-source -->
            
          </div>

          

          
        </div><!-- get_web_framework_gears-method -->

      
        <div id="get_web_proxy_gears-method" class="method-detail ">
          <a name="method-i-get_web_proxy_gears"></a>

          
          <div class="method-heading">
            <span class="method-name">get_web_proxy_gears</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="get_web_proxy_gears-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1208</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">get_web_proxy_gears</span>
  [].<span class="ruby-identifier">tap</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gears</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">removed</span>
          <span class="ruby-identifier">gears</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">gear</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">is_web_proxy?</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- get_web_proxy_gears-source -->
            
          </div>

          

          
        </div><!-- get_web_proxy_gears-method -->

      
        <div id="group_instances_with_scale-method" class="method-detail ">
          <a name="method-i-group_instances_with_scale"></a>

          
          <div class="method-heading">
            <span class="method-name">group_instances_with_scale</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Retrieve the list of {GroupInstance} objects along with min and max gear
specifications from group overrides @return [<a
href="Array.html">Array</a>&lt;GroupInstance&gt;]</p>
            

            
            <div class="method-source-code" id="group_instances_with_scale-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 506</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">group_instances_with_scale</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_instances</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group_instance</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">override_spec</span> = <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">get_group_override</span>
    <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">min</span> = <span class="ruby-identifier">override_spec</span>[<span class="ruby-string">&quot;min_gears&quot;</span>]
    <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">max</span> = <span class="ruby-identifier">override_spec</span>[<span class="ruby-string">&quot;max_gears&quot;</span>]
    <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">min</span> = <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">min</span> }.<span class="ruby-identifier">max</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">min</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">min</span> = <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">sparse_instances</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">min</span> }.<span class="ruby-identifier">max</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">min</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">max</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">max</span> = <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">max</span><span class="ruby-operator">==</span><span class="ruby-value">-1</span> <span class="ruby-operator">?</span> <span class="ruby-constant">MAX_SCALE_NUM</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">max</span> }.<span class="ruby-identifier">min</span>
      <span class="ruby-identifier">max</span> = <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">sparse_instances</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">max</span><span class="ruby-operator">==</span><span class="ruby-value">-1</span> <span class="ruby-operator">?</span> <span class="ruby-constant">MAX_SCALE_NUM</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">max</span> }.<span class="ruby-identifier">min</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">max</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">max</span> = (<span class="ruby-identifier">max</span><span class="ruby-operator">==</span><span class="ruby-constant">MAX_SCALE_NUM</span> <span class="ruby-operator">?</span> <span class="ruby-value">-1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">max</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">group_instance</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- group_instances_with_scale-source -->
            
          </div>

          

          
        </div><!-- group_instances_with_scale-method -->

      
        <div id="health_check_path-method" class="method-detail ">
          <a name="method-i-health_check_path"></a>

          
          <div class="method-heading">
            <span class="method-name">health_check_path</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Get path for checking application health This method is only to maintain
backwards compatibility for rest api version 1.0 @return [String]</p>
            

            
            <div class="method-source-code" id="health_check_path-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2805</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">health_check_path</span>
  <span class="ruby-identifier">web_cart</span> = <span class="ruby-identifier">get_framework_cartridge</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">web_cart</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">page</span> = <span class="ruby-string">'health'</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">web_cart</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">'php'</span>
    <span class="ruby-identifier">page</span> = <span class="ruby-string">'health_check.php'</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">web_cart</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">'zend'</span>
    <span class="ruby-identifier">page</span> = <span class="ruby-string">'health_check.php'</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">web_cart</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">'perl'</span>
    <span class="ruby-identifier">page</span> = <span class="ruby-string">'health_check.pl'</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">page</span> = <span class="ruby-string">'health'</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- health_check_path-source -->
            
          </div>

          

          
        </div><!-- health_check_path-method -->

      
        <div id="list_user_env_variables-method" class="method-detail ">
          <a name="method-i-list_user_env_variables"></a>

          
          <div class="method-heading">
            <span class="method-name">list_user_env_variables</span><span
              class="method-args">(vars=[])</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>List all or selected user defined environment variables in the application.
@param vars [<a href="Array.html">Array</a>&lt;String&gt;] Selected user
environment variable names. Each entry must contain name @return [Hash]
Environment variables in the application.</p>
            

            
            <div class="method-source-code" id="list_user_env_variables-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 498</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">list_user_env_variables</span>(<span class="ruby-identifier">vars</span>=[])
  <span class="ruby-identifier">result_io</span> = <span class="ruby-identifier">get_app_dns_gear</span>.<span class="ruby-identifier">list_user_env_vars</span>(<span class="ruby-identifier">vars</span>)
  <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">result_io</span>.<span class="ruby-identifier">resultIO</span>.<span class="ruby-identifier">string</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- list_user_env_variables-source -->
            
          </div>

          

          
        </div><!-- list_user_env_variables-method -->

      
        <div id="make_ha-method" class="method-detail ">
          <a name="method-i-make_ha"></a>

          
          <div class="method-heading">
            <span class="method-name">make_ha</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Update the application’s group overrides such that a scalable application
becomes HA This broadly means setting the ‘min’ of web_proxy sparse cart to
2</p>
            

            
            <div class="method-source-code" id="make_ha-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 797</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">make_ha</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;This feature ('High Availability') is currently disabled. Enable it in OpenShift's config options.&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">openshift</span>[<span class="ruby-value">:allow_ha_applications</span>]
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;'High Availability' is not an allowed feature for the account ('#{self.domain.owner.login}')&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">ha</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Only scalable applications can be made 'HA'&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Application is already HA&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">ha</span>

  <span class="ruby-identifier">component_instance</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cats</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">ci</span>.<span class="ruby-identifier">cartridge_name</span>, <span class="ruby-keyword">self</span>).<span class="ruby-identifier">categories</span>
    <span class="ruby-identifier">cats</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;web_proxy&quot;</span>
  }.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Cannot make the application HA because the web cartridge's max gear limit is '1'&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">get_group_override</span>(<span class="ruby-string">'max_gears'</span>)<span class="ruby-operator">==</span><span class="ruby-value">1</span>
  <span class="ruby-comment"># set the web_proxy's min to 2</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">update_component_limits</span>(<span class="ruby-identifier">component_instance</span>, <span class="ruby-value">2</span>, <span class="ruby-value">-1</span>, <span class="ruby-keyword">nil</span>)

  <span class="ruby-comment"># and the web_frameworks' min to 2 as well so that the app stays HA</span>
  <span class="ruby-identifier">web_ci</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cats</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">ci</span>.<span class="ruby-identifier">cartridge_name</span>, <span class="ruby-keyword">self</span>).<span class="ruby-identifier">categories</span>
    <span class="ruby-identifier">cats</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;web_framework&quot;</span>
  }.<span class="ruby-identifier">first</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">web_ci</span>.<span class="ruby-identifier">min</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span>
    <span class="ruby-identifier">scale_up_needed</span> = <span class="ruby-identifier">web_ci</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">length</span><span class="ruby-operator">&gt;</span><span class="ruby-value">1</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">update_component_limits</span>(<span class="ruby-identifier">web_ci</span>, <span class="ruby-value">2</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">scale_up_needed</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scale_by</span>(<span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">group_instance</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Make ha's remaining tasks -</span>
  <span class="ruby-comment">#   resend routing endpoints to routing plugin</span>
  <span class="ruby-comment">#   register ha dns</span>
  <span class="ruby-comment">#   set ha flag</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">MakeAppHaOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">save!</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- make_ha-source -->
            
          </div>

          

          
        </div><!-- make_ha-method -->

      
        <div id="members_changed-method" class="method-detail ">
          <a name="method-i-members_changed"></a>

          
          <div class="method-heading">
            <span class="method-name">members_changed</span><span
              class="method-args">(added, removed, changed_roles)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="members_changed-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1427</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">members_changed</span>(<span class="ruby-identifier">added</span>, <span class="ruby-identifier">removed</span>, <span class="ruby-identifier">changed_roles</span>)
  <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">ChangeMembersOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">members_added</span><span class="ruby-operator">:</span> <span class="ruby-identifier">added</span>.<span class="ruby-identifier">presence</span>, <span class="ruby-identifier">members_removed</span><span class="ruby-operator">:</span> <span class="ruby-identifier">removed</span>.<span class="ruby-identifier">presence</span>, <span class="ruby-identifier">roles_changed</span><span class="ruby-operator">:</span> <span class="ruby-identifier">changed_roles</span>.<span class="ruby-identifier">presence</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- members_changed-source -->
            
          </div>

          

          
        </div><!-- members_changed-method -->

      
        <div id="merge_comp_specs-method" class="method-detail ">
          <a name="method-i-merge_comp_specs"></a>

          
          <div class="method-heading">
            <span class="method-name">merge_comp_specs</span><span
              class="method-args">(first, second)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="merge_comp_specs-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2348</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">merge_comp_specs</span>(<span class="ruby-identifier">first</span>, <span class="ruby-identifier">second</span>)
  <span class="ruby-identifier">return_specs</span> = []
  <span class="ruby-identifier">first</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">new_spec</span> = { <span class="ruby-string">&quot;cart&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-string">&quot;comp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;comp&quot;</span>] }
    <span class="ruby-identifier">new_spec</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] = <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;min_gears&quot;</span>)
    <span class="ruby-identifier">new_spec</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] = <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;max_gears&quot;</span>)
    <span class="ruby-identifier">new_spec</span>[<span class="ruby-string">&quot;multiplier&quot;</span>] = <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;multiplier&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;multiplier&quot;</span>)
    <span class="ruby-identifier">return_specs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_spec</span>
  }
  <span class="ruby-identifier">second</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">found</span> = <span class="ruby-identifier">return_specs</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">rs</span><span class="ruby-operator">|</span> <span class="ruby-identifier">rs</span>[<span class="ruby-string">&quot;comp&quot;</span>]<span class="ruby-operator">==</span><span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;comp&quot;</span>] <span class="ruby-keyword">and</span> <span class="ruby-identifier">rs</span>[<span class="ruby-string">&quot;cart&quot;</span>]<span class="ruby-operator">==</span><span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>] }
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">found</span>
      <span class="ruby-identifier">found</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] = [<span class="ruby-identifier">found</span>[<span class="ruby-string">&quot;min_gears&quot;</span>]<span class="ruby-operator">||</span><span class="ruby-value">1</span>, <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;min_gears&quot;</span>]<span class="ruby-operator">||</span><span class="ruby-value">1</span>].<span class="ruby-identifier">max</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">found</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;min_gears&quot;</span>]
      <span class="ruby-identifier">found</span>[<span class="ruby-string">&quot;multiplier&quot;</span>] = [<span class="ruby-identifier">found</span>[<span class="ruby-string">&quot;multiplier&quot;</span>]<span class="ruby-operator">||</span><span class="ruby-value">1</span>, <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;multiplier&quot;</span>]<span class="ruby-operator">||</span><span class="ruby-value">1</span>].<span class="ruby-identifier">max</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">found</span>[<span class="ruby-string">&quot;multiplier&quot;</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;multiplier&quot;</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">new_spec</span> = { <span class="ruby-string">&quot;cart&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-string">&quot;comp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;comp&quot;</span>] }
      <span class="ruby-identifier">new_spec</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] = <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;min_gears&quot;</span>)
      <span class="ruby-identifier">new_spec</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] = <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;max_gears&quot;</span>)
      <span class="ruby-identifier">new_spec</span>[<span class="ruby-string">&quot;multiplier&quot;</span>] = <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;multiplier&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;multiplier&quot;</span>)
      <span class="ruby-identifier">return_specs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_spec</span>
    <span class="ruby-keyword">end</span>
  }
  <span class="ruby-identifier">return_specs</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- merge_comp_specs-source -->
            
          </div>

          

          
        </div><!-- merge_comp_specs-method -->

      
        <div id="merge_group_overrides-method" class="method-detail ">
          <a name="method-i-merge_group_overrides"></a>

          
          <div class="method-heading">
            <span class="method-name">merge_group_overrides</span><span
              class="method-args">(first, second)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="merge_group_overrides-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2373</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">merge_group_overrides</span>(<span class="ruby-identifier">first</span>, <span class="ruby-identifier">second</span>)
  <span class="ruby-identifier">return_go</span> = { }

  <span class="ruby-identifier">framework_carts</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">cartridge_names</span>(<span class="ruby-string">&quot;web_framework&quot;</span>, <span class="ruby-keyword">self</span>)
  <span class="ruby-identifier">first_has_web_framework</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;components&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">components</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">c</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">components</span>[<span class="ruby-string">'cart'</span>], <span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">is_web_framework?</span>
      <span class="ruby-identifier">first_has_web_framework</span> = <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">break</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">first_has_web_framework</span>
    <span class="ruby-identifier">return_go</span>[<span class="ruby-string">&quot;components&quot;</span>] = <span class="ruby-identifier">merge_comp_specs</span>(<span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;components&quot;</span>], <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;components&quot;</span>]) <span class="ruby-comment">#(first[&quot;components&quot;] + second[&quot;components&quot;]).uniq</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">return_go</span>[<span class="ruby-string">&quot;components&quot;</span>] = <span class="ruby-identifier">merge_comp_specs</span>(<span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;components&quot;</span>], <span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;components&quot;</span>]) <span class="ruby-comment">#(second[&quot;components&quot;] + first[&quot;components&quot;]).uniq</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">return_go</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] = [<span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;min_gears&quot;</span>]<span class="ruby-operator">||</span><span class="ruby-value">1</span>, <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;min_gears&quot;</span>]<span class="ruby-operator">||</span><span class="ruby-value">1</span>].<span class="ruby-identifier">max</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;min_gears&quot;</span>]
  <span class="ruby-identifier">return_go</span>[<span class="ruby-string">&quot;additional_filesystem_gb&quot;</span>] = [<span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;additional_filesystem_gb&quot;</span>]<span class="ruby-operator">||</span><span class="ruby-value">0</span>, <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;additional_filesystem_gb&quot;</span>]<span class="ruby-operator">||</span><span class="ruby-value">0</span>].<span class="ruby-identifier">max</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;additional_filesystem_gb&quot;</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;additional_filesystem_gb&quot;</span>]
  <span class="ruby-identifier">fmax</span> = (<span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;max_gears&quot;</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;max_gears&quot;</span>]<span class="ruby-operator">==</span><span class="ruby-value">-1</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">MAX_SCALE_NUM</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;max_gears&quot;</span>]
  <span class="ruby-identifier">smax</span> = (<span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;max_gears&quot;</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;max_gears&quot;</span>]<span class="ruby-operator">==</span><span class="ruby-value">-1</span>) <span class="ruby-operator">?</span> <span class="ruby-constant">MAX_SCALE_NUM</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;max_gears&quot;</span>]
  <span class="ruby-identifier">return_go</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] = [<span class="ruby-identifier">fmax</span>,<span class="ruby-identifier">smax</span>].<span class="ruby-identifier">min</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;max_gears&quot;</span>]
  <span class="ruby-identifier">return_go</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] = <span class="ruby-value">-1</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">return_go</span>[<span class="ruby-string">&quot;max_gears&quot;</span>]<span class="ruby-operator">==</span><span class="ruby-constant">MAX_SCALE_NUM</span>

  <span class="ruby-identifier">return_go</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] = (<span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;gear_size&quot;</span>]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] <span class="ruby-keyword">or</span> <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;gear_size&quot;</span>]
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] <span class="ruby-keyword">and</span> <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] <span class="ruby-keyword">and</span> (<span class="ruby-identifier">first</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] <span class="ruby-operator">!=</span> <span class="ruby-identifier">second</span>[<span class="ruby-string">&quot;gear_size&quot;</span>])
    <span class="ruby-identifier">carts</span> = []
    <span class="ruby-identifier">return_go</span>[<span class="ruby-string">'components'</span>].<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">comp</span><span class="ruby-operator">|</span> <span class="ruby-identifier">carts</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">comp</span>[<span class="ruby-string">'cart'</span>]}
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Incompatible gear sizes: #{first[&quot;gear_size&quot;]} and #{second[&quot;gear_size&quot;]} for components: #{carts.uniq.to_sentence} that will reside on the same gear.&quot;</span>, <span class="ruby-value">142</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">return_go</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- merge_group_overrides-source -->
            
          </div>

          

          
        </div><!-- merge_group_overrides-method -->

      
        <div id="name-3D-method" class="method-detail ">
          <a name="method-i-name-3D"></a>

          
          <div class="method-heading">
            <span class="method-name">name=</span><span
              class="method-args">(app_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Setter for application name. Sets both the name and the canonical_name for
the application @param app_name [String] The application name</p>
            

            
            <div class="method-source-code" id="name-3D-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 351</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">name=</span>(<span class="ruby-identifier">app_name</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">canonical_name</span> = <span class="ruby-identifier">app_name</span>.<span class="ruby-identifier">downcase</span>
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- name-3D-source -->
            
          </div>

          

          
        </div><!-- name-3D-method -->

      
        <div id="patch_user_env_variables-method" class="method-detail ">
          <a name="method-i-patch_user_env_variables"></a>

          
          <div class="method-heading">
            <span class="method-name">patch_user_env_variables</span><span
              class="method-args">(vars)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Add or Update or Delete user defined environment variables to all gears on
the application. @param vars [<a href="Array.html">Array</a>&lt;Hash&gt;]
<a href="User.html">User</a> environment variables. Each entry contains
name and/or value @return [ResultIO] Output from node platform</p>
            

            
            <div class="method-source-code" id="patch_user_env_variables-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 484</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">patch_user_env_variables</span>(<span class="ruby-identifier">vars</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">PatchUserEnvVarsOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_env_vars</span><span class="ruby-operator">:</span> <span class="ruby-identifier">vars</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- patch_user_env_variables-source -->
            
          </div>

          

          
        </div><!-- patch_user_env_variables-method -->

      
        <div id="process_commands-method" class="method-detail ">
          <a name="method-i-process_commands"></a>

          
          <div class="method-heading">
            <span class="method-name">process_commands</span><span
              class="method-args">(result_io, component_id=nil, gear=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Processes directives returned by component hooks to add/remove domain ssh
keys, app ssh keys, env variables, broker keys etc @note {<a
href="Application.html#method-i-run_jobs">run_jobs</a>} must be called in
order to perform the updates</p>

<h2>Parameters:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>result_io</p></td>
<td>
<p>{ResultIO} object with directives from cartridge hooks</p>
</td></tr></table>
            

            
            <div class="method-source-code" id="process_commands-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1438</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">process_commands</span>(<span class="ruby-identifier">result_io</span>, <span class="ruby-identifier">component_id</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">gear</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">commands</span> = <span class="ruby-identifier">result_io</span>.<span class="ruby-identifier">cart_commands</span>
  <span class="ruby-identifier">add_ssh_keys</span> = []

  <span class="ruby-identifier">remove_env_vars</span> = []

  <span class="ruby-identifier">domain_keys_to_add</span> = []

  <span class="ruby-identifier">domain_env_vars_to_add</span> = []

  <span class="ruby-identifier">commands</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">command_item</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">command_item</span>[<span class="ruby-value">:command</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;SYSTEM_SSH_KEY_ADD&quot;</span>
      <span class="ruby-identifier">domain_keys_to_add</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">SystemSshKey</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;ssh-rsa&quot;</span>, <span class="ruby-identifier">content</span><span class="ruby-operator">:</span> <span class="ruby-identifier">command_item</span>[<span class="ruby-value">:args</span>][<span class="ruby-value">0</span>], <span class="ruby-identifier">component_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">component_id</span>))
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;APP_SSH_KEY_ADD&quot;</span>
      <span class="ruby-identifier">id</span> = (<span class="ruby-identifier">gear</span>.<span class="ruby-identifier">nil?</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">component_id</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">_id</span>
      <span class="ruby-identifier">add_ssh_keys</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ApplicationSshKey</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">command_item</span>[<span class="ruby-value">:args</span>][<span class="ruby-value">0</span>], <span class="ruby-identifier">type</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;ssh-rsa&quot;</span>, <span class="ruby-identifier">content</span><span class="ruby-operator">:</span> <span class="ruby-identifier">command_item</span>[<span class="ruby-value">:args</span>][<span class="ruby-value">1</span>], <span class="ruby-identifier">created_at</span><span class="ruby-operator">:</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>, <span class="ruby-identifier">component_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">id</span>)
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;APP_ENV_VAR_REMOVE&quot;</span>
      <span class="ruby-identifier">remove_env_vars</span>.<span class="ruby-identifier">push</span>({<span class="ruby-string">&quot;key&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">command_item</span>[<span class="ruby-value">:args</span>][<span class="ruby-value">0</span>]})
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;ENV_VAR_ADD&quot;</span>
      <span class="ruby-identifier">domain_env_vars_to_add</span>.<span class="ruby-identifier">push</span>({<span class="ruby-string">&quot;key&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">command_item</span>[<span class="ruby-value">:args</span>][<span class="ruby-value">0</span>], <span class="ruby-string">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">command_item</span>[<span class="ruby-value">:args</span>][<span class="ruby-value">1</span>], <span class="ruby-string">&quot;component_id&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">component_id</span>})
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;BROKER_KEY_ADD&quot;</span>
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">AddBrokerAuthKeyOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
      <span class="ruby-constant">Application</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">_id</span>).<span class="ruby-identifier">update_all</span>({ <span class="ruby-string">&quot;$push&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">pending_op_groups</span><span class="ruby-operator">:</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">serializable_hash_with_timestamp</span> } })
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;NOTIFY_ENDPOINT_CREATE&quot;</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">gear</span>
        <span class="ruby-identifier">pi</span> = <span class="ruby-constant">PortInterface</span>.<span class="ruby-identifier">create_port_interface</span>(<span class="ruby-identifier">gear</span>, <span class="ruby-identifier">component_id</span>, *<span class="ruby-identifier">command_item</span>[<span class="ruby-value">:args</span>])
        <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">port_interfaces</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">pi</span>)
        <span class="ruby-identifier">pi</span>.<span class="ruby-identifier">publish_endpoint</span>(<span class="ruby-keyword">self</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;NOTIFY_ENDPOINT_DELETE&quot;</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">gear</span>
        <span class="ruby-identifier">public_ip</span>, <span class="ruby-identifier">public_port</span> = <span class="ruby-identifier">command_item</span>[<span class="ruby-value">:args</span>]
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">pi</span> = <span class="ruby-constant">PortInterface</span>.<span class="ruby-identifier">find_port_interface</span>(<span class="ruby-identifier">gear</span>, <span class="ruby-identifier">public_ip</span>, <span class="ruby-identifier">public_port</span>)
          <span class="ruby-identifier">pi</span>.<span class="ruby-identifier">unpublish_endpoint</span>(<span class="ruby-keyword">self</span>, <span class="ruby-identifier">public_ip</span>)
          <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">port_interfaces</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">pi</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">add_ssh_keys</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">keys_attrs</span> = <span class="ruby-identifier">get_updated_ssh_keys</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">add_ssh_keys</span>)
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">add_keys_attrs</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-constant">Application</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">_id</span>).<span class="ruby-identifier">update_all</span>({ <span class="ruby-string">&quot;$push&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">pending_op_groups</span><span class="ruby-operator">:</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">serializable_hash_with_timestamp</span> }, <span class="ruby-string">&quot;$pushAll&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">app_ssh_keys</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span> }})
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">remove_env_vars</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">remove_env_vars</span><span class="ruby-operator">:</span> <span class="ruby-identifier">remove_env_vars</span>)
    <span class="ruby-constant">Application</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">_id</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">_id</span>).<span class="ruby-identifier">update_all</span>({ <span class="ruby-string">&quot;$push&quot;</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">pending_op_groups</span><span class="ruby-operator">:</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">serializable_hash_with_timestamp</span> }})
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Have to remember to run_jobs for the other apps involved at some point</span>
  <span class="ruby-comment"># run_jobs is called on the domain after all processing is done from add_features and remove_features</span>
  <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">add_system_ssh_keys</span>(<span class="ruby-identifier">domain_keys_to_add</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">domain_keys_to_add</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">add_env_variables</span>(<span class="ruby-identifier">domain_env_vars_to_add</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">domain_env_vars_to_add</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- process_commands-source -->
            
          </div>

          

          
        </div><!-- process_commands-method -->

      
        <div id="process_group_overrides-method" class="method-detail ">
          <a name="method-i-process_group_overrides"></a>

          
          <div class="method-heading">
            <span class="method-name">process_group_overrides</span><span
              class="method-args">(component_instances, group_overrides)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="process_group_overrides-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2257</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">process_group_overrides</span>(<span class="ruby-identifier">component_instances</span>, <span class="ruby-identifier">group_overrides</span>)
  <span class="ruby-identifier">overrides</span> = (<span class="ruby-identifier">group_overrides</span> <span class="ruby-operator">||</span> []).<span class="ruby-identifier">deep_dup</span>
  <span class="ruby-identifier">cleaned_overrides</span> = []

  <span class="ruby-comment"># Resolve additional group overrides from component_instances</span>
  <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">component_instance</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">component_instance</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">profile_for_feature</span>(<span class="ruby-identifier">component_instance</span>[<span class="ruby-string">&quot;comp&quot;</span>])
    <span class="ruby-identifier">prof</span> = <span class="ruby-identifier">prof</span>[<span class="ruby-value">0</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Array</span>)
    <span class="ruby-identifier">comp</span> = <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">get_component</span>(<span class="ruby-identifier">component_instance</span>[<span class="ruby-string">&quot;comp&quot;</span>])
    <span class="ruby-identifier">overrides</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">prof</span>.<span class="ruby-identifier">group_overrides</span>.<span class="ruby-identifier">deep_dup</span>
    <span class="ruby-identifier">component_go</span> = {<span class="ruby-string">&quot;components&quot;</span> =<span class="ruby-operator">&gt;</span> [{<span class="ruby-string">&quot;cart&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;comp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">name</span>}] }
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">comp</span>.<span class="ruby-identifier">is_sparse?</span>
      <span class="ruby-identifier">component_go</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] = <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">min</span>
      <span class="ruby-identifier">component_go</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] = <span class="ruby-identifier">comp</span>.<span class="ruby-identifier">scaling</span>.<span class="ruby-identifier">max</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">overrides</span> <span class="ruby-operator">&lt;&lt;</span>  <span class="ruby-identifier">component_go</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Resolve all components within the group overrides</span>
  <span class="ruby-comment"># Remove deleted components from group_overrides and build cleaned_overrides array</span>
  <span class="ruby-identifier">overrides</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group_override</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cleaned_override</span> = {}
    <span class="ruby-identifier">cleaned_override</span>[<span class="ruby-string">&quot;components&quot;</span>] <span class="ruby-operator">||=</span> []

    <span class="ruby-identifier">group_override</span>[<span class="ruby-string">&quot;components&quot;</span>].<span class="ruby-identifier">map!</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">comp_spec</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">comp_spec</span> = {<span class="ruby-string">&quot;comp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">comp_spec</span>} <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-constant">String</span>
      <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">is_valid</span> =  (<span class="ruby-identifier">ci</span>[<span class="ruby-string">&quot;comp&quot;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;comp&quot;</span>] <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>].<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">ci</span>[<span class="ruby-string">&quot;cart&quot;</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;cart&quot;</span>]))
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">is_valid</span>
          <span class="ruby-comment"># try once more with comp_spec[&quot;comp&quot;] possibly not the cartridge name</span>
          <span class="ruby-comment"># basically some override (either by the user or through a group_override section in a cartridge)</span>
          <span class="ruby-comment"># is referring to a component/feature that is not a cartridge name or component name of any of the cartridges</span>
          <span class="ruby-comment"># installed on the system</span>
          <span class="ruby-identifier">ci_cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">ci</span>[<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-keyword">self</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-identifier">ci_cart</span>.<span class="ruby-identifier">profile_for_feature</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;comp&quot;</span>])
          <span class="ruby-keyword">unless</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword">or</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">Array</span>
            <span class="ruby-comment"># this is the cartridge because we found a profile matching the feature, just double check on the component</span>
            <span class="ruby-comment"># if this was an auto-generated component then we are good to choose this ci</span>
            <span class="ruby-keyword">begin</span>
              <span class="ruby-identifier">is_valid</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">get_component</span>(<span class="ruby-identifier">ci</span>[<span class="ruby-string">&quot;comp&quot;</span>]).<span class="ruby-identifier">generated</span>
            <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">e</span>
              <span class="ruby-comment"># ignore</span>
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">unless</span> <span class="ruby-identifier">is_valid</span>
            <span class="ruby-identifier">is_valid</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">ci_cart</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;comp&quot;</span>])
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">is_valid</span>
      }
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">component</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">component</span> = <span class="ruby-identifier">component</span>.<span class="ruby-identifier">first</span>

      <span class="ruby-comment"># add sparse cart's special overrides to the cleaned_override</span>
      <span class="ruby-identifier">component</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] = <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;min_gears&quot;</span>]
      <span class="ruby-identifier">component</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] = <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;max_gears&quot;</span>]
      <span class="ruby-identifier">component</span>[<span class="ruby-string">&quot;multiplier&quot;</span>] = <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;multiplier&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">comp_spec</span>[<span class="ruby-string">&quot;multiplier&quot;</span>]

      <span class="ruby-identifier">cleaned_override</span>[<span class="ruby-string">&quot;components&quot;</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">component</span>
      <span class="ruby-identifier">component</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">cleaned_override</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] = <span class="ruby-identifier">group_override</span>[<span class="ruby-string">&quot;min_gears&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">group_override</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;min_gears&quot;</span>)
    <span class="ruby-identifier">cleaned_override</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] = <span class="ruby-identifier">group_override</span>[<span class="ruby-string">&quot;max_gears&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">group_override</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;max_gears&quot;</span>)
    <span class="ruby-identifier">cleaned_override</span>[<span class="ruby-string">&quot;additional_filesystem_gb&quot;</span>] = <span class="ruby-identifier">group_override</span>[<span class="ruby-string">&quot;additional_filesystem_gb&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">group_override</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;additional_filesystem_gb&quot;</span>)
    <span class="ruby-identifier">cleaned_override</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] = <span class="ruby-identifier">group_override</span>[<span class="ruby-string">&quot;gear_size&quot;</span>] <span class="ruby-keyword">if</span> <span class="ruby-identifier">group_override</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-string">&quot;gear_size&quot;</span>)
    <span class="ruby-identifier">cleaned_overrides</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">cleaned_override</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">group_override</span>[<span class="ruby-string">&quot;components&quot;</span>] <span class="ruby-keyword">and</span> <span class="ruby-identifier">group_override</span>[<span class="ruby-string">&quot;components&quot;</span>].<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># work on cleaned_overrides only</span>
  <span class="ruby-identifier">go_map</span> = {}
  <span class="ruby-identifier">cleaned_overrides</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">go</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">merged_go</span> = <span class="ruby-identifier">go</span>.<span class="ruby-identifier">deep_dup</span>
    <span class="ruby-identifier">go</span>[<span class="ruby-string">&quot;components&quot;</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">comp</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">existing_go</span> = <span class="ruby-identifier">go_map</span>[<span class="ruby-node">&quot;#{comp[&quot;cart&quot;]}/#{comp[&quot;comp&quot;]}&quot;</span>]
      <span class="ruby-identifier">merged_go</span> = <span class="ruby-identifier">merge_group_overrides</span>(<span class="ruby-identifier">merged_go</span>, <span class="ruby-identifier">existing_go</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">existing_go</span>
    }
    <span class="ruby-identifier">merged_go</span>[<span class="ruby-string">&quot;components&quot;</span>].<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">comp</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">go_map</span>[<span class="ruby-node">&quot;#{comp[&quot;cart&quot;]}/#{comp[&quot;comp&quot;]}&quot;</span>] = <span class="ruby-identifier">merged_go</span>
    }
  }
  <span class="ruby-identifier">processed_group_overrides</span> = []
  <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">go</span> = <span class="ruby-identifier">go_map</span>[<span class="ruby-node">&quot;#{ci[&quot;cart&quot;]}/#{ci[&quot;comp&quot;]}&quot;</span>]
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">go</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">processed_group_overrides</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">go</span>.<span class="ruby-identifier">deep_dup</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">processed_group_overrides</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">go</span>
  }
  <span class="ruby-keyword">return</span> [<span class="ruby-identifier">processed_group_overrides</span>, <span class="ruby-identifier">processed_group_overrides</span>]
<span class="ruby-keyword">end</span></pre>
            </div><!-- process_group_overrides-source -->
            
          </div>

          

          
        </div><!-- process_group_overrides-method -->

      
        <div id="quarantined-method" class="method-detail ">
          <a name="method-i-quarantined"></a>

          
          <div class="method-heading">
            <span class="method-name">quarantined</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="quarantined-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 269</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">quarantined</span>
  <span class="ruby-identifier">gears</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">quarantined</span>
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- quarantined-source -->
            
          </div>

          

          
        </div><!-- quarantined-method -->

      
        <div id="refresh_deployments-method" class="method-detail ">
          <a name="method-i-refresh_deployments"></a>

          
          <div class="method-heading">
            <span class="method-name">refresh_deployments</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="refresh_deployments-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2930</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">refresh_deployments</span>()
  <span class="ruby-comment">#TODO call node to get the latest deployments</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- refresh_deployments-source -->
            
          </div>

          

          
        </div><!-- refresh_deployments-method -->

      
        <div id="register_routing_dns-method" class="method-detail ">
          <a name="method-i-register_routing_dns"></a>

          
          <div class="method-heading">
            <span class="method-name">register_routing_dns</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="register_routing_dns-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1414</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">register_routing_dns</span>
  <span class="ruby-identifier">ha_dns_prefix</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">openshift</span>[<span class="ruby-value">:ha_dns_prefix</span>]
  <span class="ruby-identifier">ha_dns_suffix</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">openshift</span>[<span class="ruby-value">:ha_dns_suffix</span>]
  <span class="ruby-identifier">target_hostname</span> = <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">openshift</span>[<span class="ruby-value">:router_hostname</span>]
  <span class="ruby-identifier">dns</span> = <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">DnsService</span>.<span class="ruby-identifier">instance</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">dns</span>.<span class="ruby-identifier">register_application</span>(<span class="ruby-node">&quot;#{ha_dns_prefix}#{self.name}&quot;</span>, <span class="ruby-node">&quot;#{self.domain.namespace}#{ha_dns_suffix}&quot;</span>, <span class="ruby-identifier">target_hostname</span>)
    <span class="ruby-identifier">dns</span>.<span class="ruby-identifier">publish</span>
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-identifier">dns</span>.<span class="ruby-identifier">close</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- register_routing_dns-source -->
            
          </div>

          

          
        </div><!-- register_routing_dns-method -->

      
        <div id="reload-method" class="method-detail ">
          <a name="method-i-reload"></a>

          
          <div class="method-heading">
            <span class="method-name">reload</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="reload-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 243</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reload</span>
  [<span class="ruby-value">:@gear_groups</span>, <span class="ruby-value">:@cartridge_gear_groups</span>, <span class="ruby-value">:@framework_name</span>].<span class="ruby-identifier">each</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-identifier">s</span>, <span class="ruby-keyword">nil</span>) }
  <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">:cartridges</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">persisted?</span>
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- reload-source -->
            
          </div>

          

          
        </div><!-- reload-method -->

      
        <div id="reload_component_config-method" class="method-detail ">
          <a name="method-i-reload_component_config"></a>

          
          <div class="method-heading">
            <span class="method-name">reload_component_config</span><span
              class="method-args">(component_name, cartridge_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="reload_component_config-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1042</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reload_component_config</span>(<span class="ruby-identifier">component_name</span>, <span class="ruby-identifier">cartridge_name</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">ReloadCompConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> {<span class="ruby-string">&quot;comp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">component_name</span>, <span class="ruby-string">&quot;cart&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cartridge_name</span>}, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- reload_component_config-source -->
            
          </div>

          

          
        </div><!-- reload_component_config-method -->

      
        <div id="reload_config-method" class="method-detail ">
          <a name="method-i-reload_config"></a>

          
          <div class="method-heading">
            <span class="method-name">reload_config</span><span
              class="method-args">(feature=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="reload_config-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1014</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reload_config</span>(<span class="ruby-identifier">feature</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">feature</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">ReloadAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">ReloadFeatureConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">feature</span><span class="ruby-operator">:</span> <span class="ruby-identifier">feature</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- reload_config-source -->
            
          </div>

          

          
        </div><!-- reload_config-method -->

      
        <div id="remove_alias-method" class="method-detail ">
          <a name="method-i-remove_alias"></a>

          
          <div class="method-heading">
            <span class="method-name">remove_alias</span><span
              class="method-args">(fqdn)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Removes a DNS alias for the application.</p>

<h2>Parameters:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>fqdn</p></td>
<td>
<p>Fully qualified domain name of the alias to remove from this application</p>
</td></tr></table>

<h2>Returns:</h2>

<p>{PendingAppOps} object which tracks the progress of the operation.</p>
            

            
            <div class="method-source-code" id="remove_alias-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1156</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_alias</span>(<span class="ruby-identifier">fqdn</span>)
  <span class="ruby-identifier">fqdn</span> = <span class="ruby-identifier">fqdn</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">fqdn</span>
  <span class="ruby-identifier">al1as</span> = <span class="ruby-identifier">aliases</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">fqdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">fqdn</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">al1as</span>.<span class="ruby-identifier">has_private_ssl_certificate</span>
       <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">RemoveSslCertOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fqdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">al1as</span>.<span class="ruby-identifier">fqdn</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
       <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">RemoveAliasOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fqdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">al1as</span>.<span class="ruby-identifier">fqdn</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- remove_alias-source -->
            
          </div>

          

          
        </div><!-- remove_alias-method -->

      
        <div id="remove_env_variables-method" class="method-detail ">
          <a name="method-i-remove_env_variables"></a>

          
          <div class="method-heading">
            <span class="method-name">remove_env_variables</span><span
              class="method-args">(vars, parent_op=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Remove environment variables from all gears on the application. @param vars
[<a href="Array.html">Array</a>&lt;Hash&gt;] List of environment variables.
Each entry must contain key and value @param parent_op [PendingDomainOps]
object used to track this operation at a domain level @return [ResultIO]
Output from cartridges</p>
            

            
            <div class="method-source-code" id="remove_env_variables-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 470</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_env_variables</span>(<span class="ruby-identifier">vars</span>, <span class="ruby-identifier">parent_op</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">remove_env_vars</span><span class="ruby-operator">:</span> <span class="ruby-identifier">vars</span>, <span class="ruby-identifier">parent_op</span><span class="ruby-operator">:</span> <span class="ruby-identifier">parent_op</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- remove_env_variables-source -->
            
          </div>

          

          
        </div><!-- remove_env_variables-method -->

      
        <div id="remove_features-method" class="method-detail ">
          <a name="method-i-remove_features"></a>

          
          <div class="method-heading">
            <span class="method-name">remove_features</span><span
              class="method-args">(features, group_overrides=[], force=false, remove_all_features=false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Removes components from the application @param features [<a
href="Array.html">Array</a>&lt;String&gt;] List of features to remove from
the application. Each feature will be resolved to the cartridge which
provides it @param group_overrides [Array] List of group overrides @param
force [Boolean] Set to true when deleting an application. It allows removal
of web_proxy and ignores missing features @param remove_all_features
[Boolean] Set to true when deleting an application.</p>

<pre>It allows recomputing the list of features within the application after acquiring the lock.
If set to true, this ignores the features argument</pre>

<p>@return [ResultIO] Output from cartridges @raise [OpenShift::UserException]
Exception raised if there is any reason the feature/cartridge cannot be
removed from the <a href="Application.html">Application</a></p>
            

            
            <div class="method-source-code" id="remove_features-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 693</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_features</span>(<span class="ruby-identifier">features</span>, <span class="ruby-identifier">group_overrides</span>=[], <span class="ruby-identifier">force</span>=<span class="ruby-keyword">false</span>, <span class="ruby-identifier">remove_all_features</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">installed_features</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">requires</span>
  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>

  <span class="ruby-comment"># FIXME: remove_all_features argument is ignored here</span>
  <span class="ruby-comment"># For now, it is only used to check if we are removing a jenkins server application</span>
  <span class="ruby-comment"># If the jenkins server app is still being created, jenkins clients cannot exist.</span>
  <span class="ruby-comment"># But if this loop is modified to perform other checks/actions, we'll have to consider the remove_all_features flag</span>
  <span class="ruby-identifier">features</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feature</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid feature: #{feature}&quot;</span>, <span class="ruby-value">109</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">cart</span>
    <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-node">&quot;Removing feature #{feature}&quot;</span>

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">force</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;'#{feature}' cannot be removed&quot;</span>, <span class="ruby-value">137</span>) <span class="ruby-keyword">if</span> (<span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_web_proxy?</span> <span class="ruby-keyword">and</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>) <span class="ruby-keyword">or</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_web_framework?</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;'#{feature}' is not a feature of '#{self.name}'&quot;</span>, <span class="ruby-value">135</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">installed_features</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">feature</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># FIXME: Instead of relying on individual cartridge categories to determine if any dependent features</span>
    <span class="ruby-comment"># need to be removed in other applications, we need to make it more generic by using the domain_scope category</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">is_ci_server?</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">applications</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">uapp</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">uapp</span>.<span class="ruby-identifier">name</span>
        <span class="ruby-identifier">uapp</span>.<span class="ruby-identifier">requires</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">feature_name</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">ucart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">feature_name</span>, <span class="ruby-identifier">uapp</span>)
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">ucart</span>.<span class="ruby-identifier">is_ci_builder?</span>
            <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-identifier">uapp</span>) <span class="ruby-keyword">do</span>
              <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">RemoveFeaturesOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">features</span><span class="ruby-operator">:</span> [<span class="ruby-identifier">feature_name</span>], <span class="ruby-identifier">group_overrides</span><span class="ruby-operator">:</span> <span class="ruby-identifier">uapp</span>.<span class="ruby-identifier">group_overrides</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-identifier">uapp</span>.<span class="ruby-identifier">user_agent</span>)
              <span class="ruby-identifier">uapp</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
              <span class="ruby-identifier">client_result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
              <span class="ruby-identifier">uapp</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">client_result_io</span>)
              <span class="ruby-keyword">if</span> <span class="ruby-identifier">client_result_io</span>.<span class="ruby-identifier">exitcode</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
                <span class="ruby-identifier">client_result_io</span>.<span class="ruby-identifier">resultIO</span>.<span class="ruby-identifier">string</span> = <span class="ruby-node">&quot;Removed #{feature_name} from #{uapp.name}\n&quot;</span>
              <span class="ruby-keyword">end</span>
              <span class="ruby-identifier">result_io</span>.<span class="ruby-identifier">append</span>(<span class="ruby-identifier">client_result_io</span>)
              <span class="ruby-identifier">result_io</span>
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">feature_comps</span> = <span class="ruby-identifier">features</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">cart</span> = <span class="ruby-constant">CartridgeCache</span>.<span class="ruby-identifier">find_cartridge</span>(<span class="ruby-identifier">f</span>, <span class="ruby-keyword">self</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">cartridge_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">cart</span>.<span class="ruby-identifier">name</span>).<span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">nil</span>
  }
  <span class="ruby-identifier">valid_domain_jobs</span> = ((<span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">system_ssh_keys</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">feature_comps</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">component_id</span>.<span class="ruby-identifier">to_s</span> }) <span class="ruby-operator">||</span> (<span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">env_vars</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">feature_comps</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">e</span>[<span class="ruby-string">'component_id'</span>].<span class="ruby-identifier">to_s</span> })) <span class="ruby-keyword">rescue</span> <span class="ruby-keyword">true</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">RemoveFeaturesOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">features</span><span class="ruby-operator">:</span> <span class="ruby-identifier">features</span>, <span class="ruby-identifier">group_overrides</span><span class="ruby-operator">:</span> <span class="ruby-identifier">group_overrides</span>, <span class="ruby-identifier">remove_all_features</span><span class="ruby-operator">:</span> <span class="ruby-identifier">remove_all_features</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">result_io</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">valid_domain_jobs</span>

  <span class="ruby-comment"># removing this feature may have caused pending_ops to be created on the domain</span>
  <span class="ruby-comment"># for removing env vars and ssh keys</span>
  <span class="ruby-comment"># execute run_jobs on the domain to take care of those</span>
  <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">run_jobs</span>
  <span class="ruby-identifier">result_io</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- remove_features-source -->
            
          </div>

          

          
        </div><!-- remove_features-method -->

      
        <div id="remove_gear-method" class="method-detail ">
          <a name="method-i-remove_gear"></a>

          
          <div class="method-heading">
            <span class="method-name">remove_gear</span><span
              class="method-args">(gear_id)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="remove_gear-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1067</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_gear</span>(<span class="ruby-identifier">gear_id</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Application #{self.name} is not scalable&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Gear for removal not specified&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">gear_id</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">RemoveGearOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">gear_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- remove_gear-source -->
            
          </div>

          

          
        </div><!-- remove_gear-method -->

      
        <div id="remove_ssh_keys-method" class="method-detail ">
          <a name="method-i-remove_ssh_keys"></a>

          
          <div class="method-heading">
            <span class="method-name">remove_ssh_keys</span><span
              class="method-args">(user_id, keys, parent_op=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Remove the given ssh key from the application. If multiple users share the
same key, only the specified users key is removed but application access
will still be possible. @param user_id [String] The ID of the user
associated with the keys. If the user ID is nil, then the key is assumed to
be a system generated key @param keys [<a
href="Array.html">Array</a>&lt;SshKey&gt;] <a href="Array.html">Array</a>
of keys to remove from the application. @param parent_op [PendingDomainOps]
object used to track this operation at a domain level @return [ResultIO]
Output from cartridges</p>
            

            
            <div class="method-source-code" id="remove_ssh_keys-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_ssh_keys</span>(<span class="ruby-identifier">user_id</span>, <span class="ruby-identifier">keys</span>, <span class="ruby-identifier">parent_op</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-identifier">keys_attrs</span> = <span class="ruby-identifier">get_updated_ssh_keys</span>(<span class="ruby-identifier">user_id</span>, <span class="ruby-identifier">keys</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">return</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">user_id</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-constant">Ability</span>.<span class="ruby-identifier">has_permission?</span>(<span class="ruby-identifier">user_id</span>, <span class="ruby-value">:ssh_to_gears</span>, <span class="ruby-constant">Application</span>, <span class="ruby-identifier">role_for</span>(<span class="ruby-identifier">user_id</span>), <span class="ruby-keyword">self</span>)
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">remove_keys_attrs</span><span class="ruby-operator">:</span> <span class="ruby-identifier">keys_attrs</span>, <span class="ruby-identifier">parent_op</span><span class="ruby-operator">:</span> <span class="ruby-identifier">parent_op</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- remove_ssh_keys-source -->
            
          </div>

          

          
        </div><!-- remove_ssh_keys-method -->

      
        <div id="requires-method" class="method-detail ">
          <a name="method-i-requires"></a>

          
          <div class="method-heading">
            <span class="method-name">requires</span><span
              class="method-args">(include_pending=false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the feature requirements of the application @param include_pending
[Boolean] Include the pending changes when calculating the list of features
@return [<a href="Array.html">Array</a>&lt;String&gt;] List of features</p>
            

            
            <div class="method-source-code" id="requires-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 526</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">requires</span>(<span class="ruby-identifier">include_pending</span>=<span class="ruby-keyword">false</span>)
    <span class="ruby-identifier">features</span> = <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">ci</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ci</span>.<span class="ruby-identifier">cartridge_name</span>} <span class="ruby-comment">#get_feature(ci.cartridge_name, ci.component_name)}</span>

<span class="ruby-comment">#    if include_pending</span>
<span class="ruby-comment">#      self.pending_op_groups.each do |op_group|</span>
<span class="ruby-comment">#        case op_group.op_type</span>
<span class="ruby-comment">#        when :add_features</span>
<span class="ruby-comment">#          features += op_group[:args][&quot;features&quot;]</span>
<span class="ruby-comment">#       when :remove_features</span>
<span class="ruby-comment">#          features -= op_group[:args][&quot;features&quot;]</span>
<span class="ruby-comment">#        end</span>
<span class="ruby-comment">#      end</span>
<span class="ruby-comment">#    end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">include_pending</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">op_group</span><span class="ruby-operator">|</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">class</span>
        <span class="ruby-keyword">when</span> <span class="ruby-constant">AddFeaturesOpGroup</span>
          <span class="ruby-identifier">features</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">features</span>
        <span class="ruby-keyword">when</span> <span class="ruby-constant">RemoveFeaturesOpGroup</span>
          <span class="ruby-identifier">features</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">features</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">features</span> <span class="ruby-operator">||</span> []
  <span class="ruby-keyword">end</span></pre>
            </div><!-- requires-source -->
            
          </div>

          

          
        </div><!-- requires-method -->

      
        <div id="restart-method" class="method-detail ">
          <a name="method-i-restart"></a>

          
          <div class="method-heading">
            <span class="method-name">restart</span><span
              class="method-args">(feature=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="restart-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 989</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">restart</span>(<span class="ruby-identifier">feature</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">feature</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">RestartAppOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">RestartFeatureOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">feature</span><span class="ruby-operator">:</span> <span class="ruby-identifier">feature</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- restart-source -->
            
          </div>

          

          
        </div><!-- restart-method -->

      
        <div id="restart-21-method" class="method-detail ">
          <a name="method-i-restart-21"></a>

          
          <div class="method-heading">
            <span class="method-name">restart!</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="restart-21-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 137</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">restart!</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">messages</span>.<span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">response</span> = <span class="ruby-identifier">post</span>(<span class="ruby-value">:events</span>, <span class="ruby-keyword">nil</span>, {<span class="ruby-value">:event</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:restart</span>}.<span class="ruby-identifier">to_json</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">messages</span> = <span class="ruby-identifier">extract_messages</span>(<span class="ruby-identifier">response</span>)
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">ClientError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">error</span>
  <span class="ruby-ivar">@remote_errors</span> = <span class="ruby-identifier">error</span>
  <span class="ruby-identifier">load_remote_errors</span>(<span class="ruby-ivar">@remote_errors</span>, <span class="ruby-keyword">true</span>)
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- restart-21-source -->
            
          </div>

          

          
        </div><!-- restart-21-method -->

      
        <div id="restart_component-method" class="method-detail ">
          <a name="method-i-restart_component"></a>

          
          <div class="method-heading">
            <span class="method-name">restart_component</span><span
              class="method-args">(component_name, cartridge_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="restart_component-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1004</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">restart_component</span>(<span class="ruby-identifier">component_name</span>, <span class="ruby-identifier">cartridge_name</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">RestartCompOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> {<span class="ruby-string">&quot;comp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">component_name</span>, <span class="ruby-string">&quot;cart&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cartridge_name</span>}, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- restart_component-source -->
            
          </div>

          

          
        </div><!-- restart_component-method -->

      
        <div id="run_connection_hooks-method" class="method-detail ">
          <a name="method-i-run_connection_hooks"></a>

          
          <div class="method-heading">
            <span class="method-name">run_connection_hooks</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="run_connection_hooks-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1287</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run_connection_hooks</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">ExecuteConnectionsOpGroup</span>.<span class="ruby-identifier">new</span>()
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>

    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- run_connection_hooks-source -->
            
          </div>

          

          
        </div><!-- run_connection_hooks-method -->

      
        <div id="run_jobs-method" class="method-detail ">
          <a name="method-i-run_jobs"></a>

          
          <div class="method-heading">
            <span class="method-name">run_jobs</span><span
              class="method-args">(result_io=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Runs all pending jobs and stops at the first failure.</p>

<p>IMPORTANT: Callers should take the application lock prior to calling <a
href="Application.html#method-i-run_jobs">run_jobs</a></p>

<p>IMPORTANT: When changing jobs, be sure to leave old jobs runnable so that
pending_ops</p>

<pre>that are inserted during a running upgrade can continue to complete.</pre>

<h2>Returns:</h2>

<p>True on success or False if no pending jobs.</p>
            

            
            <div class="method-source-code" id="run_jobs-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1505</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">result_io</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">op_group</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">while</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">rollback_pending</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">first</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span> = <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">user_agent</span>

    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">elaborate</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">pending_ops</span>.<span class="ruby-identifier">where</span>(<span class="ruby-value">:state</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:rolledback</span>).<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">rollback_pending</span> = <span class="ruby-keyword">true</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">Exception</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Op group is already being rolled back.&quot;</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">reorder_usage_ops</span>
      <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">execute</span>(<span class="ruby-identifier">result_io</span>)
      <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">unreserve_gears</span>(<span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">num_gears_removed</span>, <span class="ruby-keyword">self</span>)
      <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">delete</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e_orig</span>
      <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Encountered error during execute '#{e_orig.message}'&quot;</span>
      <span class="ruby-comment"># don't log the error stacktrace if this exception was raised just to trigger a rollback </span>
      <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-identifier">e_orig</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">inspect</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rollback_pending</span>

      <span class="ruby-comment">#rollback</span>
      <span class="ruby-keyword">begin</span>
        <span class="ruby-comment"># reload the application before a rollback</span>
        <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reload</span>
        <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">execute_rollback</span>(<span class="ruby-identifier">result_io</span>)
        <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">delete</span>
        <span class="ruby-identifier">num_gears_recovered</span> = <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">num_gears_added</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">num_gears_created</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">num_gears_rolled_back</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">num_gears_destroyed</span>
        <span class="ruby-identifier">op_group</span>.<span class="ruby-identifier">unreserve_gears</span>(<span class="ruby-identifier">num_gears_recovered</span>, <span class="ruby-keyword">self</span>)
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Mongoid</span><span class="ruby-operator">::</span><span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentNotFound</span>
        <span class="ruby-comment"># ignore if the application is already deleted</span>
      <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e_rollback</span>
        <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-string">&quot;Error during rollback&quot;</span>
        <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-identifier">e_rollback</span>.<span class="ruby-identifier">message</span>
        <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-identifier">e_rollback</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">inspect</span>

        <span class="ruby-comment"># if the original exception was raised just to trigger a rollback</span>
        <span class="ruby-comment"># then the rollback exception is the only thing of value and hence return/raise it</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e_rollback</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">rollback_pending</span>
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># raise the original exception if it was the actual exception that led to the rollback</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">rollback_pending</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">e_orig</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-string">'resultIO'</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">e_orig</span>.<span class="ruby-identifier">resultIO</span>
          <span class="ruby-identifier">e_orig</span>.<span class="ruby-identifier">resultIO</span>.<span class="ruby-identifier">append</span> <span class="ruby-identifier">result_io</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">e_orig</span>.<span class="ruby-identifier">resultIO</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">result_io</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e_orig</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">begin</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">reload</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Mongoid</span><span class="ruby-operator">::</span><span class="ruby-constant">Errors</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentNotFound</span>
      <span class="ruby-comment"># ignore the exception, if the application has been deleted</span>
      <span class="ruby-comment"># the app could be deleted based on the user's app deletion request</span>
      <span class="ruby-comment"># or it could be the result of a rollback of an app creation request</span>

      <span class="ruby-comment"># just break out of the loop</span>
      <span class="ruby-keyword">break</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- run_jobs-source -->
            
          </div>

          

          
        </div><!-- run_jobs-method -->

      
        <div id="scale_by-method" class="method-detail ">
          <a name="method-i-scale_by"></a>

          
          <div class="method-heading">
            <span class="method-name">scale_by</span><span
              class="method-args">(group_instance_id, scale_by)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Trigger a scale up or scale down of a {GroupInstance} @param
group_instance_id [String] ID of the {GroupInstance} @param <a
href="Application.html#method-i-scale_by">scale_by</a> [Integer] Number of
gears to scale add/remove from the {GroupInstance}.</p>

<pre>A positive value will trigger a scale up and a negative value a scale down</pre>

<p>@return [ResultIO] Output from cartridges @raise [OpenShift::UserException]
Exception raised if request cannot be completed</p>
            

            
            <div class="method-source-code" id="scale_by-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 870</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">scale_by</span>(<span class="ruby-identifier">group_instance_id</span>, <span class="ruby-identifier">scale_by</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Application #{self.name} is not scalable&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>

  <span class="ruby-identifier">ginst</span> = <span class="ruby-identifier">group_instances_with_scale</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">gi</span><span class="ruby-operator">|</span> <span class="ruby-identifier">gi</span>.<span class="ruby-identifier">_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">group_instance_id</span>}.<span class="ruby-identifier">first</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Cannot scale below minimum gear requirements.&quot;</span>, <span class="ruby-value">168</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">scale_by</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">min</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Cannot scale up beyond maximum gear limit in app #{self.name}.&quot;</span>, <span class="ruby-value">168</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">scale_by</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">gears</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">max</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">ginst</span>.<span class="ruby-identifier">max</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>

  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">ScaleOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">group_instance_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">group_instance_id</span>, <span class="ruby-identifier">scale_by</span><span class="ruby-operator">:</span> <span class="ruby-identifier">scale_by</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- scale_by-source -->
            
          </div>

          

          
        </div><!-- scale_by-method -->

      
        <div id="scale_status_url-method" class="method-detail ">
          <a name="method-i-scale_status_url"></a>

          
          <div class="method-heading">
            <span class="method-name">scale_status_url</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="scale_status_url-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 225</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">scale_status_url</span>
  <span class="ruby-constant">URI</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">web_url</span>, <span class="ruby-string">&quot;/haproxy-status/&quot;</span>).<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- scale_status_url-source -->
            
          </div>

          

          
        </div><!-- scale_status_url-method -->

      
        <div id="scales-3F-method" class="method-detail ">
          <a name="method-i-scales-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">scales?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="scales-3F-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 207</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">scales?</span>
  <span class="ruby-identifier">scale</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- scales-3F-source -->
            
          </div>

          

          
        </div><!-- scales-3F-method -->

      
        <div id="set_connections-method" class="method-detail ">
          <a name="method-i-set_connections"></a>

          
          <div class="method-heading">
            <span class="method-name">set_connections</span><span
              class="method-args">(connections)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="set_connections-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1298</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_connections</span>(<span class="ruby-identifier">connections</span>)
  <span class="ruby-identifier">conns</span> = []
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">connections</span> = [] <span class="ruby-keyword">unless</span> <span class="ruby-identifier">connections</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-identifier">connections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">conn_info</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">from_comp_inst</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">cartridge_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">conn_info</span>[<span class="ruby-string">&quot;from_comp_inst&quot;</span>][<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-identifier">component_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">conn_info</span>[<span class="ruby-string">&quot;from_comp_inst&quot;</span>][<span class="ruby-string">&quot;comp&quot;</span>])
    <span class="ruby-identifier">to_comp_inst</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">cartridge_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">conn_info</span>[<span class="ruby-string">&quot;to_comp_inst&quot;</span>][<span class="ruby-string">&quot;cart&quot;</span>], <span class="ruby-identifier">component_name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">conn_info</span>[<span class="ruby-string">&quot;to_comp_inst&quot;</span>][<span class="ruby-string">&quot;comp&quot;</span>])
    <span class="ruby-identifier">conns</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">ConnectionInstance</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">from_comp_inst</span>.<span class="ruby-identifier">_id</span>, <span class="ruby-identifier">to_comp_inst</span>.<span class="ruby-identifier">_id</span>,
          <span class="ruby-identifier">conn_info</span>[<span class="ruby-string">&quot;from_connector_name&quot;</span>], <span class="ruby-identifier">conn_info</span>[<span class="ruby-string">&quot;to_connector_name&quot;</span>], <span class="ruby-identifier">conn_info</span>[<span class="ruby-string">&quot;connection_type&quot;</span>]))
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">connections</span> = <span class="ruby-identifier">conns</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- set_connections-source -->
            
          </div>

          

          
        </div><!-- set_connections-method -->

      
        <div id="set_group_overrides-method" class="method-detail ">
          <a name="method-i-set_group_overrides"></a>

          
          <div class="method-heading">
            <span class="method-name">set_group_overrides</span><span
              class="method-args">(group_overrides)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Updates the component grouping overrides of the application and create
tasks to perform the update @param group_overrides [Array] list of group
overrides @return [ResultIO] Output from cartridges</p>
            

            
            <div class="method-source-code" id="set_group_overrides-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 783</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_group_overrides</span>(<span class="ruby-identifier">group_overrides</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">AddFeaturesOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">features</span><span class="ruby-operator">:</span> [], <span class="ruby-identifier">group_overrides</span><span class="ruby-operator">:</span> <span class="ruby-identifier">group_overrides</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">save!</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- set_group_overrides-source -->
            
          </div>

          

          
        </div><!-- set_group_overrides-method -->

      
        <div id="show_port-method" class="method-detail ">
          <a name="method-i-show_port"></a>

          
          <div class="method-heading">
            <span class="method-name">show_port</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="show_port-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1062</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">show_port</span>
  <span class="ruby-comment">#TODO</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;noimpl&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- show_port-source -->
            
          </div>

          

          
        </div><!-- show_port-method -->

      
        <div id="ssh_string-method" class="method-detail ">
          <a name="method-i-ssh_string"></a>

          
          <div class="method-heading">
            <span class="method-name">ssh_string</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Helper to return the segment that would be provided for command line calls</p>
            

            
            <div class="method-source-code" id="ssh_string-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 192</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ssh_string</span>
  <span class="ruby-identifier">uri</span> = <span class="ruby-identifier">ssh_url</span>
  <span class="ruby-identifier">user</span> = <span class="ruby-node">&quot;#{uri.userinfo}@&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">userinfo</span>
  <span class="ruby-identifier">port</span> = <span class="ruby-node">&quot;:#{uri.port}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">port</span>
  [<span class="ruby-identifier">user</span>,<span class="ruby-identifier">uri</span>.<span class="ruby-identifier">host</span>,<span class="ruby-identifier">port</span>].<span class="ruby-identifier">join</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- ssh_string-source -->
            
          </div>

          

          
        </div><!-- ssh_string-method -->

      
        <div id="ssh_uri-method" class="method-detail ">
          <a name="method-i-ssh_uri"></a>

          
          <div class="method-heading">
            <span class="method-name">ssh_uri</span><span
              class="method-args">(gear_uuid=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the SSH URI for an application gear (unless specified, the primary)
@return [String]</p>
            

            
            <div class="method-source-code" id="ssh_uri-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 896</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ssh_uri</span>(<span class="ruby-identifier">gear_uuid</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">gear_uuid</span> <span class="ruby-comment"># specific gear_uuid requested</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">gears</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">uuid</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_uuid</span>).<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-identifier">gear</span> = <span class="ruby-identifier">gears</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">uuid</span><span class="ruby-operator">:</span> <span class="ruby-identifier">gear_uuid</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-node">&quot;#{gear_uuid}@#{fqdn(gear.name)}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">gears</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">app_dns</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-comment"># get the gear_uuid of head gear</span>
    <span class="ruby-identifier">gear</span> = <span class="ruby-identifier">gears</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">app_dns</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)
    <span class="ruby-keyword">return</span> <span class="ruby-node">&quot;#{gear.uuid}@#{fqdn}&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-string">&quot;&quot;</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- ssh_uri-source -->
            
          </div>

          

          
        </div><!-- ssh_uri-method -->

      
        <div id="ssh_url-method" class="method-detail ">
          <a name="method-i-ssh_url"></a>

          
          <div class="method-heading">
            <span class="method-name">ssh_url</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>FIXME would prefer this come from REST API</p>
            

            
            <div class="method-source-code" id="ssh_url-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 183</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ssh_url</span>
  <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">git_url</span>)
  <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-string">'ssh'</span>
  <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">path</span> = <span class="ruby-string">''</span>
  <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">fragment</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">uri</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- ssh_url-source -->
            
          </div>

          

          
        </div><!-- ssh_url-method -->

      
        <div id="start-method" class="method-detail ">
          <a name="method-i-start"></a>

          
          <div class="method-heading">
            <span class="method-name">start</span><span
              class="method-args">(feature=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Start an application of feature @param feature [<a
href="String.html">String</a>, optional] Optional feature name to start. If
nil, it will trigger start on all features in the application @return
[ResultIO] Output from cartridges</p>
            

            
            <div class="method-source-code" id="start-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 939</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start</span>(<span class="ruby-identifier">feature</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">op_group</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">feature</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">StartAppOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">StartFeatureOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">feature</span><span class="ruby-operator">:</span> <span class="ruby-identifier">feature</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- start-source -->
            
          </div>

          

          
        </div><!-- start-method -->

      
        <div id="start_component-method" class="method-detail ">
          <a name="method-i-start_component"></a>

          
          <div class="method-heading">
            <span class="method-name">start_component</span><span
              class="method-args">(component_name, cartridge_name)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="start_component-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 954</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start_component</span>(<span class="ruby-identifier">component_name</span>, <span class="ruby-identifier">cartridge_name</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">StartCompOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> {<span class="ruby-string">&quot;comp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">component_name</span>, <span class="ruby-string">&quot;cart&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cartridge_name</span>}, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- start_component-source -->
            
          </div>

          

          
        </div><!-- start_component-method -->

      
        <div id="status-method" class="method-detail ">
          <a name="method-i-status"></a>

          
          <div class="method-heading">
            <span class="method-name">status</span><span
              class="method-args">(feature=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="status-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1079</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">status</span>(<span class="ruby-identifier">feature</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">component_instances</span> = <span class="ruby-identifier">get_components_for_feature</span>(<span class="ruby-identifier">feature</span>)
  <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">component_instance</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">GroupInstance</span>.<span class="ruby-identifier">run_on_gears</span>(<span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">gears</span>, <span class="ruby-identifier">result_io</span>, <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span>, <span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">has_component?</span>(<span class="ruby-identifier">component_instance</span>)
      <span class="ruby-identifier">r</span>.<span class="ruby-identifier">append</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">status</span>(<span class="ruby-identifier">component_instance</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">result_io</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- status-source -->
            
          </div>

          

          
        </div><!-- status-method -->

      
        <div id="stop-method" class="method-detail ">
          <a name="method-i-stop"></a>

          
          <div class="method-heading">
            <span class="method-name">stop</span><span
              class="method-args">(feature=nil, force=false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="stop-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 964</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stop</span>(<span class="ruby-identifier">feature</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">force</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">feature</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">StopAppOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">force</span><span class="ruby-operator">:</span> <span class="ruby-identifier">force</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">StopFeatureOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">feature</span><span class="ruby-operator">:</span> <span class="ruby-identifier">feature</span>, <span class="ruby-identifier">force</span><span class="ruby-operator">:</span> <span class="ruby-identifier">force</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- stop-source -->
            
          </div>

          

          
        </div><!-- stop-method -->

      
        <div id="stop_component-method" class="method-detail ">
          <a name="method-i-stop_component"></a>

          
          <div class="method-heading">
            <span class="method-name">stop_component</span><span
              class="method-args">(component_name, cartridge_name, force=false)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="stop_component-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 979</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stop_component</span>(<span class="ruby-identifier">component_name</span>, <span class="ruby-identifier">cartridge_name</span>, <span class="ruby-identifier">force</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">StopCompOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> {<span class="ruby-string">&quot;comp&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">component_name</span>, <span class="ruby-string">&quot;cart&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">cartridge_name</span>}, <span class="ruby-identifier">force</span><span class="ruby-operator">:</span> <span class="ruby-identifier">force</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- stop_component-source -->
            
          </div>

          

          
        </div><!-- stop_component-method -->

      
        <div id="subscription_filter-method" class="method-detail ">
          <a name="method-i-subscription_filter"></a>

          
          <div class="method-heading">
            <span class="method-name">subscription_filter</span><span
              class="method-args">(ci, publishers)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Creates array of subscriptions from component instance and publishers which
accounts for subscriptions as specified and calculated subscriptions for
connections with “wildcard” ENV:* subscriptions in manifest</p>

<h2>Parameters:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>ci</p></td>
<td>
<p>A component instance as representation as generated by elaborate</p>
</td></tr><tr><td class="rdoc-term"><p>publishers</p></td>
<td>
<p>A hash of publishers for the set of features provided to elaborate</p>
</td></tr></table>

<h2>Returns:</h2>
<table class="rdoc-list"><tr><td class="rdoc-term"><p>subscriptions</p></td>
<td>
<p>An array of <a href="OpenShift/Connector.html">OpenShift::Connector</a>
object copies with subscriptions properly realized</p>
</td></tr></table>
            

            
            <div class="method-source-code" id="subscription_filter-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2423</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">subscription_filter</span>(<span class="ruby-identifier">ci</span>, <span class="ruby-identifier">publishers</span>)
  <span class="ruby-identifier">wildcards</span> = <span class="ruby-identifier">ci</span>[<span class="ruby-value">:component</span>].<span class="ruby-identifier">subscribes</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">connector</span><span class="ruby-operator">|</span> <span class="ruby-identifier">connector</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;ENV:*&quot;</span> }
  <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Multiple wildcard subscriptions specified in component #{ci[:component].name}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">wildcards</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>

  <span class="ruby-identifier">subscriptions</span> = <span class="ruby-identifier">ci</span>[<span class="ruby-value">:component</span>].<span class="ruby-identifier">subscribes</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">conn</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">new_conn</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-comment"># Avoid copying ENV: connectors if wildcard subscription is found</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> ( <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">start_with?</span> <span class="ruby-string">&quot;ENV:&quot;</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">wildcards</span>.<span class="ruby-identifier">any?</span> )
      <span class="ruby-identifier">new_conn</span> = <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">Connector</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">name</span>)
      <span class="ruby-identifier">new_conn</span>.<span class="ruby-identifier">from_descriptor</span>(<span class="ruby-identifier">conn</span>.<span class="ruby-identifier">to_descriptor</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">new_conn</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">compact</span>

  <span class="ruby-comment"># Add all published &quot;ENV:&quot; connections for subscriber with wildcard</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">wildcards</span>.<span class="ruby-identifier">any?</span>
    <span class="ruby-identifier">connector</span> = <span class="ruby-identifier">wildcards</span>[<span class="ruby-value">0</span>]
    <span class="ruby-identifier">publishers</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ptype</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">ptype</span>.<span class="ruby-identifier">start_with?</span> <span class="ruby-string">&quot;ENV:&quot;</span>
        <span class="ruby-identifier">new_conn</span> = <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">Connector</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">connector</span>.<span class="ruby-identifier">name</span>)
        <span class="ruby-identifier">new_conn</span>.<span class="ruby-identifier">type</span> = <span class="ruby-identifier">ptype</span>
        <span class="ruby-identifier">new_conn</span>.<span class="ruby-identifier">required</span> = <span class="ruby-identifier">connector</span>.<span class="ruby-identifier">required</span>
        <span class="ruby-identifier">subscriptions</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_conn</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">subscriptions</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- subscription_filter-source -->
            
          </div>

          

          
        </div><!-- subscription_filter-method -->

      
        <div id="threaddump-method" class="method-detail ">
          <a name="method-i-threaddump"></a>

          
          <div class="method-heading">
            <span class="method-name">threaddump</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="threaddump-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1029</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">threaddump</span>
  <span class="ruby-identifier">threaddump_available</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">component_instances</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">component_instance</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">GroupInstance</span>.<span class="ruby-identifier">run_on_gears</span>(<span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">gears</span>, <span class="ruby-identifier">result_io</span>, <span class="ruby-keyword">false</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span>, <span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">r</span>.<span class="ruby-identifier">append</span> <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">threaddump</span>(<span class="ruby-identifier">component_instance</span>)
      <span class="ruby-identifier">threaddump_available</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">get_additional_control_actions</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">get_additional_control_actions</span>.<span class="ruby-identifier">include?</span> <span class="ruby-string">&quot;threaddump&quot;</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;The threaddump command is not available for this application&quot;</span>, <span class="ruby-value">180</span>) <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">threaddump_available</span>
  <span class="ruby-identifier">result_io</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- threaddump-source -->
            
          </div>

          

          
        </div><!-- threaddump-method -->

      
        <div id="tidy-method" class="method-detail ">
          <a name="method-i-tidy"></a>

          
          <div class="method-heading">
            <span class="method-name">tidy</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="tidy-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1052</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tidy</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">TidyAppOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- tidy-source -->
            
          </div>

          

          
        </div><!-- tidy-method -->

      
        <div id="to_descriptor-method" class="method-detail ">
          <a name="method-i-to_descriptor"></a>

          
          <div class="method-heading">
            <span class="method-name">to_descriptor</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Returns the application descriptor as a <a href="Hash.html">Hash</a>. The
descriptor contains all the metadata necessary to describe the application.
@requires [Hash]</p>
            

            
            <div class="method-source-code" id="to_descriptor-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 922</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_descriptor</span>
  <span class="ruby-identifier">h</span> = {
    <span class="ruby-string">&quot;Name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">name</span>,
    <span class="ruby-string">&quot;Requires&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">requires</span>(<span class="ruby-keyword">true</span>)
  }

  <span class="ruby-identifier">h</span>[<span class="ruby-string">&quot;Start-Order&quot;</span>] = <span class="ruby-ivar">@start_order</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@start_order</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-identifier">h</span>[<span class="ruby-string">&quot;Stop-Order&quot;</span>] = <span class="ruby-ivar">@stop_order</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@stop_order</span>.<span class="ruby-identifier">present?</span>
  <span class="ruby-identifier">h</span>[<span class="ruby-string">&quot;Group-Overrides&quot;</span>] = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_overrides</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_overrides</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">h</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_descriptor-source -->
            
          </div>

          

          
        </div><!-- to_descriptor-method -->

      
        <div id="to_param-method" class="method-detail ">
          <a name="method-i-to_param"></a>

          
          <div class="method-heading">
            <span class="method-name">to_param</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Override to append the name to UI urls</p>
            

            
            <div class="method-source-code" id="to_param-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_param</span>
  <span class="ruby-node">&quot;#{id}-#{name}&quot;</span>.<span class="ruby-identifier">parameterize</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">present?</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- to_param-source -->
            
          </div>

          

          
        </div><!-- to_param-method -->

      
        <div id="update_alias-method" class="method-detail ">
          <a name="method-i-update_alias"></a>

          
          <div class="method-heading">
            <span class="method-name">update_alias</span><span
              class="method-args">(fqdn, ssl_certificate=nil, private_key=nil, pass_phrase="")</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="update_alias-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1172</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_alias</span>(<span class="ruby-identifier">fqdn</span>, <span class="ruby-identifier">ssl_certificate</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">private_key</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">pass_phrase</span>=<span class="ruby-string">&quot;&quot;</span>)

  <span class="ruby-identifier">validate_certificate</span>(<span class="ruby-identifier">ssl_certificate</span>, <span class="ruby-identifier">private_key</span>, <span class="ruby-identifier">pass_phrase</span>)

  <span class="ruby-identifier">fqdn</span> = <span class="ruby-identifier">fqdn</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">fqdn</span>
  <span class="ruby-identifier">old_alias</span> = <span class="ruby-identifier">aliases</span>.<span class="ruby-identifier">find_by</span>(<span class="ruby-identifier">fqdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">fqdn</span>)
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-comment">#remove old certificate</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_alias</span>.<span class="ruby-identifier">has_private_ssl_certificate</span>
       <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">RemoveSslCertOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fqdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">fqdn</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
       <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment">#add new certificate</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ssl_certificate</span>.<span class="ruby-identifier">present?</span>
      <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">AddSslCertOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">fqdn</span><span class="ruby-operator">:</span> <span class="ruby-identifier">fqdn</span>, <span class="ruby-identifier">ssl_certificate</span><span class="ruby-operator">:</span> <span class="ruby-identifier">ssl_certificate</span>, <span class="ruby-identifier">private_key</span><span class="ruby-operator">:</span> <span class="ruby-identifier">private_key</span>, <span class="ruby-identifier">pass_phrase</span><span class="ruby-operator">:</span> <span class="ruby-identifier">pass_phrase</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_alias-source -->
            
          </div>

          

          
        </div><!-- update_alias-method -->

      
        <div id="update_cluster-method" class="method-detail ">
          <a name="method-i-update_cluster"></a>

          
          <div class="method-heading">
            <span class="method-name">update_cluster</span><span
              class="method-args">(options={})</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Updates the gear registry on all proxy gears and invokes each proxy
cartridge’s update-cluster control method so it can update its
configuration as well.</p>

<p>options may contain rollback:true to indicate this is a rollback</p>
            

            
            <div class="method-source-code" id="update_cluster-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1224</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_cluster</span>(<span class="ruby-identifier">options</span>={})
  <span class="ruby-identifier">web_proxy_gears</span> = <span class="ruby-identifier">get_web_proxy_gears</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">web_proxy_gears</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">web_framework_gears</span> = <span class="ruby-identifier">get_web_framework_gears</span>

  <span class="ruby-comment"># we don't want to have all the proxies down at the same time, so do the</span>
  <span class="ruby-comment"># first one by itself, wait for it to finish, and then do the rest in</span>
  <span class="ruby-comment"># parallel</span>
  <span class="ruby-identifier">first_proxy</span> = <span class="ruby-identifier">web_proxy_gears</span>.<span class="ruby-identifier">first</span>

  <span class="ruby-identifier">options</span>[<span class="ruby-value">:proxy_gears</span>] = <span class="ruby-identifier">web_proxy_gears</span>
  <span class="ruby-identifier">options</span>[<span class="ruby-value">:web_gears</span>] = <span class="ruby-identifier">web_framework_gears</span>

  <span class="ruby-identifier">first_proxy</span>.<span class="ruby-identifier">update_cluster</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">sync_new_gears</span><span class="ruby-value">:true</span>))

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">web_proxy_gears</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
    <span class="ruby-comment"># do the rest</span>
    <span class="ruby-identifier">handle</span> = <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">create_parallel_job</span>

    <span class="ruby-identifier">web_proxy_gears</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">job</span> = <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">get_update_cluster_job</span>(<span class="ruby-identifier">options</span>)
      <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">add_parallel_job</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-identifier">gear</span>, <span class="ruby-identifier">job</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># TODO consider doing multiple batches of jobs in parallel, instead of 1 big</span>
    <span class="ruby-comment"># parallel job</span>
    <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">execute_parallel_jobs</span>(<span class="ruby-identifier">handle</span>)

    <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">get_parallel_run_results</span>(<span class="ruby-identifier">handle</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tag</span>, <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">output</span>, <span class="ruby-identifier">status</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">status</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
        <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Update cluster failed:: tag: #{tag}, gear_id: #{gear_id},&quot;</span>                              <span class="ruby-node">&quot;output: #{output}, status: #{status}&quot;</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_cluster-source -->
            
          </div>

          

          
        </div><!-- update_cluster-method -->

      
        <div id="update_component_limits-method" class="method-detail ">
          <a name="method-i-update_component_limits"></a>

          
          <div class="method-heading">
            <span class="method-name">update_component_limits</span><span
              class="method-args">(component_instance, scale_from, scale_to, additional_filesystem_gb, multiplier=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Create and add group overrides to update scaling and filesystem limits for
a the {GroupInstance} hosting a {ComponentInstance} @param
component_instance [ComponentInstance] The component instance to use when
creating the override definition @param scale_from [Integer] Minimum scale
for the component @param scale_to [Integer] Maximum scale for the component
@param additional_filesystem_gb [Integer] Gb of disk storage required
beyond is default in the gear size @return [ResultIO] Output from
cartridges @raise [OpenShift::UserException] Exception raised if request
cannot be completed</p>
            

            
            <div class="method-source-code" id="update_component_limits-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 846</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_component_limits</span>(<span class="ruby-identifier">component_instance</span>, <span class="ruby-identifier">scale_from</span>, <span class="ruby-identifier">scale_to</span>, <span class="ruby-identifier">additional_filesystem_gb</span>, <span class="ruby-identifier">multiplier</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">additional_filesystem_gb</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">additional_filesystem_gb</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">max_storage</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">owner</span>.<span class="ruby-identifier">max_storage</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;You are not allowed to request additional gear storage&quot;</span>, <span class="ruby-value">164</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">max_storage</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;You have requested more additional gear storage than you are allowed (max: #{max_storage} GB)&quot;</span>, <span class="ruby-value">166</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">additional_filesystem_gb</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">max_storage</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Cannot set the max gear limit to '1' if the application is HA (highly available)&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">ha</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">scale_to</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateCompLimitsOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">comp_spec</span><span class="ruby-operator">:</span> <span class="ruby-identifier">component_instance</span>.<span class="ruby-identifier">to_hash</span>, <span class="ruby-identifier">min</span><span class="ruby-operator">:</span> <span class="ruby-identifier">scale_from</span>, <span class="ruby-identifier">max</span><span class="ruby-operator">:</span> <span class="ruby-identifier">scale_to</span>, <span class="ruby-identifier">multiplier</span><span class="ruby-operator">:</span> <span class="ruby-identifier">multiplier</span>, <span class="ruby-identifier">additional_filesystem_gb</span><span class="ruby-operator">:</span> <span class="ruby-identifier">additional_filesystem_gb</span>, <span class="ruby-identifier">user_agent</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">user_agent</span>)
    <span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">save!</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_component_limits-source -->
            
          </div>

          

          
        </div><!-- update_component_limits-method -->

      
        <div id="update_configuration-method" class="method-detail ">
          <a name="method-i-update_configuration"></a>

          
          <div class="method-heading">
            <span class="method-name">update_configuration</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Updates the configuration of the application. @return [ResultIO] Output
from cartridges</p>
            

            
            <div class="method-source-code" id="update_configuration-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 408</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_configuration</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">invalid?</span>
    <span class="ruby-identifier">messages</span> = []
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">messages</span>[<span class="ruby-value">:config</span>]
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">messages</span>[<span class="ruby-value">:config</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">error</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">error</span>[<span class="ruby-value">:message</span>]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">error</span>[<span class="ruby-value">:message</span>]
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">messages</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">messages</span>.<span class="ruby-identifier">push</span>(<span class="ruby-node">&quot;#{key} #{value.join(&quot;,&quot;)}&quot;</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid application configuration: #{messages}&quot;</span>, <span class="ruby-value">1</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-constant">Application</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">op_group</span> = <span class="ruby-constant">UpdateAppConfigOpGroup</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">config</span><span class="ruby-operator">:</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">config</span>)
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pending_op_groups</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">op_group</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">save!</span>
    <span class="ruby-identifier">result_io</span> = <span class="ruby-constant">ResultIO</span>.<span class="ruby-identifier">new</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">run_jobs</span>(<span class="ruby-identifier">result_io</span>)
    <span class="ruby-identifier">result_io</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_configuration-source -->
            
          </div>

          

          
        </div><!-- update_configuration-method -->

      
        <div id="update_deployments-method" class="method-detail ">
          <a name="method-i-update_deployments"></a>

          
          <div class="method-heading">
            <span class="method-name">update_deployments</span><span
              class="method-args">(deployments)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="update_deployments-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2934</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_deployments</span>(<span class="ruby-identifier">deployments</span>)
  <span class="ruby-comment"># validate the deployments</span>
  <span class="ruby-identifier">deployments</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">ApplicationValidationException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">valid?</span> }

  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">set</span>(<span class="ruby-value">:deployments</span>, <span class="ruby-identifier">deployments</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">to_hash</span>})
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_deployments-source -->
            
          </div>

          

          
        </div><!-- update_deployments-method -->

      
        <div id="update_deployments_from_result-method" class="method-detail ">
          <a name="method-i-update_deployments_from_result"></a>

          
          <div class="method-heading">
            <span class="method-name">update_deployments_from_result</span><span
              class="method-args">(result_io)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="update_deployments_from_result-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2941</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_deployments_from_result</span>(<span class="ruby-identifier">result_io</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">result_io</span>.<span class="ruby-identifier">deployments</span>
    <span class="ruby-identifier">deploys</span> = []
    <span class="ruby-identifier">result_io</span>.<span class="ruby-identifier">deployments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">deploys</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">Deployment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">deployment_id</span><span class="ruby-operator">:</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">:id</span>],
                                     <span class="ruby-identifier">created_at</span><span class="ruby-operator">:</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">d</span>[<span class="ruby-value">:created_at</span>].<span class="ruby-identifier">to_f</span>),
                                            <span class="ruby-identifier">ref</span><span class="ruby-operator">:</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">:ref</span>],
                                           <span class="ruby-identifier">sha1</span><span class="ruby-operator">:</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">:sha1</span>],
                                   <span class="ruby-identifier">artifact_url</span><span class="ruby-operator">:</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">:artifact_url</span>],
                                    <span class="ruby-identifier">activations</span><span class="ruby-operator">:</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">:activations</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">:activations</span>].<span class="ruby-identifier">map</span>(&amp;<span class="ruby-value">:to_f</span>) <span class="ruby-operator">:</span> [],
                                     <span class="ruby-identifier">hot_deploy</span><span class="ruby-operator">:</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">:hot_deploy</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">false</span>,
                              <span class="ruby-identifier">force_clean_build</span><span class="ruby-operator">:</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">:force_clean_build</span>] <span class="ruby-operator">||</span> <span class="ruby-keyword">false</span>))
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">update_deployments</span>(<span class="ruby-identifier">deploys</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_deployments_from_result-source -->
            
          </div>

          

          
        </div><!-- update_deployments_from_result-method -->

      
        <div id="update_proxy_status-method" class="method-detail ">
          <a name="method-i-update_proxy_status"></a>

          
          <div class="method-heading">
            <span class="method-name">update_proxy_status</span><span
              class="method-args">(options)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Enables or disables a target gear in all proxies</p>

<p>options:</p>

<pre>:action - :enable or :disable
:gear_uuid - target gear uuid to enable/disable
:persist - if true, update the proxy configuration on disk</pre>
            

            
            <div class="method-source-code" id="update_proxy_status-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1268</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_proxy_status</span>(<span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">web_proxy_gears</span> = <span class="ruby-identifier">get_web_proxy_gears</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">web_proxy_gears</span>.<span class="ruby-identifier">empty?</span>

  <span class="ruby-identifier">handle</span> = <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">create_parallel_job</span>
  <span class="ruby-identifier">web_proxy_gears</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">gear</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">add_parallel_job</span>(<span class="ruby-identifier">handle</span>, <span class="ruby-string">&quot;&quot;</span>, <span class="ruby-identifier">gear</span>, <span class="ruby-identifier">gear</span>.<span class="ruby-identifier">get_update_proxy_status_job</span>(<span class="ruby-identifier">options</span>))
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">execute_parallel_jobs</span>(<span class="ruby-identifier">handle</span>)

  <span class="ruby-constant">RemoteJob</span>.<span class="ruby-identifier">get_parallel_run_results</span>(<span class="ruby-identifier">handle</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">tag</span>, <span class="ruby-identifier">gear_id</span>, <span class="ruby-identifier">output</span>, <span class="ruby-identifier">status</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">status</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
      <span class="ruby-constant">Rails</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-node">&quot;Update proxy status failed:: tag: #{tag}, gear_id: #{gear_id},&quot;</span>                            <span class="ruby-node">&quot;output: #{output}, status: #{status}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_proxy_status-source -->
            
          </div>

          

          
        </div><!-- update_proxy_status-method -->

      
        <div id="update_requirements-method" class="method-detail ">
          <a name="method-i-update_requirements"></a>

          
          <div class="method-heading">
            <span class="method-name">update_requirements</span><span
              class="method-args">(features, group_overrides, init_git_url=nil, user_env_vars=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="update_requirements-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1602</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_requirements</span>(<span class="ruby-identifier">features</span>, <span class="ruby-identifier">group_overrides</span>, <span class="ruby-identifier">init_git_url</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">user_env_vars</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">group_overrides</span> = (<span class="ruby-identifier">group_overrides</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">gen_non_scalable_app_overrides</span>(<span class="ruby-identifier">features</span>)).<span class="ruby-identifier">uniq</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">scalable</span>

  <span class="ruby-identifier">connections</span>, <span class="ruby-identifier">new_group_instances</span>, <span class="ruby-identifier">cleaned_group_overrides</span> = <span class="ruby-identifier">elaborate</span>(<span class="ruby-identifier">features</span>, <span class="ruby-identifier">group_overrides</span>)
  <span class="ruby-identifier">current_group_instances</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">group_instances</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">gi</span><span class="ruby-operator">|</span> <span class="ruby-identifier">gi</span>.<span class="ruby-identifier">to_hash</span> }
  <span class="ruby-identifier">changes</span>, <span class="ruby-identifier">moves</span> = <span class="ruby-identifier">compute_diffs</span>(<span class="ruby-identifier">current_group_instances</span>, <span class="ruby-identifier">new_group_instances</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">moves</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Requested operation is not supported&quot;</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">calculate_ops</span>(<span class="ruby-identifier">changes</span>, <span class="ruby-identifier">moves</span>, <span class="ruby-identifier">connections</span>, <span class="ruby-identifier">cleaned_group_overrides</span>, <span class="ruby-identifier">init_git_url</span>, <span class="ruby-identifier">user_env_vars</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_requirements-source -->
            
          </div>

          

          
        </div><!-- update_requirements-method -->

      
        <div id="uuid-method" class="method-detail ">
          <a name="method-i-uuid"></a>

          
          <div class="method-heading">
            <span class="method-name">uuid</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="uuid-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 344</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">uuid</span>
  <span class="ruby-identifier">_id</span>.<span class="ruby-identifier">to_s</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- uuid-source -->
            
          </div>

          

          
        </div><!-- uuid-method -->

      
        <div id="valid-3F-method" class="method-detail ">
          <a name="method-i-valid-3F"></a>

          
          <div class="method-heading">
            <span class="method-name">valid?</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="valid-3F-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">valid?</span>
  <span class="ruby-identifier">valid</span> = <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">domain_name</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">errors</span>[<span class="ruby-value">:domain_name</span>].<span class="ruby-identifier">blank?</span>
    <span class="ruby-identifier">errors</span>.<span class="ruby-identifier">add</span>(<span class="ruby-value">:domain_name</span>, <span class="ruby-string">'Namespace is required'</span>)
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">valid</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- valid-3F-source -->
            
          </div>

          

          
        </div><!-- valid-3F-method -->

      
        <div id="validate_certificate-method" class="method-detail ">
          <a name="method-i-validate_certificate"></a>

          
          <div class="method-heading">
            <span class="method-name">validate_certificate</span><span
              class="method-args">(ssl_certificate, private_key, pass_phrase)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="validate_certificate-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 2883</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">validate_certificate</span>(<span class="ruby-identifier">ssl_certificate</span>, <span class="ruby-identifier">private_key</span>, <span class="ruby-identifier">pass_phrase</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">ssl_certificate</span>.<span class="ruby-identifier">present?</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Private key is required&quot;</span>, <span class="ruby-value">172</span>, <span class="ruby-string">&quot;private_key&quot;</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">private_key</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-comment">#validate certificate</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">ssl_cert_clean</span> = <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">X509</span><span class="ruby-operator">::</span><span class="ruby-constant">Certificate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">ssl_certificate</span>.<span class="ruby-identifier">strip</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid certificate: #{e.message}&quot;</span>, <span class="ruby-value">174</span>, <span class="ruby-string">&quot;ssl_certificate&quot;</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-comment">#validate private key</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">pass_phrase</span> = <span class="ruby-string">''</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">pass_phrase</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">priv_key_clean</span> = <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">PKey</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">private_key</span>.<span class="ruby-identifier">strip</span>, <span class="ruby-identifier">pass_phrase</span>.<span class="ruby-identifier">strip</span>)
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;Invalid private key or pass phrase: #{e.message}&quot;</span>, <span class="ruby-value">172</span>, <span class="ruby-string">&quot;private_key&quot;</span>)
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">ssl_cert_clean</span>.<span class="ruby-identifier">check_private_key</span>(<span class="ruby-identifier">priv_key_clean</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Private key/certificate mismatch&quot;</span>, <span class="ruby-value">172</span>, <span class="ruby-string">&quot;private_key&quot;</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> [<span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">PKey</span><span class="ruby-operator">::</span><span class="ruby-constant">RSA</span>, <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">PKey</span><span class="ruby-operator">::</span><span class="ruby-constant">DSA</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">priv_key_clean</span>.<span class="ruby-identifier">class</span>)
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">OpenShift</span><span class="ruby-operator">::</span><span class="ruby-constant">UserException</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&quot;Key must be RSA or DSA for Apache mod_ssl&quot;</span>,<span class="ruby-value">172</span>, <span class="ruby-string">&quot;private_key&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- validate_certificate-source -->
            
          </div>

          

          
        </div><!-- validate_certificate-method -->

      
        <div id="web_uri-method" class="method-detail ">
          <a name="method-i-web_uri"></a>

          
          <div class="method-heading">
            <span class="method-name">web_uri</span><span
              class="method-args">(scheme=nil)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="web_uri-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 176</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">web_uri</span>(<span class="ruby-identifier">scheme</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">app_url</span>)
  <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">scheme</span> = <span class="ruby-identifier">scheme</span>
  <span class="ruby-identifier">uri</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- web_uri-source -->
            
          </div>

          

          
        </div><!-- web_uri-method -->

      
        <div id="web_url-method" class="method-detail ">
          <a name="method-i-web_url"></a>

          
          <div class="method-heading">
            <span class="method-name">web_url</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="web_url-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 172</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">web_url</span>
  <span class="ruby-identifier">app_url</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- web_url-source -->
            
          </div>

          

          
        </div><!-- web_url-method -->

      
        <div id="with_lock-method" class="method-detail ">
          <a name="method-i-with_lock"></a>

          
          <div class="method-heading">
            <span class="method-name">with_lock</span><span
              class="method-args">(&block)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="with_lock-source">
<pre>
<span class="ruby-comment"># File controller/app/models/application.rb, line 1575</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">with_lock</span>(&amp;<span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">run_in_application_lock</span>(<span class="ruby-keyword">self</span>, &amp;<span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- with_lock-source -->
            
          </div>

          

          
        </div><!-- with_lock-method -->

      
      </div><!-- public-instance-method-details -->
    
      <div id="protected-instance-method-details" class="method-section section">
        <h3 class="section-header">Protected Instance Methods</h3>

      
        <div id="child_options-method" class="method-detail ">
          <a name="method-i-child_options"></a>

          
          <div class="method-heading">
            <span class="method-name">child_options</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="child_options-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 254</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">child_options</span>
  { <span class="ruby-value">:params</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">child_prefix_options</span>, <span class="ruby-value">:as</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">as</span> }
<span class="ruby-keyword">end</span></pre>
            </div><!-- child_options-source -->
            
          </div>

          

          
        </div><!-- child_options-method -->

      
        <div id="child_prefix_options-method" class="method-detail ">
          <a name="method-i-child_prefix_options"></a>

          
          <div class="method-heading">
            <span class="method-name">child_prefix_options</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            
            

            
            <div class="method-source-code" id="child_prefix_options-source">
<pre>
<span class="ruby-comment"># File console/app/models/application.rb, line 250</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">child_prefix_options</span>
  {<span class="ruby-value">:application_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">id</span>}
<span class="ruby-keyword">end</span></pre>
            </div><!-- child_prefix_options-source -->
            
          </div>

          

          
        </div><!-- child_prefix_options-method -->

      
      </div><!-- protected-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

